<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>IliTableGadget</title><link rel="Prev" href="datasource.06.11.html" title="Previous" /><link rel="Next" href="datasource.06.13.html" title="Next" /><link rel="StyleSheet" href="css/datasource.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/datasource_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/datasource.06.12.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pTxWJ47Y4pC6yM8HhhR2VkA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/datasource.06.12.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrfrontcover.html#wwconnect_header">Data Access User Manual</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrpart1.html#ww144909">Rogue Wave&nbsp;Views Data Access Common Framework</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/datasource.06.01.html#wwconnect_header">Data Sources and Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/datasource.06.10.html#wwconnect_header">Data-Source-Aware Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">IliTableGadget</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1035749" class="Heading2"><span></span>IliTableGadget</div><div class="ww_skin_page_overflow"><div id="ww1035775" class="Startfigure">    <img class="Default" src="../Options/images/IliTableGad.gif" width="100%" style="display: block; left: 0.0pt; max-height: 220px; max-width: 659px; top: 0.0pt" alt="" /></div></div><div id="ww1035776" class="Caption">The IliTableGadget Hierarchy and Example Gadget</div><div id="ww1008467" class="Body">The <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliTableGadget.html">IliTableGadget</a></span> class enables you to display an entire table. It also lets the end user edit table values, and add or delete rows.</div><div id="ww1008469" class="Body">A table gadget can be connected to a data source by calling <span class="code">f_setDataSourceName</span>.</div><div id="ww1008470" class="NormalCode">IliTableGadget* tg = new IliTableGadget(display,</div><div id="ww1008471" class="NormalCode">                                        IlvRect(20, 30, 300, 450));</div><div id="ww1008472" class="NormalCode">panel-&gt;addObject(tg);</div><div id="ww1008473" class="LastNormalCode">tg-&gt;f_setDataSourceName(“EMP”);</div><div id="ww1008475" class="Body">The <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliTableGadget.html">IliTableGadget</a></span> class provides many member functions that allow you to control the look of the gadget.</div><div id="ww1008476" class="Heading3"><span></span>Selection</div><div id="ww1008478" class="Body">The <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliTableSelection.html">IliTableSelection</a></span> class is used to describe the highlighted area in a table gadget at a given point in time. This area can be any of the following:</div><div id="ww1008479" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>a cell (identified by column and row indices)</div><div id="ww1008480" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>one or more rows (identified by their indices)</div><div id="ww1008481" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>one or more columns (identified by their indices)</div><div id="ww1008482" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>the complete table gadget</div><div id="ww1008483" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>empty</div><div id="ww1008485" class="Body">The <span class="code">getSelection</span> member function returns the current selection in a table gadget and the <span class="code">setSelection</span> changes this selection.</div><div id="ww1008487" class="Body">By default, a table gadget is <span class="emphasis">bound</span> to its data source. This means that the row of the selection in the table gadget remains synchronized with the current row of the data source. The <span class="code">bindToDataSource</span> member function controls this.</div><div id="ww1008490" class="Body">The <span class="code">pointToSelection</span> member function can be used to identify which part of a table gadget contains a given geometrical point.</div><div id="ww1008492" class="Heading3"><span></span>Column Geometry</div><div id="ww1008493" class="Body">The table gadget event handler lets the end user resize the columns and change their order. If there is more than one table gadget connected to the same data source, resizing a column in one of them will also resize the column in the others (by default). This is because the size and order of columns are stored in the table object of the data source and the data source is shared by the table gadgets.</div><div id="ww1008494" class="Body">The table gadget supports a special mode in which column size, visibility, and order are local to the table gadget itself and independent of other table gadgets connected to the same data source. The <span class="code">setColumnsGeometryLocal</span> member function can be used to activate this mode. See <a href="../Options/hintandtip.08.10.html#ww998379" title="Setting the Table Look">Setting the Table Look</a>.</div><div id="ww1008499" class="Body">Note that when column geometry is local, the index of a column can be different in the table gadget and the underlying table. The <span class="code">getRealColno</span> and <span class="code">getVisualColno</span> member functions can be used to convert a column index between the table gadget order and the underlying table object order.</div><div id="ww1008503" class="Heading3"><span></span>Cell Editor</div><div id="ww1008504" class="Body">Table gadget cells can be edited with editors that are managed by the table gadget. Each column in a table gadget has an editor. By default, a table gadget creates the editor for each column depending on the column data type and mapping.</div><div id="ww1008506" class="Body">For columns with a foreign column, the table gadget creates an <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliTableComboBox.html">IliTableComboBox</a></span>. For other columns, it creates an <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliEntryField.html">IliEntryField</a></span>.</div><div class="ww_skin_page_overflow"><div id="ww1008521" class="Startfigure"> <img class="Default" src="../Options/images/datasource.06.12.2.png" width="100%" style="display: block; left: 0.0pt; max-height: 162px; max-width: 491px; top: 0.0pt" alt="" /></div></div><div id="ww1008522" class="Caption">Different Types of Editors within a Table Gadget</div><div id="ww1008524" class="Body">The <span class="code">setColumnEditor</span> can be used to define a custom editor for a given column.</div><div id="ww1008525" class="Heading3"><span></span>Customizing a Table Gadget</div><div id="ww1008527" class="Body">Table gadgets can be customized with callbacks.</div><div id="ww1008529" class="Body">The <span class="code">GetCellPalette</span> callback can be used to change the foreground and background colors, and the font, cell by cell.</div><div id="ww1008530" class="Body">Here is an example:</div><div id="ww1008531" class="NormalCode">void ILVCALLBACK MyGetCellPalette(IlvGraphic* g, IlAny) {</div><div id="ww1008532" class="NormalCode">   IliTableGadget* tg = (IliTableGadget*)g;</div><div id="ww1008533" class="NormalCode">   IliCellPaletteStruct* cell = tg-&gt;getCellPaletteStruct();</div><div id="ww1008534" class="NormalCode">   if (cell-&gt;getRowno() == 3 &amp;&amp; cell-&gt;getTableColno() == 2) {</div><div id="ww1008535" class="NormalCode">   // Change the background color of cell(3,2).</div><div id="ww1008536" class="NormalCode">   cell-&gt;setFillPalette(tg-&gt;getDisplay()-&gt;getPalette("Highlight"));</div><div id="ww1008537" class="NormalCode">}</div><div id="ww1008538" class="NormalCode">&nbsp;</div><div id="ww1008539" class="NormalCode">int main() {</div><div id="ww1008540" class="NormalCode">   IliTableGadget* tg;</div><div id="ww1008541" class="NormalCode">   ...</div><div id="ww1008542" class="NormalCode">   tg-&gt;setCallback(IliTableGadget::GetCellPaletteSymbol(),</div><div id="ww1008543" class="NormalCode">                   MyGetCellPalette);</div><div id="ww1008544" class="NormalCode">   ...</div><div id="ww1008545" class="LastNormalCode">}</div><div id="ww1008547" class="Body">Note that colors defined through a <span class="code">GetCellPalette</span> callback are dynamic. The table gadget does not keep a record of the colors for a cell. Instead, it calls the <span class="code">GetCellPalette</span> callback each time it needs to draw the cell.</div><div id="ww1008548" class="Body">Note that another technique is available to define colors on a row, a column, or a cell basis. See <a href="../Options/tables.05.25.html#ww1002827" title="Table Properties">Table Properties</a> for more information.</div><div id="ww1008551" class="Body">The <span class="code">DrawCell</span> callback can be used to provide a custom draw procedure for some of the cells in a table gadget. Here is an example:</div><div id="ww1008552" class="NormalCode">void ILVCALLBACK MyDrawCell(IlvGraphic* g, IlAny) {</div><div id="ww1008553" class="NormalCode">   IliTableGadget* tg = (IliTableGadget*)g;</div><div id="ww1008554" class="NormalCode">   IliDrawCellStruct* cell = tg-&gt;getDrawCellStruct();</div><div id="ww1008555" class="NormalCode">   if (cell-&gt;tblColno == 2) {</div><div id="ww1008556" class="NormalCode">      // Draw cells in column 2.</div><div id="ww1008557" class="NormalCode">      IlvDisplay* dpy = tg-&gt;getDisplay();</div><div id="ww1008558" class="NormalCode">      IlvPalette* pal = dpy-&gt;defaultPalette();</div><div id="ww1008559" class="NormalCode">      IlvInt value;</div><div id="ww1008560" class="NormalCode">&nbsp;</div><div id="ww1008561" class="NormalCode">      //---- compute the position gauge ----</div><div id="ww1008562" class="NormalCode">      value = tg-&gt;at(cell-&gt;rowno, cell-&gt;tblColno).asInteger();</div><div id="ww1008563" class="NormalCode">      value = (value &gt; 100L) ? 100L : value;</div><div id="ww1008564" class="NormalCode">      value = (value &lt; 0L) ? 0L : value;</div><div id="ww1008565" class="NormalCode">      value = (cell-&gt;bbox.w() * value) / 100L;</div><div id="ww1008566" class="NormalCode">&nbsp;</div><div id="ww1008567" class="NormalCode">      // Draw the cell.</div><div id="ww1008568" class="NormalCode">      IlvRect rect;</div><div id="ww1008569" class="NormalCode">      rect.x(cell-&gt;bbox.x());</div><div id="ww1008570" class="NormalCode">      rect.w((IlvDim)value);</div><div id="ww1008571" class="NormalCode">      rect.y(cell-&gt;bbox.y()+2);</div><div id="ww1008572" class="NormalCode">      rect.h(cell-&gt;bbox.h()-4);</div><div id="ww1008573" class="NormalCode">      dpy-&gt;fillRectangle(cell-&gt;dst, pal, rect);</div><div id="ww1008574" class="NormalCode">   }</div><div id="ww1008575" class="NormalCode">   else</div><div id="ww1008576" class="NormalCode">      tg-&gt;defaultDrawCell();</div><div id="ww1008577" class="NormalCode">}</div><div id="ww1008578" class="NormalCode">&nbsp;</div><div id="ww1008579" class="NormalCode">int main() {</div><div id="ww1008580" class="NormalCode">   IliTableGadget* tg;</div><div id="ww1008581" class="NormalCode">   ...</div><div id="ww1008582" class="NormalCode">   tg-&gt;setCallback(IliTableGadget::DrawCellSymbol(),</div><div id="ww1008583" class="NormalCode">                   MyDrawCell);</div><div id="ww1008584" class="NormalCode">   ...</div><div id="ww1008585" class="LastNormalCode">}</div><div id="ww1008587" class="Heading3"><span></span>Customizing the Column Editor of a Table Gadget with a Toggle</div><div id="ww1008588" class="Body">You can change the column editor of a table gadget. For example, columns with a data type like Boolean, can replace the Yes/No combo box by a toggle without a label (class <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliSimpleToggle.html">IliSimpleToggle</a></span>).</div><div id="ww1008589" class="NormalCode">// In the header file:</div><div id="ww1008590" class="NormalCode">#include &lt;inform/gadgets/dbsimtog.h&gt;</div><div id="ww1008591" class="NormalCode">&nbsp;</div><div id="ww1008592" class="NormalCode">class MyPanel:</div><div id="ww1008593" class="NormalCode">public IlvGadgetContainer { </div><div id="ww1008594" class="NormalCode">...</div><div id="ww1008595" class="NormalCode">protected:</div><div id="ww1008596" class="NormalCode">IliSimpleToggle* _toggle;</div><div id="ww1008597" class="NormalCode">...</div><div id="ww1008598" class="NormalCode">};</div><div id="ww1008599" class="NormalCode">// In the source file:</div><div id="ww1008600" class="NormalCode">MyPanel::MyPanel(...):IlvGadgetContainer(...) {</div><div id="ww1008601" class="NormalCode">  ...</div><div id="ww1008602" class="NormalCode">     _toggle = new IliSimpleToggle(getDisplay(), IlvPoint(0,0));</div><div id="ww1008603" class="NormalCode">     IliTableGadget*</div><div id="ww1009399" class="NormalCode">                  tbl=(IliTableGadget*)getObject(“tableGadgetName”);</div><div id="ww1008604" class="NormalCode">     tbl-&gt;setColumnEditor(_toggle);</div><div id="ww1021046" class="NormalCode">...</div><div id="ww1021047" class="Code" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: &quot;Microsoft Sans Serif&quot;; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">}</span></div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1021050" class="Note"><span class="flag">Note:&nbsp;</span>If you work under Windows 95, Windows NT 4, or Motif, you should change the column background color (do not keep white) to see the toggle relief.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>