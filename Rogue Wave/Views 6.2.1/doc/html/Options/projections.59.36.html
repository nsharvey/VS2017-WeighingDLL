<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Getting Map Information</title><link rel="Prev" href="projections.59.35.html" title="Previous" /><link rel="Next" href="projections.59.37.html" title="Next" /><link rel="StyleSheet" href="css/projections.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/projections_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/projections.59.36.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pvWDR3DU7kpnXV1pZ_002fXH_002fVA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/projections.59.36.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/docfrontcover.html#wwconnect_header">Maps</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/projections.59.01.html#wwconnect_header">Map Projections</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/projections.59.33.html#wwconnect_header">Adding Graphic Objects on Top of an Imported Map</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Getting Map Information</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1013850" class="Heading2"><span></span>Getting Map Information</div><div id="ww1013818" class="Body">In Rogue Wave®&nbsp;Views Maps, map information can be attached to managers using the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapInfo.html">IlvMapInfo</a></span> class. This class encapsulates the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvProjection.html">IlvProjection</a></span> and <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapAdapter.html">IlvMapAdapter</a></span> to convert coordinates between map coordinates and manager coordinates.</div><div id="ww1014074" class="Body">To get the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapInfo.html">IlvMapInfo</a></span> that is attached to an <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span>, you use the static function <span class="code">IlvMapInfo::Get</span>, as in our sample:</div><div id="ww1014080" class="NormalCode">    _mapInfo = IlvMapInfo::Get(manager);</div><div id="ww1013819" class="Subhead"><span></span>Adding Cities</div><div id="ww1013821" class="Body">The <span class="code">addCities</span> method adds a number of cities on top of the imported map of the United States:</div><div id="ww1014090" class="NormalCode">void</div><div id="ww1014092" class="NormalCode">SimpleMapViewer::addCities()</div><div id="ww1014093" class="NormalCode">{</div><div id="ww1014094" class="NormalCode">    addCity("Washington", "39D11’N", "76D51W");</div><div id="ww1014095" class="NormalCode">    addCity("New York", "40D59’N", "73D39’W");</div><div id="ww1014096" class="NormalCode">    addCity("Miami", "25D58’N", "80D02’W");</div><div id="ww1014097" class="NormalCode">    addCity("San Francisco", "37D44’N", "122D20’W");</div><div id="ww1014098" class="NormalCode">    addCity("Seattle", "47D51’N", "122D01’W");</div><div id="ww1014099" class="NormalCode">    addCity("Denvers", "39D50’N", "104D53’W");</div><div id="ww1014100" class="LastNormalCode">}</div><div id="ww1014101" class="Body">The <span class="code">addCity</span> method first computes the latitude and the longitude of the cities to be displayed:</div><div id="ww1014103" class="NormalCode">void</div><div id="ww1014106" class="NormalCode">SimpleMapViewer::addCity(const char* cityName,</div><div id="ww1014125" class="NormalCode">                         const char* latString,</div><div id="ww1014130" class="NormalCode">                         const char* longString)</div><div id="ww1014109" class="NormalCode">  {</div><div id="ww1014110" class="NormalCode">      double latitude;</div><div id="ww1014111" class="NormalCode">      IlvMaps::DMSToRadian(latString, latitude);</div><div id="ww1014112" class="NormalCode">      </div><div id="ww1014113" class="NormalCode">      double longitude;</div><div id="ww1014114" class="NormalCode">      IlvMaps::DMSToRadian(longString, longitude);</div><div id="ww1014115" class="NormalCode">      </div><div id="ww1014116" class="LastNormalCode">      IlvCoordinate c(longitude, latitude);</div><div id="ww1014131" class="Body">After the geographic coordinates of the city is computed, this method uses the <span class="code">_mapInfo</span> of our map to convert these coordinates to manager coordinates. This conversion effectively converts the geographic coordinates to the cartesian coordinates of the projection, then convert these coordinates into manager units. Note that the conversion status is to be tested, as coordinate conversion in projection coordinate system can lead to errors:</div><div id="ww1014133" class="NormalCode">     IlvMapsError status = IlvMaps::NoError();</div><div id="ww1014135" class="NormalCode">     IlvPoint p;</div><div id="ww1014136" class="LastNormalCode">     status = _mapInfo-&gt;forward(c, p);</div><div id="ww1014138" class="Body">Once the coordinates are converted and that no error occurs in the conversion process, we add the city as a red marker:</div><div id="ww1014139" class="NormalCode">   if (status == IlvMaps::NoError()) {</div><div id="ww1014154" class="NormalCode">       IlvMarker* marker = new IlvMarker(_container-&gt;getDisplay(),</div><div id="ww1014157" class="NormalCode">                                         p,</div><div id="ww1014160" class="NormalCode">                                         IlvMarkerFilledDiamond);</div><div id="ww1014163" class="NormalCode">       marker-&gt;setSize(4);</div><div id="ww1014166" class="NormalCode">       marker-&gt;setForeground(_container-&gt;getDisplay()-&gt;getColor("red"));</div><div id="ww1014169" class="NormalCode">       IlvManager* manager = _managerRectangle-&gt;getManager();</div><div id="ww1014172" class="NormalCode">       manager-&gt;addObject(marker, 1, IlFalse);</div><div id="ww1014175" class="NormalCode">       marker-&gt;setName(cityName);</div><div id="ww1014149" class="LastNormalCode">   }</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>