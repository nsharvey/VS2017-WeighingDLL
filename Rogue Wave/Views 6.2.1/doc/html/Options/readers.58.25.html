<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Object Model Classes</title><link rel="Prev" href="readers.58.24.html" title="Previous" /><link rel="Next" href="readers.58.26.html" title="Next" /><link rel="StyleSheet" href="css/readers.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/readers_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/readers.58.25.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pRhfiZP3H0LKOQmq3FqL1tg" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/readers.58.25.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/docfrontcover.html#wwconnect_header">Maps</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/readers.58.01.html#wwconnect_header">Predefined Readers</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/readers.58.23.html#wwconnect_header">The Oracle Spatial Features</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Object Model Classes</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1003315" class="Heading2"><span></span>Object Model Classes</div><div id="ww1005398" class="Body">This section covers the following topics:</div><div id="ww1005399" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Options/readers.58.25.html#ww1003317" title="Object Model Classes">Classes for Reading Data from an Oracle Spatial Database</a></div><div id="ww1005404" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Options/readers.58.25.html#ww1008082" title="Object Model Classes">Class for Writing Data to an Oracle Spatial Database</a></div><div id="ww1003317" class="Heading3"><span></span>Classes for Reading Data from an Oracle Spatial Database</div><div id="ww1004340" class="Body">The reader classes for the Oracle SDO object model are:</div><div id="ww1004341" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOFeatureIterator.html">IlvObjectSDOFeatureIterator</a></span> </div><div id="ww1009395" class="IndentedL1">To convert Oracle Spatial layer data into <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> objects.</div><div id="ww1004342" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span> </div><div id="ww1009396" class="IndentedL1">To implement load-on-demand for object Oracle Spatial data.</div><div id="ww1004343" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOTileLoader.html">IlvSDOTileLoader</a></span> </div><div id="ww1009397" class="IndentedL1">Abstract class to define Oracle queries for the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span>. A subclass, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultObjectSDOTileLoader.html">IlvDefaultObjectSDOTileLoader</a></span>, which has some optimizations, is used by <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span>.</div><div id="ww1003318" class="Heading4">IlvObjectSDOFeatureIterator</div><div id="ww1003565" class="Body">This class reads data from the result of an SQL query to a relational Oracle Spatial layer and converts it into <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> objects. Rogue Wave&nbsp;Views Maps applications can handle Oracle Spatial data using this class in a transparent manner. The following example of C++ code performs a query (using Rogue Wave&nbsp;DB&nbsp;Link), loading data from an Oracle Spatial layer named ROADS:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1013110" class="CodeInTable">&nbsp;</div><div id="ww1013111" class="CodeInTable">IlString query = IlString("SELECT * FROM ROADS");  </div><div id="ww1013112" class="CodeInTable">IldDbms* myDbms = IldNewDbms("oracle81", "scott/tiger@myDomain");</div><div id="ww1013113" class="CodeInTable">IlvObjectSDOFeatureIterator* iterator =</div><div id="ww1013114" class="CodeInTable">          new IlvObjectSDOFeatureIterator(myDbms,</div><div id="ww1013115" class="CodeInTable">                                          "SELECT * FROM ROADS",</div><div id="ww1013116" class="CodeInTable">                                          // the name of the geometries column</div><div id="ww1013117" class="CodeInTable">                                          "Geometry",</div><div id="ww1013118" class="CodeInTable">                                          // no Key ID</div><div id="ww1013119" class="CodeInTable">                                          0,</div><div id="ww1013120" class="CodeInTable">                                          // the name of the x ordinates column</div><div id="ww1013121" class="CodeInTable">                                          "X",</div><div id="ww1013122" class="CodeInTable">                                          // the name of the y ordinates column</div><div id="ww1013123" class="CodeInTable">                                          "Y"</div><div id="ww1013124" class="CodeInTable">                                          );</div><div id="ww1013125" class="CodeInTable">    </div><div id="ww1013019" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww1004980" class="Body">The result set of any query to an Oracle Spatial layer can be used to initialize an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOFeatureIterator.html">IlvObjectSDOFeatureIterator</a></span>, but the column containing the geometry must be in the result set.</div><div id="ww1003325" class="Body">The features returned by this iterator have attributes and can be retrieved through the method <span class="MethodName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html#ab89b7fbdfe0053e22964cf8a8f08c7db">getAttributes</a></span>(). In fact, any column of the layer that can be interpreted as a String, a float number, or an integer number is translated into attributes and set in the returned map feature. Moreover, if you instantiate the feature iterator with an ID name, the value of this column is set to the identifier of each map feature and the identifiers of these features can be used to retrieve additional attributes (if any) from the database. See the method <span class="MethodName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html#afe2892a3e70f1033dc8bdc7ec7b5564e">getId</a></span>(). This ID is used in the library for optimization reasons. If you give an ID name when instantiating the iterator, a “big” geometry that covers more than one tile will be loaded just once. If you ignore the ID name, the <span class="code">load</span> method of each covered tile will fully load the “big” geometry.</div><div id="ww1003326" class="Heading4">IlvObjectSDOLayer</div><div id="ww1003473" class="Body">This class implements load-on-demand for an object Oracle Spatial data source. The default implementation takes an Oracle Spatial layer for which a spatial indexation has been performed and reads its content.</div><div id="ww1003328" class="Body">The following example creates an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span> on an Oracle Spatial layer named <span class="code">ROADS</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1013145" class="Body">IldDbms* myDbms = IldNewDbms("oracle81", "scott/tiger@myDomain");</div><div id="ww1013146" class="Body"> // You should create an adapter that fits your data.</div><div id="ww1013147" class="Body">IlvMapAdapter* adapter = new IlvMapAdapter(0.5); </div><div id="ww1013148" class="Body">IlvObjectSDOLayer* layer = </div><div id="ww1013149" class="Body">     new IlvObjectSDOLayer(adapter, </div><div id="ww1013150" class="Body">                           myDbms,</div><div id="ww1013151" class="Body">                           // The name of the SDO layer</div><div id="ww1013152" class="Body">                           "ROADS".</div><div id="ww1013153" class="Body">                           // Assume that the layer has only one</div><div id="ww1013154" class="Body">                           // geometry column.</div><div id="ww1013155" class="Body">                           0,</div><div id="ww1013156" class="Body">                           // Width of a tile in the database </div><div id="ww1013157" class="Body">                           // coordinate system.</div><div id="ww1013158" class="Body">                           1500,</div><div id="ww1013159" class="Body">                           // height of a tile in the database</div><div id="ww1013160" class="Body">                           // coordinate system.</div><div id="ww1013161" class="Body">                           1500,</div><div id="ww1013162" class="Body">                           // The name of the x-ordinates column</div><div id="ww1013163" class="Body">                           "X".</div><div id="ww1013164" class="Body">                           // The name of the y-ordinates column</div><div id="ww1013165" class="Body">                           "Y".</div><div id="ww1013166" class="Body">                           );</div><div id="ww1013167" class="Body">manager-&gt;addLayer(layer);</div><div id="ww1012642" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww1003687" class="Body">You can also build a layer by ignoring the x and y column names. The default values are <span class="code">0</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1005065" class="CodeInTable">IlvObjectSDOLayer* layer = </div><div id="ww1005063" class="CodeInTable">     new IlvObjectSDOLayer(adapter, myDbms, "ROADS", 0, 1500, 1500);</div></td></tr></table></div><div id="ww1003709" class="Body">This way, the layer assumes that in the metadata table (<span class="code">SDO_GEOM_METADATA </span>in Oracle 8.1.5 or <span class="code">USER_SDO_GEOM_METADATA</span> in Oracle 8.1.6), the entry corresponding to the ROADS layer has the following shape:</div><div id="ww1003712" class="Body" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; text-transform: none; vertical-align: baseline"><span class="code">‘ROADS’, ‘GEOMETRY’, SDO_DIM_ARRAY(SDO_DIM_ELEMENT(’X’, -180, 180, 0), SDO_DIM_ELEMENT(’Y’, -90, 90, 0));</span></div><div id="ww1003721" class="Body">The X element is assumed to be the first <span class="code">SDO_DIM_ELEMENT</span>, and the Y element is assumed to be the second one.</div><div id="ww1003708" class="Heading4">IlvDefaultObjectSDOTileLoader</div><div id="ww1003332" class="Body">This class is a subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOTileLoader.html">IlvSDOTileLoader</a></span> and is used by the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span>. It has some optimizations. For example, the method <span class="code">setTileGroupingCount()</span> allows you to set the number of tiles that will be grouped in one unique query to the database. In fact each tile corresponds to a Spatial query, and if you have an average of <span class="code">n</span> tiles to load each time you want to load on demand, you should use <span class="code">setTileGroupingCount(n)</span>, where all the <span class="code">n</span> queries will be grouped into one unique query that will be sent to the database once.</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1005075" class="Note"><span class="flag">Note:&nbsp;</span>If you want to handle some special operations on each <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> retrieved in load-on-demand with the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOLayer.html">IlvObjectSDOLayer</a></span> layer, you have to subclass the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultObjectSDOTileLoader.html">IlvDefaultObjectSDOTileLoader</a></span> in order to override the <span class="code">getFeatureIterator</span> method. In this method, you have to return an instance of a subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOFeatureIterator.html">IlvObjectSDOFeatureIterator</a></span> where you have overridden the <span class="code">getNextFeature</span> method (inside which you can perform your specific operations on each <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> returned by the layer). Finally, you have to set your subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultObjectSDOTileLoader.html">IlvDefaultObjectSDOTileLoader</a></span> as the tile loader of the layer.</div></td></tr></table></div><div id="ww1008084" class="Body">Another interesting method of this class is the <span class="code">setRequestParameters()</span> method.</div><div id="ww1008085" class="Body">This method allows you to set the spatial operator used to query the layer. The default operator is <span class="code">SDO_FILTER</span>. </div><div id="ww1008089" class="Body"><a href="../Options/readers.58.25.html#ww1008105" title="Object Model Classes">Tiles</a> shows a Spatial layer using a fixed tiling of level 2. The red rectangle is the area queried by the tile loader. If the <span class="code">SDO_FILTER</span> operator is used (default case), all the geometries belonging to the Oracle Spatial tiles that intersect with the red rectangle will fit the request. In the case of <a href="../Options/readers.58.25.html#ww1008105" title="Object Model Classes">Tiles</a>, all the geometries belonging to tiles (2,2), (2,3), (3,2), and (3,3), for example the line, the point, the triangle, the circle, and the rectangle will be retrieved. </div><div id="ww1008093" class="Body">You may not want to retrieve the geometries that do not explicitly intersect with the red rectangle (for example, the circle and the rectangle geometries here). To do this, you can use another spatial operator in Oracle which is <span class="code">SDO_RELATE</span>. This operator is to be used with the following parameters: <span class="code">"querytype=window mask=anyinteract"</span>. In this way, all the retrieved geometries are the ones that intersect with the red rectangle, for example the point, the triangle, and the line in <a href="../Options/readers.58.25.html#ww1008105" title="Object Model Classes">Tiles</a>. </div><div id="ww1008099" class="Body">Finally, note that the <span class="code">SDO_RELATE</span> Spatial operator is slower than the <span class="code">SDO_FILTER</span> operator.</div><div class="ww_skin_page_overflow"><div id="ww1008103" class="Startfigure"><img class="Default" src="../Options/images/tiles.gif" width="100%" style="display: block; left: 0.0pt; max-height: 341px; max-width: 353px; top: 0.0pt" alt="" /></div></div><div id="ww1008105" class="Caption">Tiles</div><div id="ww1008082" class="Heading3"><span></span>Class for Writing Data to an Oracle Spatial Database</div><div id="ww1003334" class="Body">This section presents the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOWriter.html">IlvObjectSDOWriter</a></span> class, which allows you to write map features into an Object Oracle Spatial database.</div><div id="ww1003335" class="Heading4">IlvObjectSDOWriter</div><div id="ww1008144" class="Body">The class <span class="code">IlvObjectSDOWriter</span> can write any <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeatureIterator.html">IlvMapFeatureIterator</a></span> whose features have a geometry supported by Oracle Spatial 8i (vectorial geometries) and write them to the database as in the following example:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008147" class="CodeInTable">IldDbms* myDbms = IldNewDbms(“oracle8”, “scott/tiger@myDomain”);</div><div id="ww1008148" class="CodeInTable">IlvObjectSDOWriter* writer = </div><div id="ww1008149" class="CodeInTable">    new IlvObjectSDOWriter(myDbms, “MyLayer”, “GEOMETRY”, “X”, “Y”, IlTrue);</div><div id="ww1008150" class="CodeInTable">// Create a source feature iterator.</div><div id="ww1008151" class="CodeInTable">IlvShapeFileReader* reader = new IlvShapeFileReader(“foo.shp”, 0);</div><div id="ww1008152" class="CodeInTable">// Dump its content to the Oracle layer.</div><div id="ww1008153" class="CodeInTable">IlInt count;</div><div id="ww1008154" class="CodeInTable">writer-&gt;writeFeatureIterator(reader, count); // calls close()</div><div id="ww1008156" class="CodeInTable">&nbsp;</div></td></tr></table></div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1008159" class="Note"><span class="flag">Note:&nbsp;</span>In the case of the Oracle Spatial Object model, some auxiliary tables, like the user metadata table, need to be updated. It is very important to call the method <span class="code">IlvObjectSDOWriter::close()</span> once the data has been written through the <span class="code">write()</span> method, so that the database is kept up-to-date.</div></td></tr></table></div><div id="ww1008161" class="Body">The write method of the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvObjectSDOWriter.html">IlvObjectSDOWriter</a></span> can also <span class="emphasis">write the attributes</span><span style="font-style: italic"> </span>of the features. </div><div id="ww1003753" class="Body">The method <span class="code">IlvObjectSDOWriter::writeFeature</span> (<span class="code">IlvMapFeature</span>*<span class="code"> feature</span>, <span class="code">IlvBoolean</span> <span class="code">saveAttributes</span>) has a second argument that can be set to <span class="code">IlTrue</span> in order to save the attributes of the first argument, the map feature. This requires that the map feature has an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvFeatureAttributeInfo.html">IlvFeatureAttributeInfo</a></span> correctly set, describing the attributes that match the SDO layer column names. This also requires that map feature has an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvFeatureAttributeProperty.html">IlvFeatureAttributeProperty</a></span> that fits its <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvFeatureAttributeInfo.html">IlvFeatureAttributeInfo</a></span> and has correct values. For example, if you have an SDO layer called <span class="code">ROADS</span> that has the following description in the database: </div><div class="ww_skin_page_overflow"><table class="NoBorder" style="width: 325.9842519685045pt" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: middle; width: 113.385826771654pt"><div id="ww1005769" class="Cellheading">Name</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: middle; width: 70.8661417322835pt"><div id="ww1005771" class="Cellheading">Null?</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: middle; width: 141.732283464567pt"><div id="ww1005773" class="Cellheading">Type</div></td></tr><tr><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005781" class="Cellbody">GEOMETRY</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005783" class="Cellbody">&nbsp;</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005785" class="Cellbody">MDSYS.SDO_GEOMETRY</div></td></tr><tr><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005787" class="Cellbody">TYPE_DESC</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005789" class="Cellbody">&nbsp;</div></td><td style="padding-bottom: 2pt; padding-left: 3pt; padding-right: 3pt; padding-top: 4pt; vertical-align: top"><div id="ww1005791" class="Cellbody">VARCHAR2(512)</div></td></tr></table></div><div id="ww1005732" class="Body">you can write a map feature into the database this way:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1005703" class="CodeInTable">IldDbms* myDbms = IldNewDbms("oracle81", "scott/tiger@myDomain");</div><div id="ww1006156" class="CodeInTable">IlvObjectSDOWriter* myWriter =</div><div id="ww1006157" class="CodeInTable">    new IlvObjectSDOWriter(myDbms, "ROADS", "GEOMETRY", "X", "Y", IlTrue);</div><div id="ww1006158" class="CodeInTable">IlvMapFeature* feature = new IlvMapFeature();</div><div id="ww1006159" class="CodeInTable">// Construction of the IlvFeatureAttributeInfo: it can be done just once.</div><div id="ww1006160" class="CodeInTable">IlvMapClassInfo** attributeClasses = new IlvMapClassInfo*[1];</div><div id="ww1006161" class="CodeInTable">IlvBoolean* nullable = new IlvBoolean[1];</div><div id="ww1006162" class="CodeInTable">nullable[0] = IlTrueIlTrue;</div><div id="ww1006163" class="CodeInTable">attributeClasses[0] = IlvStringAttribute::ClassInfo();</div><div id="ww1006164" class="CodeInTable">char** names = new char*[1];</div><div id="ww1006165" class="CodeInTable">names[0] = new char[10];</div><div id="ww1006166" class="CodeInTable">//Exactly the same name as the layer column name.</div><div id="ww1006167" class="CodeInTable">strcpy(names[0], "TYPE_DESC"); </div><div id="ww1006168" class="CodeInTable">IlvFeatureAttributeInfo* info =</div><div id="ww1006169" class="CodeInTable">    new IlvFeatureAttributeInfo(1, names, attributeClasses, nullable);</div><div id="ww1006170" class="CodeInTable">&nbsp;</div><div id="ww1006171" class="CodeInTable">// The writing itself.</div><div id="ww1006172" class="CodeInTable">IlvFeatureAttribute** attributes = new IlvFeatureAttribute*[1];</div><div id="ww1006173" class="CodeInTable">attributes[0] = new IlvStringAttribute("MY FOO TYPE");</div><div id="ww1006174" class="CodeInTable">IlvMapsError error;</div><div id="ww1006175" class="CodeInTable">IlvFeatureAttributeProperty* prop =</div><div id="ww1006176" class="CodeInTable">    new IlvFeatureAttributeProperty(info, attributes, error);</div><div id="ww1006177" class="CodeInTable">feature-&gt;setAttributeInfo(info);</div><div id="ww1006178" class="CodeInTable">feature-&gt;setAttributes(prop);</div><div id="ww1006179" class="CodeInTable">if (error == IlvMaps::NoError())</div><div id="ww1006180" class="CodeInTable">    error = myWriter-&gt;writeFeature(feature, IlTrue);</div></td></tr></table></div><div id="ww1005733" class="Body">The writer can update rows in the SDO layer. This is based on a KEY mechanism where the row(s) having the value of the given key will be updated. The update is executed by means of the following methods:</div><div id="ww1005739" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">updateFeatureAttributes</span> (<span class="code">IlvFeatureAttributeProperty</span>*<span class="code"> attributes</span>, <span class="code">IlUInt keyPos</span>) - based on an attribute property where you have to give the position of the key in the attributes list and you can update more than one column at the same time.</div><div id="ww1005742" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">updateFeatureAttribute</span> (<span class="code">const char* keyColumnName</span>, <span class="code">IlvFeatureAttribute</span>* <span class="code">keyAttribute</span>, <span class="code">const char*</span> <span class="code">attributeColumnName</span>, <span class="code">IlvFeatureAttribute</span>* <span class="code">attributeToUpdate</span>) - where you update just one column (the new value is the <span class="code">attributeToUpdate</span> passed as argument) given a KEY attribute.</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1005736" class="Note"><span class="flag">Note:&nbsp;</span>All the subclasses of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapGeometry.html">IlvMapGeometry</a></span> except <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapText.html">IlvMapText</a></span>, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapImage.html">IlvMapImage</a></span>, and <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapRaster.html">IlvMapRaster</a></span> are supported by the object writer.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>