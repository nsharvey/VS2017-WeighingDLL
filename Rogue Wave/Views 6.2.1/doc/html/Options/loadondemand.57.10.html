<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Managing Errors and Load-on-Demand Events</title><link rel="Prev" href="loadondemand.57.09.html" title="Previous" /><link rel="Next" href="loadondemand.57.11.html" title="Next" /><link rel="StyleSheet" href="css/loadondemand.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/loadondemand_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/loadondemand.57.10.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="psq8XWF94eQg2Gwk4GD1trQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/loadondemand.57.10.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/docfrontcover.html#wwconnect_header">Maps</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/loadondemand.57.01.html#wwconnect_header">Using Load-On-Demand</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Managing Errors and Load-on-Demand Events</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww998477" class="Heading1"><span></span>Managing Errors and Load-on-Demand Events</div><div id="ww998478" class="Body">The load-on-demand mechanism might generate errors when the map cannot be entirely loaded due to memory problems, absence of data, loss of connection to a server, and so on. Applications must catch these errors to inform the user that the map being viewed is not complete.</div><div id="ww1002912" class="Body">To be notified of these events, and any other events related to load-on-demand, you can set an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvTileListener.html">IlvTileListener</a></span> to an instance of the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvTileController.html">IlvTileController</a></span> class. This listener is notified of changes to the tiles and its <span class="code">tileChanged</span> method is called each time the status of a tile has changed. The events related to the cache mechanism are available by subtyping the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvTileCache.html">IlvTileCache</a></span> class:  </div><div id="ww1002915" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void IlvTileCache::tileAboutToLoad(IlvTile* tile)</span></div><div id="ww1002916" class="IndentedL1">Called when the specified <span class="code">tile</span> is about to be loaded.</div><div id="ww1002118" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void IlvTileCache::tileCached(IlvTile* tile)</span></div><div id="ww1002919" class="IndentedL1">Called when the specified <span class="code">tile</span> is to be inserted in the cache.</div><div id="ww1002123" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void IlvTileCache::tileRetrieved(IlvTile* tile)</span></div><div id="ww1002920" class="IndentedL1">Called when the specified tile is to be removed from the cache.</div><div id="ww998487" class="Body">The following example displays all the events related to load-on-demand:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007189" class="CodeInTable">&nbsp;</div><div id="ww1007190" class="CodeInTable">static const char*</div><div id="ww1007191" class="CodeInTable">toString(IlvTileStatus status) {</div><div id="ww1007192" class="CodeInTable">    switch(status) {</div><div id="ww1007193" class="CodeInTable">    case IlvTileEmpty:</div><div id="ww1007194" class="CodeInTable">        return "IlvTileEmpty";</div><div id="ww1007195" class="CodeInTable">    case IlvTileLocked:</div><div id="ww1007196" class="CodeInTable">        return "IlvTileLocked";</div><div id="ww1007197" class="CodeInTable">    case IlvTileCached:</div><div id="ww1007198" class="CodeInTable">        return "IlvTileCached";</div><div id="ww1007199" class="CodeInTable">    case IlvTileDeleted:</div><div id="ww1007200" class="CodeInTable">        return "IlvTileDeleted";</div><div id="ww1007201" class="CodeInTable">    }</div><div id="ww1007202" class="CodeInTable">}</div><div id="ww1007203" class="CodeInTable">&nbsp;</div><div id="ww1007204" class="CodeInTable">void</div><div id="ww1007205" class="CodeInTable">Listener::tileChanged(IlvTile* tile,</div><div id="ww1007206" class="CodeInTable">                          IlvTileStatus oldStatus,</div><div id="ww1007207" class="CodeInTable">                          IlvTileStatus newStatus)</div><div id="ww1007208" class="CodeInTable">{</div><div id="ww1007209" class="CodeInTable">    IlvPrint("tile %d %d status changed from %s to %s",</div><div id="ww1007210" class="CodeInTable">             tile-&gt;getRow(), tile-&gt;getColumn(),</div><div id="ww1007211" class="CodeInTable">             toString(oldStatus),</div><div id="ww1007212" class="CodeInTable">             toString(newStatus));</div><div id="ww1007213" class="CodeInTable">}</div><div id="ww1007217" class="CodeInTable">&nbsp;</div><div id="ww1007218" class="CodeInTable">void</div><div id="ww1007219" class="CodeInTable">SimpleLod::listener()</div><div id="ww1007220" class="CodeInTable">{</div><div id="ww1007221" class="CodeInTable">    _listener = new Listener(_manager, _view);</div><div id="ww1007222" class="CodeInTable">    _tiledLayer-&gt;getTileController()-&gt;addTileListener(_listener);</div><div id="ww1007223" class="CodeInTable">}</div><div id="ww1006916" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww998491" class="Body">The different types of events sent to the tile listeners are the following:</div><div id="ww998492" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvTileEmpty</span><span style="font-family: Arial; font-size: 9.0pt">—</span>Initial status of the tile (the tile contains no objects).</div><div id="ww998493" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvTileLocked</span><span style="font-family: Arial; font-size: 9.0pt">—</span>Triggered when a tile has been loaded into memory.</div><div id="ww998494" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvTileCached</span><span style="font-family: Arial; font-size: 9.0pt">—</span>Triggered when a tile that is no longer being used is stored in the cache.</div><div id="ww998496" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvTileDeleted</span><span style="font-family: Arial; font-size: 9.0pt">—</span>Triggered when a tile is completely freed.</div><div id="ww1001990" class="Body">When an event in a view causes an action to be performed on a tile, the tile controller notifies the tile listener of the action. If this event triggers a series of transitional events, these are transmitted to the listener as a group. Therefore, modifying a scale factor can cause new tiles to be loaded and other tiles to be cached. Grouping events allows an action to be performed only when all the transitional events it causes are completed. The start of the event group is notified by the call of the following method <span class="MethodName"><a href="../RefMan/refcppmaps/classIlvTileListener.html#af06c5fe1905b3538665863bd5d05ea6f">beginGroupedNotification</a></span><span class="code"> </span>and the end of the event group notified by the call of the following method <span class="MethodName"><a href="../RefMan/refcppmaps/classIlvTileListener.html#a8ff468c908f865ae7543b648da55708a">endGroupedNotification</a></span><span class="code">.</span></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>