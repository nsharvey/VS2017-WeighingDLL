<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Using Listeners to Catch Data Changes</title><link rel="Prev" href="datahandling.39.6.html" title="Previous" /><link rel="Next" href="chartlayout.40.1.html" title="Next" /><link rel="StyleSheet" href="css/datahandling.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/datahandling_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/datahandling.39.7.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pN3YeugiDwMNoyH7hedPhh0Q" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/datahandling.39.7.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/chusrfrontcover.html#wwconnect_header">Charts</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/chusrpart2.html#ww145481">Using the Charts Library </a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/datahandling.39.1.html#wwconnect_header">Data Handling</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/datahandling.39.5.html#wwconnect_header">Modifying Data and Updating Charts  </a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Using Listeners to Catch Data Changes</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1014558" class="Heading2"><span></span>Using Listeners to Catch Data Changes</div><div id="ww1014560" class="Body">The listeners set on data catch modifications made to the data. Listeners are set at the level of the data sets and at the level of the chart data objects. For both types of listeners, a method is defined for each type of modification that can be made to the object on which the listener is set. The method corresponding to a given modification is called when the modification that has occurred is propagated to the listener (see <a href="../Options/datahandling.39.6.html#ww1014427" title="Updating Charts Automatically">Propagation of a Modification Made to a Data Set</a>).</div><div id="ww1014565" class="Heading3"><span></span>Listeners on Data Sets</div><div id="ww1014566" class="Body">Listeners set on data sets are instances of subclasses of the <span class="ClassName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html">IlvChartDataSetListener</a></span> class. The <span class="code">IlvChartDataSetListener</span> class is used to watch for all the modifications that can be made to a given data set. If you remember, these modifications include adding new data items, replacing existing data items, and removing data items (see <a href="../Options/datahandling.39.5.html#ww1014109" title="Modifying Data and Updating Charts">Modifications Made at the Data Set Level</a>). Methods corresponding to these types of modifications are defined in the <span class="code">IlvChartDataSetListener</span> class:</div><div id="ww1014577" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html#a58a4ff5c8ac72bef767847e324897fe2">dataPointAdded</a></span> is called when a new data item is added to the data set.</div><div id="ww1014583" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html#ae55f7f69abe7bdb51a805e8d9a3be99d">dataPointChanged</a></span> is called when an existing data item is changed in the data set.</div><div id="ww1014569" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html#a8a309d85209a7383bce4560cd960f492">dataPointRemoved</a></span> is called when a data item is removed from the data set.</div><div id="ww1014567" class="Heading3"><span></span>Listeners on Chart Data Objects </div><div id="ww1014588" class="Body">Listeners set on chart data objects are instances of subclasses of the <span class="code">IlvChartDataListener</span> class. The <span class="ClassName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html">IlvChartDataListener</a></span> class is used to listen to all the modifications that can be made to a given chart data object. These modifications include adding new data sets, changing existing data sets, and removing data sets (see <a href="../Options/datahandling.39.5.html#ww1015725" title="Modifying Data and Updating Charts">Modifications Made at the Chart Data Object Level</a>). Methods corresponding to these types of modifications are defined in the <span class="code">IlvChartDataListener</span> class:</div><div id="ww1014592" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#a6e346aa77b6f8e32dd50172e94f38e2a">dataSetAdded</a></span> is called when a new data set is added.</div><div id="ww1014593" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#a52be094e55ac4c6edcffed7321c67216">dataSetChanged</a></span> is called when an existing data set is changed.</div><div id="ww1014603" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#a3f6b26b194ad0688fb804d98829940d8">dataSetRemoved</a></span> is called when a data set is removed.</div><div id="ww1014617" class="Body">Since a chart data object handles data sets, the modifications made at the level of a data set are also reported at the level of the chart data object. The corresponding methods that are defined in the <span class="code">IlvChartDataListener</span> class are: </div><div id="ww1014595" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#af6adfdca2d600f252654ff236c35e77f">dataPointAdded</a></span> is called when a new data item is added to a data set.</div><div id="ww1018941" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#a599e3230097caf1c828d89f9d542cafd">dataPointChanged</a></span> is called when an existing data item is changed in a data set.</div><div id="ww1018943" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html#a57f49f93462f47549c54b690ced3a210">dataPointRemoved</a></span> is called when a data point is removed from a data set.</div><div id="ww1014589" class="Heading3"><span></span>Defining Your Own Listeners</div><div id="ww1016879" class="Body">You can define your own data listeners to perform specific tasks when certain types of modifications are made to a data set or to a chart data object. To do so, you need to perform these steps: </div><div id="ww1014625" class="Numbered1"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">1.	</span></span>Create a subclass of the <span class="ClassName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html">IlvChartDataSetListener</a></span> class (or the <span class="ClassName"><a href="../RefMan/refcppcharts/classIlvChartDataListener.html">IlvChartDataListener</a></span> class).</div><div id="ww1014626" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">2.	</span></span>Implement the specific tasks you want to be performed when some types of modifications are made by subclassing the corresponding methods. The methods corresponding to a given type of modification for the <span class="code">IlvChartDataSetListener</span> class can be found in <a href="../Options/datahandling.39.7.html#ww1014565" title="Using Listeners to Catch Data Changes">Listeners on Data Sets</a> and for the <span class="code">IlvChartDataListener</span> class in <a href="../Options/datahandling.39.7.html#ww1014567" title="Using Listeners to Catch Data Changes">Listeners on Chart Data Objects</a>.</div><div id="ww1014630" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">3.	</span></span>Add an instance of the created subclass to the data set (or to the chart data object).</div><div id="ww1014629" class="Heading3"><span></span>Example of a User-Defined Listener </div><div id="ww1016434" class="Body">We are now going to show you how to define a listener that performs specific tasks when new data items are added to a data set. We will use the Temperatures Chart again (see <a href="../Options/basics.38.07.html#ww1011082" title="Creating a Simple Cartesian Chart">Creating a Simple Cartesian Chart</a>).</div><div id="ww1014633" class="Body">In this example, we want the chart to indicate when temperatures for each data set fall outside of a given interval. We are going to add two cursors to the Temperatures Chart that indicate the minimum and maximum values of the interval. When a new temperature that is added to a data set is outside of this interval, a message will be printed on the standard output. To do this, we can define a specific listener (inherited from <span class="ClassName"><a href="../RefMan/refcppcharts/classIlvChartDataSetListener.html">IlvChartDataSetListener</a></span>) to be set on each temperatures data set. </div><div id="ww1014638" class="Body">The complete source code of this example can be found in the <span class="code">listener.cpp</span> file located in the <span class="code">$ILVHOME/samples/charts/userman/src</span> directory. The example shows only the part of the code that is specific to creating the dedicated listener.</div><div id="ww1014634" class="Heading4">Defining the TemperatureDataSetListener Class </div><div id="ww1014646" class="Body">The following code is used to declare the <span class="code">TemperatureDataSetListener</span> class:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1037238" class="CodeInTable">class TemperatureDataSetListener </div><div id="ww1037239" class="CodeInTable">    : public IlvChartDataSetListener </div><div id="ww1037240" class="CodeInTable">{</div><div id="ww1037241" class="CodeInTable">public:</div><div id="ww1037242" class="CodeInTable">    TemperatureDataSetListener(IlDouble min, </div><div id="ww1037243" class="CodeInTable">                               IlDouble max, </div><div id="ww1037244" class="CodeInTable">                               IlvChartGraphic* chart = 0,</div><div id="ww1037245" class="CodeInTable">                               IlvPalette* cursorPalette = 0);</div><div id="ww1037246" class="CodeInTable">&nbsp;</div><div id="ww1037247" class="CodeInTable">    virtual void dataPointAdded(const IlvChartDataSet* dataSet,</div><div id="ww1037248" class="CodeInTable">                                IlUInt position);</div><div id="ww1037249" class="CodeInTable">&nbsp;</div><div id="ww1037250" class="CodeInTable">protected:</div><div id="ww1037251" class="CodeInTable">    IlDouble          _min;</div><div id="ww1037252" class="CodeInTable">    IlDouble          _max;</div><div id="ww1037253" class="CodeInTable">    IlvChartGraphic*  _chart;</div><div id="ww1036575" class="CodeInTable">};</div></td></tr></table></div><div id="ww1016917" class="Body">Only the <span class="code">dataPointAdded</span> method is subclassed since we want to perform a specific task when a new data item is added, and nothing special when other types of modifications are made to the data set.</div><div id="ww1014676" class="Body">The constructor is implemented as follows:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1037258" class="CodeInTable">TemperatureDataSetListener::</div><div id="ww1037259" class="CodeInTable">TemperatureDataSetListener(IlDouble min, </div><div id="ww1037260" class="CodeInTable">                           IlDouble max,</div><div id="ww1037261" class="CodeInTable">                           IlvChartGraphic* chart,</div><div id="ww1037262" class="CodeInTable">                           IlvPalette* cursorPalette)</div><div id="ww1037263" class="CodeInTable">    : IlvChartDataSetListener(),</div><div id="ww1037264" class="CodeInTable">      _min(min),</div><div id="ww1037265" class="CodeInTable">      _max(max)</div><div id="ww1037266" class="CodeInTable">{</div><div id="ww1037267" class="CodeInTable">    if (chart) {</div><div id="ww1037268" class="CodeInTable">        IlvDisplay* dpy = chart-&gt;getDisplay();</div><div id="ww1037269" class="CodeInTable">        IlvPalette* palette = cursorPalette ? cursorPalette</div><div id="ww1037270" class="CodeInTable">            : dpy-&gt;getPalette(dpy-&gt;getColor("white"), 0);</div><div id="ww1037271" class="CodeInTable">        chart-&gt;addOrdinateCursor(_min, palette);</div><div id="ww1037272" class="CodeInTable">        chart-&gt;addOrdinateCursor(_max, palette);</div><div id="ww1037273" class="CodeInTable">    }</div><div id="ww1036596" class="CodeInTable">}</div></td></tr></table></div><div id="ww1014708" class="Body">The constructor takes the minimum and maximum values of the considered interval as parameters. When a temperature that is outside of this interval is added, a message is printed. If a chart is specified as a parameter, cursors will be drawn in the chart at the minimum and maximum values of the interval.</div><div id="ww1016479" class="Body">The implementation of the <span class="code">dataPointAdded</span> method is the following:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1037278" class="CodeInTable">void </div><div id="ww1037279" class="CodeInTable">TemperatureDataSetListener::dataPointAdded(const IlvChartDataSet* dataSet,   </div><div id="ww1037280" class="CodeInTable">                                           IlUInt position)</div><div id="ww1037281" class="CodeInTable">{</div><div id="ww1037282" class="CodeInTable">    IlvDoublePoint dataPoint;</div><div id="ww1037283" class="CodeInTable">    dataSet-&gt;getPoint(position, dataPoint);</div><div id="ww1037284" class="CodeInTable">    if (dataPoint.y() &lt; _min)</div><div id="ww1037285" class="CodeInTable">        cout &lt;&lt; dataSet-&gt;getName() &lt;&lt; ": Temperature at the index " </div><div id="ww1037286" class="CodeInTable">             &lt;&lt; position &lt;&lt; " = " &lt;&lt; dataPoint.y() &lt;&lt; " degrees ( &lt; " </div><div id="ww1037287" class="CodeInTable">             &lt;&lt; _min &lt;&lt; " )" &lt;&lt; endl;</div><div id="ww1037288" class="CodeInTable">    if (dataPoint.y() &gt; _max)</div><div id="ww1037289" class="CodeInTable">        cout &lt;&lt; dataSet-&gt;getName() &lt;&lt; ": Temperature at the index " </div><div id="ww1037290" class="CodeInTable">             &lt;&lt; position &lt;&lt; " = " &lt;&lt; dataPoint.y() &lt;&lt; " degrees ( &gt; " </div><div id="ww1037291" class="CodeInTable">             &lt;&lt; _max &lt;&lt; " )" &lt;&lt; endl;</div><div id="ww1036615" class="CodeInTable">}</div></td></tr></table></div><div id="ww1014677" class="Body">The method compares the new temperature value that is added to the data set with the minimum and the maximum values defined. A specific message is printed on the standard output when the temperature value is smaller than the minimum and when the temperature value is greater than the maximum.</div><div id="ww1014758" class="Heading4">Adding a TemperatureDataSetListener Object to the Temperatures Data Sets </div><div id="ww1014774" class="Body">The listener to be added to the temperatures data sets is created by the following code:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1037296" class="CodeInTable">TemperatureDataSetListener* listener = </div><div id="ww1036621" class="CodeInTable">    new TemperatureDataSetListener(10, 22, chart);</div></td></tr></table></div><div id="ww1014779" class="Body">The created listener is set on all the temperatures data sets that are defined. It is set on <span class="code">dataSets[0]</span> that corresponds to the morning mean temperatures data set and on <span class="code">dataSets[1]</span> that corresponds to the afternoon mean temperatures data set.  </div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1037301" class="CodeInTable">dataSets[0]-&gt;addListener(listener);</div><div id="ww1036627" class="CodeInTable">dataSets[1]-&gt;addListener(listener);</div></td></tr></table></div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1015336" class="Note"><span class="flag">Note:&nbsp;</span>The listener must be set on the temperatures data sets before putting the data into the data sets. Otherwise, the message indicating whether a temperature is outside of the defined interval will not be printed when the temperature is added to a data set.</div></td></tr></table></div><div id="ww1014781" class="Body">Now that the listener has been added, the Temperatures Chart appears as shown in <a href="../Options/datahandling.39.7.html#ww1014952" title="Using Listeners to Catch Data Changes">The Temperatures Chart with a Listener Set On the Temperatures Data Sets</a>:</div><div class="ww_skin_page_overflow"><div id="ww1014782" class="Startfigure"><img class="Default" src="../Options/images/img_simpleListener.gif" width="100%" style="display: block; left: 0.0pt; max-height: 436px; max-width: 482px; top: 0.0pt" alt="" /></div></div><div id="ww1014952" class="Caption">The Temperatures Chart with a Listener Set On the Temperatures Data Sets</div><div id="ww1014764" class="Body">Notice that a cursor has been added at the minimum value (<span class="code">10</span>) and at the maximum value (<span class="code">22</span>) which are passed as parameters to the constructor of the listener.</div><div id="ww1015052" class="Body">The messages that are printed to the standard output are the following:</div><div id="ww1014788" class="NormalCode">Morning Temperatures: Temperature at the index 1 = 8 degrees ( &lt; 10 )</div><div id="ww1014790" class="NormalCode">Afternoon Temperatures: Temperature at the index 3 = 25 degrees ( &gt; 22 )</div><div id="ww1014791" class="NormalCode">Afternoon Temperatures: Temperature at the index 5 = 24 degrees ( &gt; 22 )</div><div id="ww1014792" class="LastNormalCode">Afternoon Temperatures: Temperature at the index 6 = 26 degrees ( &gt; 22 )</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>