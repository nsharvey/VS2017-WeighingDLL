<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Defining a Parameter That Accepts User Input</title><link rel="Prev" href="sqldatasources.11.4.html" title="Previous" /><link rel="Next" href="sqldatasources.11.6.html" title="Next" /><link rel="StyleSheet" href="css/sqldatasources.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/sqldatasources_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/sqldatasources.11.5.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pbpUa_002filbGnXP6pMEhvstGA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/sqldatasources.11.5.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrfrontcover.html#wwconnect_header">Data Access User Manual</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrpart2.html#ww144909">Data Access and SQL</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/sqldatasources.11.1.html#wwconnect_header">SQL Data Sources </a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/sqldatasources.11.3.html#wwconnect_header">Parameters</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Defining a Parameter That Accepts User Input</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww997957" class="Heading2"><span></span>Defining a Parameter That Accepts User Input</div><div id="ww997961" class="Body">In the Rogue Wave&nbsp;Views<span class="emphasis"> Data Access Getting Started Manual</span>, you saw how to filter data according to the values in a column of another data source table. It is possible to adapt this behavior to accept user input as a parameter. This can be done using a memory data source. </div><div id="ww999318" class="Body">The following example shows how to filter an employee table to show only those employees that work in a particular department. The example also uses a foreign table. The tables used in this example are the same as those used in the example described in the Rogue Wave&nbsp;Views<span class="emphasis"> Data Access Getting Started Manual</span>.</div><div id="ww997966" class="Body">You need to set up a panel containing an SQL data source, a gadget table that is connected to it, and a <span class="code">DbField</span> gadget to control record display. </div><div id="ww1000646" class="Body">You will start with a table resembling the one shown in the following figure, that is, an SQL data source connected to a table gadget that shows the I_EMP database table:</div><div class="ww_skin_page_overflow"><div id="ww999589" class="Startfigure"><img class="Default" src="../Options/images/param2.gif" width="100%" style="display: block; left: 0.0pt; max-height: 270px; max-width: 487px; top: 0.0pt" alt="" /></div></div><div id="ww997973" class="Caption">A Table Gadget Linked to an SQL Table</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww997972" class="Note"><span class="flag">Note:&nbsp;</span>Ensure that when you connect to the database you click on the “Keep Password” button. This avoids having to reconnect later.</div></td></tr></table></div><div id="ww997974" class="Body">The DEPTNO column has a foreign table that is connected to it and that converts a department number to the appropriate department name (See <a href="../Options/hintandtip.08.05.html#ww997769" title="Foreign Tables">Foreign Tables</a>). The foreign table is a memory table like the one shown in the following figure: </div><div class="ww_skin_page_overflow"><div id="ww1000140" class="Startfigure"><img class="Default" src="../Options/images/param3.gif" width="100%" style="display: block; left: 0.0pt; max-height: 162px; max-width: 327px; top: 0.0pt" alt="" /></div></div><div id="ww998942" class="Caption">The Foreign Table for the DEPTNO Column</div><div id="ww998943" class="Body">A new <span class="code">DbField</span> gadget and a memory data source should then be created. The <span class="code">DbField</span> gadget will be connected to the single column of the memory data source. The memory table must be set up as a single column table that accepts an integer type. </div><div id="ww1000647" class="Body">The memory data source that acts as a “go-between” for the parameter value.</div><div class="ww_skin_page_overflow"><div id="ww999590" class="Startfigure"><img class="Default" src="../Options/images/param4.gif" width="100%" style="display: block; left: 0.0pt; max-height: 420px; max-width: 446px; top: 0.0pt" alt="" />   </div></div><div id="ww997986" class="Caption">The DEPT_NAME Memory Data Source</div><div id="ww997987" class="Body">Note that it is important to set up the column type as an integer even though the user will be entering a string value. This is because the foreign table will convert the string to an integer before entering the value into the memory table.</div><div id="ww997988" class="Body">The <span class="code">DbField</span> should be connected to this memory data source and configured in the following way:</div><div class="ww_skin_page_overflow"><div id="ww999591" class="Startfigure">  <img class="Default" src="../Options/images/sqldatasources.11.5.4.png" width="100%" style="display: block; left: 0.0pt; max-height: 264px; max-width: 605px; top: 0.0pt" alt="" />        </div></div><div id="ww998002" class="Caption">The Data Source and Mapping pages of the DbField Inspector that Accepts the Parameter Input</div><div id="ww998003" class="Body">You will now define a parameter in the original SQL table that accepts its input from the contents of the only column in the memory data source. This column in turn accepts its input from the <span class="code">DbField</span>. A parameter must be defined in the SQL Data Source inspector:</div><div class="ww_skin_page_overflow"><div id="ww1000141" class="Startfigure">  <img class="Default" src="../Options/images/param6.gif" width="100%" style="display: block; left: 0.0pt; max-height: 200px; max-width: 639px; top: 0.0pt" alt="" />   </div></div><div id="ww998007" class="Caption">Defining a Parameter via a Memory Data Source with a Single Column</div><div id="ww998009" class="Body">In addition to this, you must set Auto Select to <span class="code">Yes</span> in the SQL Data Source Properties dialog box. This enables a data source that uses data from another data source table to automatically select the required value.</div><div id="ww998010" class="Body">To specify that the data shown in the table gadget is to be filtered according to the department parameter, you need to enter the following into the Select page of the SQL Data Source inspector:</div><div class="ww_skin_page_overflow"><div id="ww1001076" class="Startfigure">   <img class="Default" src="../Options/images/sqldatasources.11.5.6.png" width="100%" style="display: block; left: 0.0pt; max-height: 164px; max-width: 493px; top: 0.0pt" alt="" />    </div></div><div id="ww1001080" class="Caption">Specifying the Selection Criterion for a SQL Table </div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1001079" class="Note"><span class="flag">Note:&nbsp;</span>When a parameter is used, its name must be prefixed by a colon (for&nbsp;example,&nbsp;<span class="code">=&nbsp;:department</span>).</div></td></tr></table></div><div id="ww1001081" class="Body">You are now able to enter a department in the <span class="code">DbField</span> that will be entered into the memory table column and taken as the “department” parameter value. It will then be used to make a selection in the SQL table.</div><div id="ww998022" class="Body">One thing remains to be done. The validation of the user input in the memory table can be done by setting a predefined callback on the <span class="code">DbField</span>.</div><div class="ww_skin_page_overflow"><div id="ww999593" class="Startfigure"><img class="Default" src="../Options/images/param8.gif" width="100%" style="display: block; left: 0.0pt; max-height: 44px; max-width: 146px; top: 0.0pt" alt="" /></div></div><div id="ww998027" class="Caption">Setting a Callback on the DbField</div><div id="ww998028" class="Body">This callback validates the user input in the memory table. Now, when you test this panel, the SQL table automatically selects according to the value that you enter in the <span class="code">DbField</span>.</div><div id="ww998029" class="Body">You should now have a panel that allows you to select the required department from a combo box and display only the employees that work in the department.</div><div class="ww_skin_page_overflow"><div id="ww999594" class="Startfigure">  <img class="Default" src="../Options/images/param9.gif" width="100%" style="display: block; left: 0.0pt; max-height: 425px; max-width: 506px; top: 0.0pt" alt="" />   </div></div><div id="ww998034" class="Caption">Completed Panel Allowing Department Selection and Table Contents Filtering </div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>