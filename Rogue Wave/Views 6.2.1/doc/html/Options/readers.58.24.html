<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Relational Model Classes</title><link rel="Prev" href="readers.58.23.html" title="Previous" /><link rel="Next" href="readers.58.25.html" title="Next" /><link rel="StyleSheet" href="css/readers.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/readers_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/readers.58.24.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="ppl1GSe8oeEwvJwuO7NP27A" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/readers.58.24.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/docfrontcover.html#wwconnect_header">Maps</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/readers.58.01.html#wwconnect_header">Predefined Readers</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/readers.58.23.html#wwconnect_header">The Oracle Spatial Features</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Relational Model Classes</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1003752" class="Heading2"><span></span>Relational Model Classes</div><div id="ww1005388" class="Body">This section covers the following topics:</div><div id="ww1005389" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Options/readers.58.24.html#ww1005331" title="Relational Model Classes">Classes for Reading Data from an Oracle Spatial Database</a></div><div id="ww1005393" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Options/readers.58.24.html#ww1001905" title="Relational Model Classes">Class for Writing Data to an Oracle Spatial Database</a></div><div id="ww1005331" class="Heading3"><span></span>Classes for Reading Data from an Oracle Spatial Database</div><div id="ww1004325" class="Body">The reader classes for the Oracle SDO relational model are:</div><div id="ww1004326" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOFeatureIterator.html">IlvSDOFeatureIterator</a></span> for converting Oracle Spatial layer data into <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> objects.</div><div id="ww1004327" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOLayer.html">IlvSDOLayer</a></span> for implementing load-on-demand for relational Oracle Spatial data.</div><div id="ww1005371" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOTileLoader.html">IlvSDOTileLoader</a></span> “abstract” class for defining Oracle queries for the <span class="code">IlvSDOLayer</span>. A subclass, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultSDOTileLoader.html">IlvDefaultSDOTileLoader</a></span> (which is optimized) is used by <span class="code">IlvSDOLayer</span>.</div><div id="ww1005373" class="Heading4">IlvSDOFeatureIterator</div><div id="ww1005374" class="Body">This class reads data from the result of an SQL query to a relational Oracle Spatial layer and converts it into <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> objects. Rogue Wave&nbsp;Views Maps applications can handle Oracle Spatial data using this class in a transparent manner. The following example of C++ code performs a query (using Rogue Wave&nbsp;DB&nbsp;Link), loading data from an Oracle Spatial layer named <span class="code">ROADS_SDOGEOM</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1013137" class="Body">IlString query = IlString("SELECT * FROM ROADS_SDOGEOM ORDER BY 1, 2, 4"); </div><div id="ww1013138" class="Body">                              //keep always the ORDER BY statement </div><div id="ww1013139" class="Body">IldDbms* myDbms = IldNewDbms("oracle8", "scott/tiger@myDomain");</div><div id="ww1013140" class="Body">IldRequest* resultSet = myDbms-&gt;getFreeRequest();</div><div id="ww1013141" class="Body">resultSet-&gt;execute(query.getValue());</div><div id="ww1012703" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww1001838" class="Body">The query orders the result using the following three criteria, which must be given in the order indicated:</div><div id="ww1002248" class="Numbered1"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">1.	</span></span>GID (Geometric ID)</div><div id="ww1002249" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">2.	</span></span>ESEQ (Element Sequence)</div><div id="ww1002250" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">3.	</span></span>SEQ (row sequence)</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1002254" class="Note"><span class="flag">Note:&nbsp;</span>This ordering is necessary for the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOFeatureIterator.html">IlvSDOFeatureIterator</a></span> to work correctly.</div></td></tr></table></div><div id="ww1001823" class="Body">The <span class="code">ResultSet</span> of any query to an Oracle Spatial layer can be used to initialize an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOFeatureIterator.html">IlvSDOFeatureIterator</a></span>, but all the SDO columns must be in the <span class="code">resultSet</span> (columns defining the GID, ESEQ, ETYPE, SEQ, and the coordinates).</div><div id="ww1001848" class="Body">The features returned by this iterator have no attributes. However, the GID of the Oracle Spatial geometry is used as the identifier of each feature and the identifier of each feature can be used to retrieve additional attributes from the database. See the method <span class="MethodName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html#afe2892a3e70f1033dc8bdc7ec7b5564e">getId</a></span>().</div><div id="ww1001858" class="Heading4">IlvSDOLayer</div><div id="ww1001860" class="Body">This class implements load-on-demand for a relational Oracle Spatial data source. The default implementation takes an Oracle Spatial layer for which a spatial indexation has been performed and reads its content with a tiling equivalent to the Oracle Spatial tiling.</div><div id="ww1001845" class="Body">The following example creates an <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOLayer.html">IlvSDOLayer</a></span> on an Oracle Spatial layer named <span class="code">ROADS_SDOGEOM</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1013129" class="Body">IldDbms* myDbms = IldNewDbms("oracle8", "scott/tiger@myDomain");</div><div id="ww1013130" class="Body">IlvMapAdapter* adapter = new IlvMapAdapter(0.5); </div><div id="ww1013131" class="Body">                        // Create an adapter that fits your data.</div><div id="ww1013132" class="Body">IlvSDOLayer* layer = new IlvSDOLayer(adapter, myDbms, "ROADS_SDOGEOM");</div><div id="ww1013133" class="Body">manager-&gt;addLayer(layer);</div><div id="ww1012671" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww1002011" class="Heading4">IlvSDOTileLoader</div><div id="ww1002012" class="Body">This class offers additional possibilities when retrieving data from an Oracle Spatial database. These possibilities are meant as a supplement to the default behavior of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOLayer.html">IlvSDOLayer</a></span>. For example, you may want to have a tiling definition that is different from the Oracle tiling.</div><div id="ww1003299" class="Heading4">IlvDefaultSDOTileLoader</div><div id="ww1003543" class="Body">This class is a subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOTileLoader.html">IlvSDOTileLoader</a></span> and is used by the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOLayer.html">IlvSDOLayer</a></span>. It has some optimizations. For example, the method <span class="code">setTileGroupingCount()</span> allows you to set the number of tiles that will be grouped in one unique query to the database. In fact, each tile corresponds to a Spatial query. If you have an average of <span class="code">n</span> tiles to load each time you want to load-on-demand, you should use <span class="code">setTileGroupingCount(n)</span> where all the <span class="code">n</span> queries will be grouped into one unique query that will be sent to the database. </div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1006882" class="Note"><span class="flag">Note:&nbsp;</span>If you want to handle special operations on each <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> retrieved in load-on-demand with the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOLayer.html">IlvSDOLayer</a></span> layer, you have to subclass the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultSDOTileLoader.html">IlvDefaultSDOTileLoader</a></span> in order to override the <span class="code">getFeatureIterator</span> method. In this method, you have to return an instance of a subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOFeatureIterator.html">IlvSDOFeatureIterator</a></span> where you have overridden the <span class="code">getNextFeature</span> method (inside which you can perform your specific operations on each <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeature.html">IlvMapFeature</a></span> returned by the layer). Finally, you have to set your subclass of <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvDefaultSDOTileLoader.html">IlvDefaultSDOTileLoader</a></span> as the tile loader of the layer.</div></td></tr></table></div><div id="ww1001905" class="Heading3"><span></span>Class for Writing Data to an Oracle Spatial Database</div><div id="ww1002370" class="Body">This section describes the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOWriter.html">IlvSDOWriter</a></span> class that allows you to write map features into a relational Oracle Spatial database.</div><div id="ww1002369" class="Heading4">IlvSDOWriter</div><div id="ww1001907" class="Body">The <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOWriter.html">IlvSDOWriter</a></span> class can write any <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapFeatureIterator.html">IlvMapFeatureIterator</a></span> whose features have a geometry supported by the relational model of Oracle Spatial (vectorial geometries) and write them to the database as in the following example:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1009033" class="CodeInTable">IldDbms* myDbms = IldNewDbms("oracle81", "scott/tiger@myDomain");</div><div id="ww1009776" class="CodeInTable">IlvSDOWriter* writer = new IlvSDOWriter(myDbms, "MyLayer", 135);</div><div id="ww1009777" class="CodeInTable">// Create a source feature iterator.</div><div id="ww1009778" class="CodeInTable">IlvShapeFileReader* reader = new IlvShapeFileReader("foo.shp", 0);</div><div id="ww1009779" class="CodeInTable">IlInt geomCount;</div><div id="ww1009780" class="CodeInTable">// Dump its content to the Oracle layer.</div><div id="ww1009781" class="CodeInTable">writer-&gt;writeFeatureIterator(reader, geomCount);</div></td></tr></table></div><div id="ww1002354" class="Body">The <span class="code">write</span> method of the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvSDOWriter.html">IlvSDOWriter</a></span> does not write the attributes of the features. If you want to write the attributes of the features, you can subtype the <span class="code">writeFeature</span> method of the <span class="code">IlvSDOWriter</span> after calling the <span class="code">writeFeature(feature)</span> method of the mother class.</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1004960" class="Note"><span class="flag">Note:&nbsp;</span>The geometries supported by the Oracle Spatial writer are: <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapPoint.html">IlvMapPoint</a></span>, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapLineString.html">IlvMapLineString</a></span>, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapPolygon.html">IlvMapPolygon</a></span>, <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapMultiPoint.html">IlvMapMultiPoint</a></span>, and <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapMultiCurve.html">IlvMapMultiCurve</a></span> for multiline strings and <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvMapMultiArea.html">IlvMapMultiArea</a></span> for multipolygons.</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>