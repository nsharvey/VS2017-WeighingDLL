<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Step 1: Defining a New Projection</title><link rel="Prev" href="projections.59.38.html" title="Previous" /><link rel="Next" href="projections.59.40.html" title="Next" /><link rel="StyleSheet" href="css/projections.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/projections_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/projections.59.39.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pN8JjsIC182SOC_002febhCqc0gQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/projections.59.39.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/docfrontcover.html#wwconnect_header">Maps</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/projections.59.01.html#wwconnect_header">Map Projections</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/projections.59.38.html#wwconnect_header">Creating a New Projection</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Step 1: Defining a New Projection</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1012163" class="Heading2"><span></span>Step 1: Defining a New Projection</div><div id="ww1012164" class="Body">The first step explains the minimum requirement to subtype a projection. It focuses on how to implement the <span class="code">forward</span> and <span class="code">inverse</span> functions of a projection.</div><div id="ww1012165" class="Body">The complete code of this projection is in the files <span class="code">proj_step1.h</span> and <span class="code">proj_step1.cpp</span>.</div><div id="ww1012166" class="Subhead"><span></span>The Class Declaration</div><div id="ww1012167" class="Body">The Mercator projection is declared in the file <span class="code">proj_step1.h</span>.</div><div id="ww1012168" class="Body">You must include the <span class="code">&lt;ilviews/maps/projection/project.h&gt;</span> file that declares the projection base class <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvProjection.html">IlvProjection</a></span>. </div><div id="ww1014673" class="Body">Then, you must declare the projection features that you are going to implement:</div><div id="ww1012169" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">sForward</span> implements the forward projection in the most simple case, that is to say, when the earth is modeled as a sphere. Implementing this feature is mandatory since the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvProjection.html">IlvProjection</a></span><span class="code">::sForward</span> function is abstract.</div><div id="ww1012170" class="Body">Declaring and implementing the following functions is not mandatory. The new projection will simply not support the features that are not implemented and returns an error code if they are required by the application.</div><div id="ww1012171" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">sInverse</span> implements the inverse projection when the earth is modeled as a sphere.</div><div id="ww1012172" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">eForward</span> implements the forward projection when the earth is modeled as a nonspherical ellipsoid.</div><div id="ww1012173" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">eInverse</span> implements the inverse projection when the earth is modeled as a nonspherical ellipsoid.</div><div id="ww1012174" class="Body">In the projection declaration, you must also use the <span class="code">IlvMapsDeclareProjectionIO </span>macro. This macro declares the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvProjectionClassInfo.html">IlvProjectionClassInfo</a></span> of the class and some mandatory members to support input and output operations.</div><div id="ww1012175" class="Body">You must also add the <span class="code">IlvMapsInitProjectionIO</span> in the file after the projection declaration. This macro ensures that the <span class="ClassName"><a href="../RefMan/refcppmaps/classIlvProjectionClassInfo.html">IlvProjectionClassInfo</a></span> will be initialized during the static initialization phase.</div><div id="ww1012176" class="NormalCode">#include &lt;ilviews/maps/projection/project.h&gt;</div><div id="ww1013172" class="NormalCode">class Mercator : public IlvProjection</div><div id="ww1013175" class="NormalCode">{</div><div id="ww1013176" class="NormalCode">public:</div><div id="ww1013177" class="NormalCode">    Mercator();</div><div id="ww1013178" class="NormalCode">    </div><div id="ww1013179" class="NormalCode">protected:</div><div id="ww1013180" class="NormalCode">    virtual IlvMapsError sForward(IlvCoordinate &amp;) const;</div><div id="ww1013181" class="NormalCode">    virtual IlvMapsError sInverse(IlvCoordinate &amp;) const;</div><div id="ww1013182" class="NormalCode">    virtual IlvMapsError eForward(IlvCoordinate &amp;) const;</div><div id="ww1013186" class="NormalCode">    virtual IlvMapsError eInverse(IlvCoordinate &amp;) const;</div><div id="ww1013187" class="NormalCode">    IlvMapsDeclareProjectionIO(Mercator);</div><div id="ww1013190" class="NormalCode">};</div><div id="ww1013191" class="NormalCode">// Enable IO initialization.</div><div id="ww1013192" class="LastNormalCode">IlvMapsInitProjectionIO(Mercator);</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright Â© 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>