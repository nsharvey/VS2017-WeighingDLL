<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Asynchronous Mode</title><link rel="Prev" href="sqltables.10.20.html" title="Previous" /><link rel="Next" href="sqldatasources.11.1.html" title="Next" /><link rel="StyleSheet" href="css/sqltables.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/sqltables_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Options/sqltables.10.21.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pCaH23itdUtuUHB03qUQWIw" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Options/sqltables.10.21.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrfrontcover.html#wwconnect_header">Data Access User Manual</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/dausrpart2.html#ww144909">Data Access and SQL</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Options/sqltables.10.01.html#wwconnect_header">SQL Tables</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Asynchronous Mode</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1002416" class="Heading1"><span></span>Asynchronous Mode</div><div id="ww1002423" class="Body">Normally, calls made by a client application to a database server are blocking. This means that the client application has to wait for server replies each time it submits an SQL statement or when it attempts to fetch rows. The effect of this is that the end user may feel that the application is not sufficiently responsive.</div><div id="ww1002424" class="Body">Asynchronous mode, which is supported by some database systems, can be used to increase application responsiveness. Instead of blocking until the server responds, asynchronous calls return quickly and the caller must check whether the call has completed (that is, whether the server has responded). If not, the caller is expected to repeat the call until completion. In the meantime, the caller can proceed with other tasks (such as giving the main loop a chance to handle other events).</div><div id="ww1002425" class="Body">The advantages of asynchronous mode are that the application can become more responsive to user input and, in addition, the user may be given the opportunity to cancel a long-running task that has taken too much time. The disadvantage is that programming applications with asynchronous calls is more difficult than programming with synchronous calls.</div><div id="ww1002439" class="Body">The <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliSQLTable.html">IliSQLTable</a></span> class supports selecting and fetching rows asynchronously from a database server. It does not, however, support asynchronous insert, update, or delete operations. </div><div id="ww1002487" class="Body">A typical way of using asynchronous calls is to set up a timer in the application (see the <span class="ClassName"><a href="../RefMan/refcppdataccess/classIliDbTimer.html">IliDbTimer</a></span> class) and to proceed as follows. Assume that an SQL data source needs to perform its select call in asynchronous mode.</div><div id="ww1006853" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Put the data source session in asynchronous mode: </div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 354.330708661417pt"><div id="ww1006849" class="CodeInTable">IliSQLDataSource* ds = ...;</div><div id="ww1006850" class="CodeInTable">   IliSQLTable* sqlTable = ds-&gt;getSQLTable();</div><div id="ww1006851" class="CodeInTable">   IliSQLSession session = ds-&gt;getEffectiveSQLSession();</div><div id="ww1006852" class="CodeInTable">   session-&gt;enterAsyncMode();</div></td></tr></table></div><div id="ww1006855" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Ensure that the fetch policy is “Immediate” so that a call to the <span class="code">select</span> member function will also fetch all rows:</div><div id="ww1002455" class="LastNormalCodeL1">sqlTable-&gt;setFetchPolicy(IliFP_Immediate);</div><div id="ww1006862" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Call the <span class="code">select</span> member function:</div><div id="ww1006863" class="LastNormalCodeL1">sqlTable-&gt;select();</div><div id="ww1006864" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>In the timer callback, call <span class="code">continueAsyncCall</span> as long as the call to <span class="code">select</span> has not completed:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 354.330708661417pt"><div id="ww1006874" class="CodeInTable">void ILVCALLBACK OnTimer(IlvGraphic*, IlAny) {</div><div id="ww1006875" class="CodeInTable">       IliSQLDataSource* ds = ...;</div><div id="ww1006876" class="CodeInTable">       IliSQLTable* sqlTable = ds-&gt;getSQLTable();</div><div id="ww1006877" class="CodeInTable">       if (!sqlTable-&gt;isAsyncCallCompleted())</div><div id="ww1006878" class="CodeInTable">          sqlTable-&gt;continueAsyncCall();</div><div id="ww1006870" class="CodeInTable">     }</div></td></tr></table></div><div id="ww1002493" class="Body">Note that asynchronous mode is not supported by all database systems. Moreover, when it is supported by a database system, support may depend on the database server release number. You should dynamically test whether asynchronous mode is supported as shown in the following code:</div><div id="ww1002509" class="NormalCode">IliSQLSession* session = sqlTable-&gt;getEffectiveSQLSession();</div><div id="ww1002512" class="NormalCode">if (session-&gt;supportsAsyncMode()) {</div><div id="ww1002513" class="NormalCode">...</div><div id="ww1002514" class="LastNormalCode">}</div><div id="ww1002516" class="Body">Another important issue to consider is that there can be at most one non-completed asynchronous call among all cursors that belong to the same session. This means that you cannot execute asynchronously in parallel two SQL statements through two cursors that belong to the same session. Consequently, it is recommended that an SQL table have a private SQL session (that is, not an application-defined session) when used in asynchronous mode.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>