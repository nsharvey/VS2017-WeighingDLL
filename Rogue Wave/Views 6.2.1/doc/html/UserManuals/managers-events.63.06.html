<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Example: Implementing the IlvDragRectangleInteractor Class</title><link rel="Prev" href="managers-events.63.05.html" title="Previous" /><link rel="Next" href="managers-events.63.07.html" title="Next" /><link rel="StyleSheet" href="css/managers-events.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/managers-events_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/managers-events.63.06.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pnn4tjtOinBoX76l94st4rQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/managers-events.63.06.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgfrontcover.html#wwconnect_header">2D Graphics</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgpart1.html#ww144909">Managers</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/managers-events.63.01.html#wwconnect_header">Manager Event Handling</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/managers-events.63.04.html#wwconnect_header">View Interactors</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Example: Implementing the IlvDragRectangleInteractor Class</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww657782" class="Heading2"><span></span>Example: Implementing the IlvDragRectangleInteractor Class</div><div id="ww657784" class="Body">This example demonstrates how the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html">IlvDragRectangleInteractor</a></span> member functions are implemented. The example can be used as a starting point to create your own interactor.</div><div id="ww657785" class="Body">The <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html">IlvDragRectangleInteractor</a></span> interactor allows the user to designate a rectangular region in a view. This rectangle can then be used for various purposes in derived interactors; for instance, a subclass dedicated to the creation of a graphic object can use the rectangle to define the bounding box of the new object.</div><div id="ww657806" class="Body">Here is a slightly revised version of the synopsis of this class:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657788" class="CodeInTable">class IlvDragRectangleInteractor </div><div id="ww657789" class="CodeInTable">: public IlvManagerViewInteractor</div><div id="ww657790" class="CodeInTable">{</div><div id="ww657791" class="CodeInTable">public:</div><div id="ww657792" class="CodeInTable">    IlvDragRectangleInteractor(IlvManager* manager, IlvView* view)</div><div id="ww657793" class="CodeInTable">       : IlvManagerViewInteractor(manager, view) {}</div><div id="ww657794" class="CodeInTable">&nbsp;</div><div id="ww657795" class="CodeInTable">&nbsp;&nbsp;&nbsp;&nbsp;virtual IlBoolean handleEvent(IlvEvent&amp; event);</div><div id="ww657796" class="CodeInTable">    virtual void drawGhost();</div><div id="ww657797" class="CodeInTable">    virtual void doIt(IlvRect&amp;);</div><div id="ww657798" class="CodeInTable">    virtual void abort();</div><div id="ww657799" class="CodeInTable">&nbsp;</div><div id="ww657800" class="CodeInTable">    IlvRect&amp; getRectangle();</div><div id="ww657801" class="CodeInTable">protected:</div><div id="ww657802" class="CodeInTable">    IlvRect _xor_rectangle;</div><div id="ww657803" class="CodeInTable">    IlvPos  _firstx;</div><div id="ww657804" class="CodeInTable">    IlvPos  _firsty;</div><div id="ww657805" class="CodeInTable">};</div></td></tr></table></div><div id="ww657808" class="Body">Three protected fields are defined:</div><div id="ww657809" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">_xor_rectangle</span> - Holds the coordinates of the rectangle being dragged by the user.</div><div id="ww657810" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">_firstx</span> and <span class="code">_firsty</span> - The coordinates of the first button-down event received. This point is used as the start of the selected rectangle. It can be any one of the 4 corners depending on the direction in which the user drags the rectangle.</div><div id="ww657811" class="Body">The constructor does nothing and the initialization is done by the <span class="code">doIt</span> member function.</div><div id="ww657812" class="Body">Also, four member functions of the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManagerViewInteractor.html">IlvManagerViewInteractor</a></span> class are overloaded:</div><div id="ww663589" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657833" title="Example: Implementing the IlvDragRectangleInteractor Class">abort Member Function</a></div><div id="ww663586" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww663585" title="Example: Implementing the IlvDragRectangleInteractor Class">handleEvent Member Function</a></div><div id="ww657820" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657938" title="Example: Implementing the IlvDragRectangleInteractor Class">drawGhost Member Function</a></div><div id="ww657824" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657956" title="Example: Implementing the IlvDragRectangleInteractor Class">doIt Member Function</a></div><div id="ww657833" class="Heading3"><span></span>abort Member Function</div><div id="ww663584" class="Body">This member function is called to cancel the interaction. The rectangle width is set to <span class="code">0</span>.</div><div id="ww664156" class="NormalCode">void</div><div id="ww664157" class="NormalCode">IlvDragRectangleInteractor::abort()</div><div id="ww664158" class="NormalCode">{</div><div id="ww664159" class="NormalCode">    _xor_rectangle.w(0);</div><div id="ww664160" class="LastNormalCode">}</div><div id="ww663585" class="Heading3"><span></span>handleEvent Member Function</div><div id="ww657834" class="Body">The following shows a simplified version of the <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html#a5b54d71e4043e746e12a1b6a039ac43c">IlvDragRectangleInteractor::handleEvent</a></span> member function.</div><div id="ww670106" class="NormalCode">IlBoolean </div><div id="ww670107" class="NormalCode">IlvDragRectangleInteractor::handleEvent(IlvEvent&amp; event)</div><div id="ww670108" class="NormalCode">{</div><div id="ww670109" class="NormalCode">    IlBoolean consumed = IlFalse;</div><div id="ww670110" class="NormalCode">    switch(event.type()) {</div><div id="ww670111" class="NormalCode">    case IlvKeyUp:  </div><div id="ww670112" class="NormalCode">    case IlvKeyDown:</div><div id="ww670113" class="NormalCode">        consumed = getManager()-&gt;shortCut(event, getView());</div><div id="ww670114" class="NormalCode">        break;</div><div id="ww670115" class="NormalCode">    case IlvButtonDown:</div><div id="ww670116" class="NormalCode">        if (event.button() != IlvLeftButton) {</div><div id="ww670117" class="NormalCode">            consumed = getManager()-&gt;shortCut(event, getView());</div><div id="ww670118" class="NormalCode">        } else {</div><div id="ww670119" class="NormalCode">            consumed = IlTrue;</div><div id="ww670120" class="NormalCode">            _xor_rectangle.w(0);</div><div id="ww670121" class="NormalCode">            IlvPoint p(event.x(), event.y());</div><div id="ww670122" class="NormalCode">            if (getTransformer()) getTransformer()-&gt;inverse(p);</div><div id="ww670123" class="NormalCode">            _firstx = p.x();</div><div id="ww670124" class="NormalCode">            _firsty = p.y();</div><div id="ww670125" class="NormalCode">        }</div><div id="ww670126" class="NormalCode">        break;</div><div id="ww670127" class="NormalCode">   case IlvButtonDragged:</div><div id="ww670128" class="NormalCode">        if ((event.button()    != IlvLeftButton)) {</div><div id="ww670129" class="NormalCode">            consumed = getManager()-&gt;shortCut(event, getView());  </div><div id="ww670130" class="NormalCode">        } else {</div><div id="ww670131" class="NormalCode">            consumed = IlTrue;</div><div id="ww670132" class="NormalCode">            if (_xor_rectangle.w()) drawGhost();</div><div id="ww670133" class="NormalCode">            IlvPoint p(event.x(), event.y());</div><div id="ww670134" class="NormalCode">            if (getTransformer()) getTransformer()-&gt;inverse(p);</div><div id="ww670135" class="NormalCode">            _xor_rectangle.move(IlvMin(_firstx, p.x()),</div><div id="ww670136" class="NormalCode">                                IlvMin(_firsty, p.y()));</div><div id="ww670137" class="NormalCode">            _xor_rectangle.resize((IlvDim)(IlvMax(_firstx, p.x())</div><div id="ww670138" class="NormalCode">                                                 -_xor_rectangle.x()),</div><div id="ww670139" class="NormalCode">                                  (IlvDim)(IlvMax(_firsty, p.y())</div><div id="ww670140" class="NormalCode">                                                -_xor_rectangle.y()));</div><div id="ww670141" class="NormalCode">            ensureVisible(IlvPoint(event.x(), event.y()));</div><div id="ww670142" class="NormalCode">            drawGhost();</div><div id="ww670143" class="NormalCode">        }</div><div id="ww670144" class="NormalCode">        break;</div><div id="ww670145" class="NormalCode">     case IlvButtonUp:</div><div id="ww670146" class="NormalCode">        if (event.button() != IlvLeftButton) {</div><div id="ww670147" class="NormalCode">            consumed = getManager()-&gt;shortCut(event, getView());</div><div id="ww670148" class="NormalCode">        } else {</div><div id="ww670149" class="NormalCode">            consumed = IlTrue;</div><div id="ww670150" class="NormalCode">            if (!_xor_rectangle.w()) return;</div><div id="ww670151" class="NormalCode">            drawGhost();</div><div id="ww670152" class="NormalCode">            IlvRect rect(_xor_rectangle);</div><div id="ww670153" class="NormalCode">            _xor_rectangle.w(0);</div><div id="ww670154" class="NormalCode">            doIt(rect);</div><div id="ww670155" class="NormalCode">        }</div><div id="ww670156" class="NormalCode">        break;</div><div id="ww670157" class="NormalCode">    }</div><div id="ww670158" class="NormalCode">    return consumed;</div><div id="ww657884" class="LastNormalCode">}</div><div id="ww657885" class="Body">Here, only button events are managed. Other events are discarded or sent to the manager for possible dispatch to accelerators by means of a call to the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::shortCut</span> member function.</div><div id="ww663603" class="Body">The following types of events are handled by the <span class="code">handleEvent</span> member function:</div><div id="ww663618" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657894" title="Example: Implementing the IlvDragRectangleInteractor Class">Keyboard Events</a></div><div id="ww663623" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657901" title="Example: Implementing the IlvDragRectangleInteractor Class">Button-Down Events</a></div><div id="ww663628" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657908" title="Example: Implementing the IlvDragRectangleInteractor Class">Button-Dragged Events</a></div><div id="ww663633" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-events.63.06.html#ww657926" title="Example: Implementing the IlvDragRectangleInteractor Class">Button-Up Events</a></div><div id="ww657894" class="Heading4">Keyboard Events</div><div id="ww664168" class="Body">You want to ignore these events. The best way to do this without losing the information conveyed by the event is to bypass the natural view interactor process and send the event back to the manager where it might match an accelerator. Because <span class="code">handleEvent()</span> must return true if the event has been consumed, we must store the value returned by <span class="code">shortCut()</span> and return it at the end. </div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww670239" class="CodeInTable">case IlvKeyUp:</div><div id="ww670240" class="CodeInTable">case IlvKeyDown:</div><div id="ww670241" class="CodeInTable">        consumed = getManager()-&gt;shortCut(event, getView());</div><div id="ww657893" class="CodeInTable">        break;</div></td></tr></table></div><div id="ww657901" class="Heading4">Button-Down Events</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww665810" class="CodeInTable">case IlvButtonDown:</div><div id="ww665811" class="CodeInTable">...</div><div id="ww665812" class="CodeInTable">break;</div></td></tr></table></div><div id="ww664177" class="Body">The mouse position is stored in <span class="code">_firstx</span> and <span class="code">_firsty</span> and the rectangle is reset. This is done by setting the width of the rectangle to <span class="code">0</span>. Then, the coordinates are stored in the object coordinate system:</div><div id="ww670293" class="NormalCode">if (event.button() != IlvLeftButton)</div><div id="ww670294" class="NormalCode">   consumed = getManager()-&gt;shortCut(event, getView());</div><div id="ww670295" class="NormalCode">else {</div><div id="ww670296" class="NormalCode">  consumed = IlTrue;</div><div id="ww670297" class="NormalCode">   _xor_rectangle.w(0);</div><div id="ww670298" class="NormalCode">   IlvPoint p(event.x(), event.y());</div><div id="ww670299" class="NormalCode">   if (getTransformer()) getTransformer()-&gt;inverse(p);</div><div id="ww670300" class="NormalCode">   _firstx = p.x();</div><div id="ww670301" class="NormalCode">   _firsty = p.y();</div><div id="ww666152" class="LastNormalCode">}</div><div id="ww657908" class="Heading4">Button-Dragged Events</div><div id="ww664229" class="NormalCode">case IlvButtonDragged:</div><div id="ww664230" class="NormalCode">...</div><div id="ww664231" class="LastNormalCode">break;</div><div id="ww670318" class="Body">Store that the event is consumed.</div><div id="ww670337" class="LastNormalCode">consumed = IlTrue;</div><div id="ww664216" class="Body">If <span class="code">_xor_rectangle</span> is valid, the rectangle has been drawn with <span class="code">drawGhost</span> and has to be erased:</div><div id="ww657909" class="LastNormalCode">if (_xor_rectangle.w()) drawGhost();</div><div id="ww664211" class="Body">The new rectangle is computed in the object coordinate system:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657912" class="CodeInTable">IlvPoint p(event.x(), event.y());</div><div id="ww657913" class="CodeInTable">if (getTransformer()) getTransformer()-&gt;inverse(p);</div><div id="ww657914" class="CodeInTable">_xor_rectangle.move(IlvMin(_firstx, p.x()),</div><div id="ww657915" class="CodeInTable">                    IlvMin(_firsty, p.y()));</div><div id="ww657916" class="CodeInTable">_xor_rectangle.resize((IlvDim)(IlvMax(_firstx, p.x())</div><div id="ww660094" class="CodeInTable">                               -_xor_rectangle.x()),</div><div id="ww660095" class="CodeInTable">                      (IlvDim)(IlvMax(_firsty, p.y())</div><div id="ww657919" class="CodeInTable">                               -_xor_rectangle.y()));</div></td></tr></table></div><div id="ww664194" class="Body">The following ensures that the dragged point remains on the screen. When the view is in a scrolled view, you can change the view coordinates to keep the mouse position visible:</div><div id="ww657922" class="LastNormalCode">ensureVisible(IlvPoint(event.x(), event.y()));</div><div id="ww664189" class="Body">The new rectangle is drawn:</div><div id="ww657924" class="LastNormalCode">drawGhost();</div><div id="ww657926" class="Heading4">Button-Up Events</div><div id="ww664238" class="Body">A button-up event signifies the end of the interaction; the rectangle has been defined:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww660195" class="CodeInTable">case IlvButtonUp:</div><div id="ww660206" class="CodeInTable">...</div><div id="ww660207" class="CodeInTable">break;</div></td></tr></table></div><div id="ww670363" class="Body">Store that the event is consumed.</div><div id="ww670364" class="LastNormalCode">consumed = IlTrue;</div><div id="ww657930" class="Body">The previous ghost image is erased:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww660198" class="CodeInTable">drawGhost();</div></td></tr></table></div><div id="ww657932" class="Body">The current rectangle is saved and the interactor is reset:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww660201" class="CodeInTable">IlvRect rect(_xor_rectangle);</div><div id="ww660210" class="CodeInTable">_xor_rectangle.w(0);</div></td></tr></table></div><div id="ww657935" class="Body">The <span class="code">doIt</span> virtual member function is called. Subclasses overload this method to perform their final task using the rectangle provided as the parameter:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww660204" class="CodeInTable">doIt(rect);</div></td></tr></table></div><div id="ww657938" class="Heading3"><span></span>drawGhost Member Function</div><div id="ww657941" class="Body">The <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html#a2d9e388abba167e4aac87db4114b0eb4">IlvDragRectangleInteractor::drawGhost</a></span> member function draws a ghost image of <span class="code">_xor_rectangle</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657944" class="CodeInTable">void </div><div id="ww657945" class="CodeInTable">IlvDragRectangleInteractor::drawGhost()</div><div id="ww657946" class="CodeInTable">{</div><div id="ww657947" class="CodeInTable">    IlvManager* mgr = getManager();</div><div id="ww657948" class="CodeInTable">    if (_xor_rectangle.w()) {</div><div id="ww657949" class="CodeInTable">        IlvRect rect = _xor_rectangle;</div><div id="ww657950" class="CodeInTable">        if(getTransformer()) getTransformer()-&gt;apply(rect);</div><div id="ww669506" class="CodeInTable">        </div><div id="ww657951" class="CodeInTable">        getView()-&gt;drawRectangle(mgr-&gt;getPalette(),rect);</div><div id="ww657954" class="CodeInTable">    }</div><div id="ww666430" class="CodeInTable">}</div></td></tr></table></div><div id="ww657955" class="Body">Because <span class="code">_xor_rectangle</span> is expressed in the object coordinate system, the transformer of the view must be applied before drawing the rectangle.</div><div id="ww657956" class="Heading3"><span></span>doIt Member Function</div><div id="ww657959" class="Body">The <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html#a82bc11325821dbd9597f7c13b0bcad33">IlvDragRectangleInteractor::doIt</a></span> member function does nothing; it is designed to be overloaded to perform actions once the user has selected a rectangular region.</div><div id="ww657960" class="Body">Two examples of how to overload this member function are presented:</div><div id="ww657961" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The first example shows how to create a new <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvRectangle.html">IlvRectangle</a></span> object with the rectangular region (the same way as the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvMakeRectangleInteractor.html">IlvMakeRectangleInteractor</a></span> class does).</div><div id="ww657962" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The second example shows how to select all the objects located in the rectangular region. This illustrates how to manipulate the selection within a manager without using the select interactor.</div><div id="ww657963" class="Heading4">Example 1: IlvMakeRectangleInteractor</div><div id="ww657966" class="Body">Here is a simplified version of the <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvMakeRectangleInteractor.html#a50ce106da363388c015df61e1e7d2448">IlvMakeRectangleInteractor::doIt</a></span> member function, derived from the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html">IlvDragRectangleInteractor</a></span> class. This member function deselects all the objects of the manager, creates an <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvRectangle.html">IlvRectangle</a></span> instance, adds it to the manager, and sets the selection on it.</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657971" class="CodeInTable">void </div><div id="ww657972" class="CodeInTable">IlvMakeRectangleInteractor::doIt(IlvRect&amp; rect)</div><div id="ww657973" class="CodeInTable">{</div><div id="ww657974" class="CodeInTable">    IlvGraphic* obj = new IlvRectangle(getDisplay(), rect);</div><div id="ww657975" class="CodeInTable">    getManager()-&gt;deSelect();</div><div id="ww657976" class="CodeInTable">    getManager()-&gt;addObject(obj);</div><div id="ww657977" class="CodeInTable">    getManager()-&gt;makeSelected(obj);</div><div id="ww657978" class="CodeInTable">}</div><div id="ww657979" class="CodeInTable">IlvGraphic* obj = new IlvRectangle(getDisplay(), rect);</div></td></tr></table></div><div id="ww657980" class="Heading4">Example 2: Selector</div><div id="ww657981" class="Body">This example shows how to implement a simple interactor to select graphic objects. The <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvDragRectangleInteractor.html#a82bc11325821dbd9597f7c13b0bcad33">IlvDragRectangleInteractor::doIt</a></span> member function is overloaded in order to select every object located within the region the user has created.</div><div id="ww663850" class="Body">The <span class="code">SelectAnObject</span> function is defined. This is called by an application member function of the manager. The manager is available in the <span class="code">manager</span> parameter:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657986" class="CodeInTable">static void </div><div id="ww657987" class="CodeInTable">SelectAnObject(IlvGraphic* object, IlAny manager)</div><div id="ww657988" class="CodeInTable">{</div><div id="ww657989" class="CodeInTable">    ((IlvManager*)manager)-&gt;setSelected(object, IlTrue);</div><div id="ww657990" class="CodeInTable">}</div></td></tr></table></div><div id="ww657991" class="Body">The <span class="code">doIt</span> member function calls <span class="code">SelectAnObject</span> for each object located in the designated rectangle. To find these objects, call the manager member function <span class="code">applyInside</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww657994" class="CodeInTable">void</div><div id="ww657995" class="CodeInTable">MyRectangleSelector::doIt(IlvRect&amp; rect)</div><div id="ww657996" class="CodeInTable">{</div><div id="ww657997" class="CodeInTable">    getManager()-&gt;applyInside(rect, SelectAnObject, (IlAny)getManager());</div><div id="ww657998" class="CodeInTable">}</div></td></tr></table></div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>