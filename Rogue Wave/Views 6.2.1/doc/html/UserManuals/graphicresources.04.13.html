<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>IlvPalette: Drawing Using a Group of Resources</title><link rel="Prev" href="graphicresources.04.12.html" title="Previous" /><link rel="Next" href="graphicresources.04.14.html" title="Next" /><link rel="StyleSheet" href="css/graphicresources.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/graphicresources_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/graphicresources.04.13.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pzS_002blO5TTdpMHGeQY_002bOsHfQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/graphicresources.04.13.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/foundusrfrontcover.html#wwconnect_header">Foundation</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/graphicresources.04.01.html#wwconnect_header">Graphic Resources</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">IlvPalette: Drawing Using a Group of Resources </span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww829230" class="Heading1"><span></span>IlvPalette: Drawing Using a Group of Resources </div><div id="ww818812" class="Body">In Rogue Wave®&nbsp;Views, the drawing resources are assembled into an object of the <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvPalette.html">IlvPalette</a></span> class. The only way to draw anything is to use an <span class="code">IlvPalette</span> object. Most predefined graphic objects handle one <span class="code">IlvPalette</span> (but sometimes more) to draw themselves.</div><div id="ww820313" class="Body">Unlike other <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span> subclasses, <span class="code">IlvPalette</span> has public constructors. However, the standard way of creating a palette is still to get it from the <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a1cc3dd39af795441c10e78f2c66d9d93">IlvDisplay::getPalette</a></span> methods. The public constructors must only be used to create palettes that cannot be shared.</div><div id="ww834700" class="Body">An <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvPalette.html">IlvPalette</a></span> can be shared or not. Named palettes are a subset of shared palettes.</div><div id="ww828451" class="Body">For additional details, see the sections:</div><div id="ww828452" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/graphicresources.04.13.html#ww821637" title="IlvPalette: Drawing Using a Group of Resources">Locking and Unlocking Resources</a></div><div id="ww834614" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/graphicresources.04.13.html#ww834513" title="IlvPalette: Drawing Using a Group of Resources">Clipping Area</a></div><div id="ww834618" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/graphicresources.04.13.html#ww834692" title="IlvPalette: Drawing Using a Group of Resources">Creating a Non-shared Palette</a></div><div id="ww834622" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/graphicresources.04.13.html#ww818948" title="IlvPalette: Drawing Using a Group of Resources">Creating a Shared Palette</a></div><div id="ww834626" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/graphicresources.04.13.html#ww826348" title="IlvPalette: Drawing Using a Group of Resources">Naming Palettes</a></div><div id="ww821637" class="Subhead"><span></span>Locking and Unlocking Resources</div><div id="ww820312" class="Body">An <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvPalette.html">IlvPalette</a></span> locks all the resources it contains and unlocks them when they are no longer used (palette destruction or replacement of a resource).</div><div id="ww834513" class="Subhead"><span></span>Clipping Area</div><div id="ww834514" class="Body">The following methods are used to change the clipping area used to draw with the palette.</div><div id="ww834517" class="NormalCode">void setClip(const IlvRect* = 0) const;</div><div id="ww834518" class="LastNormalCode">void setClip(const IlvRegion*) const;</div><div id="ww834519" class="Body">If you use a drawing method, the drawing will appear only in the clipping area; other areas will not be modified.</div><div id="ww834548" class="Body">That is why you must clip the drawing when you write the <span class="code">draw</span> method of an <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span> subclass. The <span class="code">draw</span> method gives you a clipping region as a parameter. You must set this clip on all the palettes that you are using to do the drawing. Once you have finished drawing, you must reset the clip of each palette to its previous clip, since the palettes are shared. This can be done using the <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvPushClip.html">IlvPushClip</a></span> class.</div><div id="ww834540" class="Body">Here is an example:</div><div id="ww834575" class="NormalCode">void MyGraphic::draw(IlvPort* dst, </div><div id="ww834576" class="NormalCode">                     const IlvTransformer* t, </div><div id="ww834577" class="NormalCode">                     const IlvRegion* clip) const</div><div id="ww834578" class="NormalCode">{</div><div id="ww834579" class="NormalCode">     IlvPalette* myPalette = getPalette();</div><div id="ww834580" class="NormalCode">     IlvPushClip (*myPalette, clip);</div><div id="ww834581" class="NormalCode">     IlvPoint p1(10, 10), p2(50, 50);</div><div id="ww834582" class="NormalCode">     // Do my drawings</div><div id="ww834583" class="NormalCode">     dst-&gt;drawLine(myPalette, p1, p2);</div><div id="ww834584" class="LastNormalCode">}</div><div id="ww834692" class="Subhead"><span></span>Creating a Non-shared Palette</div><div id="ww834694" class="Body">You can create a palette that cannot be shared by using the public constructors of <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvPalette.html">IlvPalette</a></span>:</div><div id="ww826299" class="NormalCode">IlvPalette(IlvDisplay* display);</div><div id="ww826877" class="NormalCode">IlvPalette(IlvPalette* palette);</div><div id="ww826878" class="NormalCode">IlvPalette(IlvDisplay* display,</div><div id="ww826879" class="NormalCode">           IlvColor*   background,</div><div id="ww826880" class="NormalCode">           IlvColor*   foreground,</div><div id="ww826881" class="NormalCode">           IlvFont*    font,</div><div id="ww826882" class="LastNormalCode">           IlvPattern* pattern);</div><div id="ww826300" class="Body">The first constructor creates a default palette, the second creates a copy of the palette given as its argument, and the third creates the palette with its characteristics passed as arguments. Once you have a new palette, you can use its member functions to set its internal resources (doing so with shared palettes is not recommended).</div><div id="ww821384" class="Body">You can use this technique on the rare occasions when you do not want the palette to be shared at all or when you want to have total control on the way the palette is shared. You then have the responsibility of deleting it explicitly when it is no longer needed. Note that a palette built this way still uses shared resources (colors, fonts, and so on).</div><div id="ww818948" class="Subhead"><span></span>Creating a Shared Palette</div><div id="ww832862" class="Body">Each <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> instance maintains a list of shared palettes. When you need a new palette, you must ask the display to supply it. This class provides a method <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a1cc3dd39af795441c10e78f2c66d9d93">getPalette</a></span> that lets you specify the internal resources of the palette. The other member function <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a1cc3dd39af795441c10e78f2c66d9d93">getPalette</a></span><span class="code">(const char* name)</span> is discussed in the next section on named palettes.</div><div id="ww821397" class="Body">If a palette matching your requirements already exists in the list, this palette is returned. If no such palette is found in the list of shared palettes, a new palette is created, added to the list and returned. The member function <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a1cc3dd39af795441c10e78f2c66d9d93">getPalette</a></span> does not lock the returned palette. You can set some resource parameters of this function to <span class="code">NULL</span>. The display then uses the corresponding default resources.</div><div id="ww820340" class="Body">The use of shared palettes is very common and sufficient for most applications. However, you must keep in mind that these palettes are indeed shared and that modifying one of them is very likely to have undesirable side effects. Most of the time, palettes are used to control the way graphic objects (that is, subclasses of <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span>) are drawn.</div><div id="ww821410" class="Body">You should not try to modify a palette itself, but instead use the graphic object member functions to modify its graphic properties. The graphic object then gets another palette for the display and keeps the old palette unchanged, in case it is used somewhere else in the application.</div><div id="ww821419" class="Body">The following code shows the right and wrong ways of using palettes:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww844372" class="CodeInTable">// To set the foreground color of IlvGraphic* graphic</div><div id="ww844373" class="CodeInTable">IlvColor* color = graphic-&gt;getDisplay()-&gt;getColor("blue");</div><div id="ww844374" class="CodeInTable">&nbsp;</div><div id="ww844375" class="CodeInTable">// The following line will affect all objects sharing the palette</div><div id="ww844376" class="CodeInTable">graphic-&gt;getPalette()-&gt;setForeground(color);  // Wrong way</div><div id="ww844377" class="CodeInTable">&nbsp;</div><div id="ww844378" class="CodeInTable">// The following line will give another palette to the graphic object</div><div id="ww844379" class="CodeInTable">// and will not affect objects pointing to the previous palette</div><div id="ww844346" class="CodeInTable">graphic-&gt;setForeground(color);      // Right way</div></td></tr></table></div><div id="ww826348" class="Subhead"><span></span>Naming Palettes</div><div id="ww820474" class="Body">As with most other resources, palettes can be named using their <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::setName</span> member function. This function overwrites any existing name, so before naming a palette, you should check if the palette already has a name.</div><div id="ww821420" class="Body">You can use the member function <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a1cc3dd39af795441c10e78f2c66d9d93">IlvDisplay::getPalette</a></span><span class="code">(const char* name)</span> to retrieve a shared palette by its name.</div><div id="ww821425" class="Body">The name of a palette is saved when graphic objects are written to an output stream. When this data is read as an input stream, the display first tries to find an existing palette with the same name. If none is found, the display tries to load the palette the usual way (that is, it looks for an existing palette matching the description, and if none exists, it creates a new palette and names it).</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>