<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Implementation of a Document View Class</title><link rel="Prev" href="howfunctions.56.6.html" title="Previous" /><link rel="Next" href="interfaces.57.1.html" title="Next" /><link rel="StyleSheet" href="css/howfunctions.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/howfunctions_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/howfunctions.56.7.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pQ4MVnK26L0Bypfz9HfyWag" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/howfunctions.56.7.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrpart3.html#ww997051">Rogue Wave&nbsp;Views Application Framework</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/howfunctions.56.1.html#wwconnect_header">Implementing an Application</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Implementation of a Document View Class</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww108946" class="Heading1"><span></span>Implementation of a Document View Class</div><div id="ww108948" class="Body">A document view class is derived from the <span class="ClassName"><a href="../RefMan/refcppappframe/classIlvDvDocViewInterface.html">IlvDvDocViewInterface</a></span> class. It shows the contents of its associated document and allows the end user to edit it. Here is the inheritance tree of the <span class="code">IlvDvDocViewInterface</span> class:</div><div class="ww_skin_page_overflow"><div id="ww106555" class="Startfigure"><img class="Default" src="../UserManuals/images/docview3.gif" width="100%" style="display: block; left: 0.0pt; max-height: 402px; max-width: 629px; top: 0.0pt" alt="" /></div></div><div id="ww106556" class="Body">When deriving from this class, only the <span class="MethodName"><a href="../RefMan/refcppappframe/classIlvDvDocViewInterface.html#a41cb2a325b439276ff8c71455558b204">initializeView</a></span> method needs to be overridden.</div><div id="ww106558" class="LastNormalCode">virtual void initializeView();</div><div id="ww109684" class="Body">This method is called to initialize the document view object according to the document data. For example, a list view can be filled according to a data set stored in the document. A sample of the body of this method is shown here:</div><div id="ww110827" class="NormalCode">void</div><div id="ww110829" class="NormalCode">ListView::initializeView()</div><div id="ww110831" class="NormalCode">{</div><div id="ww110833" class="NormalCode">   IlvDvListView::initializeView();</div><div id="ww110835" class="NormalCode">   ListDocument* document = getListDocument();</div><div id="ww110837" class="NormalCode">   IlvUInt count;</div><div id="ww110839" class="NormalCode">   Element* const* elements = document-&gt;getElements(count); </div><div id="ww110841" class="NormalCode">   for(IlvUInt iElement = 0; iElement &lt; count; iElement++)</div><div id="ww110873" class="NormalCode">   addString(elements[iElement]-&gt;getName());</div><div id="ww110876" class="LastNormalCode">}</div><div id="ww110880" class="Subhead"><span></span>Interactions</div><div id="ww110877" class="Body">You have seen how a document view can show the contents of its document.</div><div id="ww110882" class="Body">However, you will also need to edit the contents of a document by interacting with a view. You will want interactions made on the view to be translated into changes in the document data.</div><div class="ww_skin_page_overflow"><table class="ReminderTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 368.503653543307pt"><div id="ww111459" class="Reminder"><span class="flag">Reminder:&nbsp;</span><span style="color: #000000; font-family: &quot;Times New Roman&quot;; font-size: 10.0pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">It is recommended to use Application Framework commands to do this.</span></div></td></tr></table></div><div id="ww110883" class="Body">Consider a list view that lets the user edit a list of names stored within the document associated with the view. You want the user to be able to remove a name (the selected name in the view) by pressing the Del key. To do so, proceed as follows: </div><div id="ww110884" class="NormalCode">// The list view tracks the event and makes the changes to the document</div><div id="ww111247" class="NormalCode">// through a command</div><div id="ww110885" class="NormalCode">void ListView::handleGadgetEvent(IlvEvent&amp; event) </div><div id="ww110886" class="NormalCode">{ </div><div id="ww110887" class="NormalCode">   if (event.type() == IlvKeyDown) {</div><div id="ww111241" class="NormalCode">      IlvUShort c = event.data();</div><div id="ww111242" class="NormalCode">      if (c == IlvDeleteKey) {</div><div id="ww111243" class="NormalCode">      getNamesDocument()-&gt;doCommand(new RemoveNameCommand(getNamesDocument(),</div><div id="ww111244" class="NormalCode">                                                          getSelectedName()); </div><div id="ww110888" class="NormalCode">      return IlvTrue; </div><div id="ww110889" class="NormalCode">      } </div><div id="ww110890" class="NormalCode">   }</div><div id="ww111245" class="NormalCode">   return IlvStringList::handleGadgetEvent(event); </div><div id="ww110891" class="NormalCode">} </div><div id="ww111472" class="NormalCode">&nbsp;</div><div id="ww110892" class="NormalCode">// Here is the implementation of the command class </div><div id="ww110893" class="NormalCode">class RemoveNameCommand </div><div id="ww110894" class="NormalCode">: public IlvDvCommand </div><div id="ww110895" class="NormalCode">{ </div><div id="ww110896" class="NormalCode">public: </div><div id="ww110897" class="NormalCode">   RemoveNameCommand(NamesDocument* document, const char* name):</div><div id="ww111246" class="NormalCode">   _document(document), _name(name) {} </div><div id="ww110898" class="NormalCode">   virtual void doIt() { _document-&gt;removeName((const char*)_name); } </div><div id="ww110899" class="NormalCode">   virtual void undo() { _document-&gt;insertName((const char*)_name); } </div><div id="ww110900" class="NormalCode">protected: </div><div id="ww110901" class="NormalCode">   NamesDocument* _document; </div><div id="ww110902" class="NormalCode">   IlString _name; </div><div id="ww110903" class="LastNormalCode">}; </div><div id="ww110904" class="Body">This showed how events that occur on a view can be reflected to a view through the use of commands. However, the view still has to be refreshed to reflect this change.</div><div id="ww111491" class="Body">In this sample, the selected name item still has to be removed from the list when the user presses the Del key. To do this, the document notifies its associated views when it removes a name from its list of names. To communicate with its views, the document sends generic messages to its associated views, as shown in section <a href="../UserManuals/howfunctions.56.6.html#ww110723" title="Commands">Commands</a>.</div><div id="ww110905" class="Body">The sample will now be completed: </div><div id="ww110906" class="NormalCode">// The document notifies its views when it removes a name from its</div><div id="ww111504" class="NormalCode">// list of names </div><div id="ww110907" class="NormalCode">void NamesDocument::removeName(const char* name) </div><div id="ww110908" class="NormalCode">{ </div><div id="ww110909" class="NormalCode">   _namesArray.removeName(name); </div><div id="ww110910" class="NormalCode">   notifyViews("RemoveName", 0, name); </div><div id="ww110911" class="NormalCode">}</div><div id="ww111505" class="NormalCode">&nbsp;</div><div id="ww110912" class="NormalCode">// The list view updates its list when the document notifies it that it</div><div id="ww111506" class="NormalCode">// has removed a name from its list. First, the list view class associates</div><div id="ww111513" class="NormalCode">// the RemoveName message with its removeName method. Thus, this method will</div><div id="ww111519" class="NormalCode">// be called when the user notifies its views with the RemoveName message.</div><div id="ww111522" class="NormalCode"> </div><div id="ww110915" class="NormalCode">IlvDvBeginInterface(ListView) </div><div id="ww110916" class="NormalCode">Method1(RemoveName, removeName, const char*, name); </div><div id="ww110917" class="NormalCode">IlvDvEndInterface1(IlvDvListView) </div><div id="ww110918" class="NormalCode">void ListView::removeName(const char* name) </div><div id="ww110919" class="NormalCode">{ </div><div id="ww110920" class="NormalCode">   IlShort index = getPosition(name); </div><div id="ww110921" class="NormalCode">   if (index != (IlShort)-1) { </div><div id="ww110922" class="NormalCode">      remove(index); </div><div id="ww110923" class="NormalCode">      reDraw(); </div><div id="ww110924" class="NormalCode">   } </div><div id="ww106583" class="LastNormalCode">} </div><div id="ww110936" class="Body">For more information on managing events in document views, see samples <span class="code">manager</span> and <span class="code">synedit</span>, both provided in the <span class="code">samples</span> directory.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>