<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>An Example: Dynamic Access</title><link rel="Prev" href="dynamic.11.6.html" title="Previous" /><link rel="Next" href="events.12.1.html" title="Next" /><link rel="StyleSheet" href="css/dynamic.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/dynamic_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/dynamic.11.7.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pE3qZWBVhz4UXivBseVt8Rw" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/dynamic.11.7.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/foundusrfrontcover.html#wwconnect_header">Foundation</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/dynamic.11.1.html#wwconnect_header">Dynamic Modules</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">An Example: Dynamic Access</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww999868" class="Heading1"><span></span>An Example: Dynamic Access</div><div id="ww999305" class="Body">The purpose of this example is to make a graphic class dynamically accessible from a running application.</div><div id="ww998261" class="Body">Let us suppose that we have a class <span class="code">CrossedRectangle</span>, deriving from <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvFilledRectangle.html">IlvFilledRectangle</a></span>, that is displayed as an outlined rectangle with a cross in it. The example is developed in:</div><div id="ww1003242" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/dynamic.11.7.html#ww999946" title="An Example: Dynamic Access">Writing the Sample Module Definition File</a></div><div id="ww1003247" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/dynamic.11.7.html#ww999956" title="An Example: Dynamic Access">Implementing the New Class</a></div><div id="ww1003252" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/dynamic.11.7.html#ww1000149" title="An Example: Dynamic Access">Loading and Registration of the Example</a></div><div id="ww1003257" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/dynamic.11.7.html#ww1001310" title="An Example: Dynamic Access">Registration Macros</a></div><div id="ww1003262" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/dynamic.11.7.html#ww1001795" title="An Example: Dynamic Access">Adding the Sample Class to a Dynamic Module</a></div><div id="ww999946" class="Subhead"><span></span>Writing the Sample Module Definition File </div><div id="ww1003238" class="Body">First, you have to make sure that Rogue Wave&nbsp;Views properly loads the code of this class when a data file refers to its name, thus allowing the corresponding module to be implicitly loaded. </div><div id="ww1003239" class="Body">To that end, we have to write a module definition file, which in our example will be very simple since we only have one class.</div><div id="ww1003520" class="Body">Here is the content of an appropriate module definition file for this module. Since we have only one class, whose root base class is <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span>, the definition file is as follows:</div><div id="ww1004893" class="NormalCode">&lt;?xml version = "1.0"?&gt;</div><div id="ww1003522" class="NormalCode">&lt;module name="correct" version="1.0"&gt;</div><div id="ww1003517" class="NormalCode">&lt;class name = "CrossedRectangle" rootClass = "IlvGraphic"/&gt;</div><div id="ww999947" class="LastNormalCode">&lt;/module&gt;</div><div id="ww999954" class="Body">We could have added many other classes to this module definition file, even classes that do not inherit from <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span>. You can add classes to the same module in an incremental way.</div><div id="ww999956" class="Subhead"><span></span>Implementing the New Class </div><div id="ww1002726" class="Body">Once the module definition file is written, we have to do some more work to implement this new class. The specifications are quite simple:</div><div id="ww999958" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Create a filled rectangle that displays a cross inside a frame.</div><div id="ww999959" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Make sure that this new class is persistent.</div><div id="ww999960" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Add this class to a dynamic module.</div><div id="ww999953" class="Body">Although you are probably already familiar with the first two steps, we provide the corresponding code below. The last point represents the most difficult part. We must need to know how we are going to proceed to register our class properly. Unfortunately, the macro <span class="code">IlvRegisterClass</span> does not work in a dynamic loading context, or at least not in a portable way. Rogue Wave&nbsp;Views provides a few macros very close to the ones that you are already familiar with for solving this problem. We will discuss them after you see the code for the <span class="code">CrossedRectangle</span> class, which is given below.</div><div id="ww1005943" class="NormalCode">#include &lt;ilviews/graphics/rectangl.h&gt;</div><div id="ww1005944" class="NormalCode"> </div><div id="ww1005945" class="NormalCode">class CrossedRectangle</div><div id="ww1005946" class="NormalCode">: public IlvFilledRectangle {</div><div id="ww1005947" class="NormalCode">public:</div><div id="ww1005948" class="NormalCode">    CrossedRectangle(IlvDisplay* display,</div><div id="ww1005949" class="NormalCode">                const IlvRect&amp; size, IlvPalette* pal=0)</div><div id="ww1005950" class="NormalCode">    : IlvFilledRectangle(display, size, pal)</div><div id="ww1005951" class="NormalCode">    {}</div><div id="ww1005952" class="NormalCode">    virtual void draw(IlvPort* dst, const IlvTransformer* t = 0,</div><div id="ww1005953" class="NormalCode">                      const IlvRegion* clip = 0) const;</div><div id="ww1005954" class="NormalCode">    DeclareTypeInfoRO();</div><div id="ww1005955" class="NormalCode">    DeclareIOConstructors(CrossedRectangle);</div><div id="ww1005956" class="NormalCode">};</div><div id="ww1005957" class="NormalCode">&nbsp;</div><div id="ww1005958" class="NormalCode">// Copy constructor</div><div id="ww1005959" class="NormalCode">CrossedRectangle::CrossedRectangle(const CrossedRectangle&amp; source)</div><div id="ww1005960" class="NormalCode">: IlvFilledRectangle(source)</div><div id="ww1005961" class="NormalCode">{}</div><div id="ww1005962" class="NormalCode"> </div><div id="ww1005963" class="NormalCode">// Read constructor</div><div id="ww1005964" class="NormalCode">CrossedRectangle::CrossedRectangle(IlvInputFile&amp; is,</div><div id="ww1005965" class="NormalCode">                                   IlvPalette* pal)</div><div id="ww1005966" class="NormalCode">: IlvFilledRectangle(is, pal)</div><div id="ww1005967" class="NormalCode">{}</div><div id="ww1005968" class="NormalCode"> </div><div id="ww1005969" class="NormalCode">void</div><div id="ww1005970" class="NormalCode">CrossedRectangle::draw(IlvPort* dst, const IlvTransformer* t,</div><div id="ww1005971" class="NormalCode">                       const IlvRegion* clip) const</div><div id="ww1005972" class="NormalCode">{</div><div id="ww1005973" class="NormalCode">    if (clip)</div><div id="ww1005974" class="NormalCode">        _palette-&gt;setClip(clip);</div><div id="ww1005975" class="NormalCode">    IlvRect r = _drawrect;</div><div id="ww1005976" class="NormalCode">    if (t)</div><div id="ww1005977" class="NormalCode">        t-&gt;apply(r);</div><div id="ww1005978" class="NormalCode">    dst-&gt;drawRectangle(_palette, r);</div><div id="ww1005979" class="NormalCode">    dst-&gt;drawLine(_palette, r.upperLeft(), r.lowerRight());</div><div id="ww1005980" class="NormalCode">    dst-&gt;drawLine(_palette, r.upperRight(), r.lowerLeft());</div><div id="ww1005981" class="NormalCode">    if (clip)</div><div id="ww1005982" class="NormalCode">        _palette-&gt;setClip();</div><div id="ww1005983" class="NormalCode">}</div><div id="ww1005984" class="NormalCode"> </div><div id="ww1000972" class="LastNormalCode">IlvPredefinedIOMembers(CrossedRectangle)</div><div id="ww998417" class="Body">The <span class="code">draw</span> method is straightforward.</div><div id="ww1000973" class="Body">You can see that, as required, this class contains a copy constructor and persistence-related methods. (It has no <span class="code">write</span> method since we do not have any information to save, and so we used the <span class="code">DeclareTypeInfoRO</span> macro in the class declaration).</div><div id="ww1000124" class="Body">We have already addressed two of the three points for implementing the new class.</div><div id="ww1002741" class="Body">The usual way to register this class with the Rogue Wave&nbsp;Views persistence mechanism would be to use the well-known statement:</div><div id="ww998337" class="LastNormalCode">IlvRegisterClass(CrossedRectangle, IlvFilledRectangle);</div><div id="ww998429" class="Body">which appears outside the body of any function.</div><div id="ww998443" class="Body">If an application links with that code, it will be able to manipulate, save, and read instances of the class <span class="code">CrossedRectangle</span>. Remember, however, that you want to make the <span class="code">CrossedRectangle</span> class known to existing applications that were not aware of it when they were developed so that they can read data files generated by applications in which this class is defined. To do so, you have to plug this class into a dynamic module, and you cannot use the preceding macro for this purpose.</div><div id="ww1000149" class="Subhead"><span></span>Loading and Registration of the Example </div><div id="ww1002734" class="Body">It is important to understand what happens when a module is loaded and what registration actually does:</div><div id="ww1000150" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>When a module is loaded, its constructor is called.</div><div id="ww1000151" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Registration is both the declaration of class-level variables that store class-level attributes and function calls that actually update these variables.</div><div id="ww1000152" class="Body">With the dynamic modules feature, Rogue Wave&nbsp;Views provides an alternate form of the <span class="code">IlvRegisterXXXClass</span> macros, which are used in many places (in <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span> and <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvNamedProperty.html">IlvNamedProperty</a></span> subclasses, for example). This set of macros separates the declaration part of the registration from its definition.</div><div id="ww999889" class="Body">The name of the macro used for the <span class="bold">declarative</span> part of the registration is similar to <span class="code">IlvRegisterXXXClass</span>, except that <span class="code">IlvRegister</span> is replaced by <span class="code">IlvPreRegister</span>. The second parameter of <span class="code">IlvRegisterXXXClass</span> is dropped. This macro call must appear outside the body of any function (it declares only class-level variables).</div><div id="ww1000176" class="Body">The name of the macro used for the <span class="bold">definition</span> part of the registration is similar to <span class="code">IlvRegisterXXXClass</span>, except that <span class="code">IlvRegister</span> is replaced by <span class="code">IlvPostRegister</span>. The second parameter of <span class="code">IlvRegisterXXXClass</span> remains. Thus, macro calls must appear inside the body of a function that must be called to actually perform the proper registration (it does call code to register new classes).</div><div id="ww1000197" class="Body">In our example, to register the graphic class, we have to use both the macros <span class="code">IlvPreRegisterClass</span> (outside the body of any function) and <span class="code">IlvPostRegisterClass</span> (inside the body of a function).</div><div id="ww1001310" class="Subhead"><span></span>Registration Macros </div><div id="ww1002744" class="Body">Below is a list of the macros that you must use for registering most of the Rogue Wave&nbsp;Views classes that are persistent (<span class="code">c</span> indicates the class name that is being registered, and <span class="code">s</span> indicates its parent class name):</div><div class="ww_skin_page_overflow"><table class="ShadedHeadLeft" style="width: 457.2929763779524pt" cellspacing="0" summary=""><caption class="Tabletitle" style="caption-side: top"><div id="ww1003125" class="Tabletitle"><span style="color: #000000; font-family: &quot;Times New Roman&quot;; font-size: 9.0pt; font-style: italic; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">Registration Macros in Dynamic Modules&nbsp;</span></div></caption><tr><td style="background-color: #B2B2B2; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt; width: 83.9624881889764pt"><div id="ww1003229" class="CellHeading" style="color: #000000; font-family: Helvetica; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; margin-bottom: 0.0pt; margin-left: 0pt; text-indent: 0pt; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: Arial; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline">Class Name</span></div></td><td style="background-color: #B2B2B2; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt; width: 177.411968503937pt"><div id="ww1003231" class="Default"><span style="color: #000000; font-family: Arial; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline">Static Registration Macros</span></div></td><td style="background-color: #B2B2B2; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt; width: 195.918519685039pt"><div id="ww1003233" class="Default"><span style="color: #000000; font-family: Arial; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: bold; text-transform: none; vertical-align: baseline">Registration Macros in Dynamic Modules</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt; vertical-align: top"><div id="ww1003137" class="CellBody" style="color: #000000; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003139" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003141" class="Default"><span class="code">IlvPreRegisterClass(c);</span></div><div id="ww1003142" class="Default"><span class="code">IlvPostRegisterClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003144" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvNamedProperty.html">IlvNamedProperty</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003146" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterPropertyClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003148" class="Default"><span class="code">IlvPreRegisterPropertyClass(c);</span></div><div id="ww1003149" class="Default"><span class="code">IlvPostRegisterPropertyClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003151" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvView.html">IlvView</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003153" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterViewClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003155" class="Default"><span class="code">IlvPreRegisterViewClass(c);</span></div><div id="ww1003156" class="Default"><span class="code">IlvPostRegisterViewClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003172" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGadgetItem.html">IlvGadgetItem</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003174" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterGadgetItemClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003176" class="Default"><span class="code">IlvPreRegisterGadgetItemClass(c);</span></div><div id="ww1003177" class="Default"><span class="code">IlvPostRegisterGadgetItemClass(c, s);</span></div><div id="ww1003178" class="Default" style="color: #000000; font-family: Helvetica; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span style="color: #000000; font-family: Arial; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline">For details on gadgets, refer to the Gadgets documentation.</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003187" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvNotebookPage.html">IlvNotebookPage</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003189" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterNotebookPageClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003191" class="Default"><span class="code">IlvPreRegisterNotebookPageClass(c);</span></div><div id="ww1003192" class="Default"><span class="code">IlvPostRegisterNotebookPageClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003194" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvSmartSet.html">IlvSmartSet</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003196" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterSmartSetClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003198" class="Default"><span class="code">IlvPreRegisterSmartSetClass(c);</span></div><div id="ww1003199" class="Default"><span class="code">IlvPostRegisterSmartSetClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003201" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppprotos/classIlvGroup.html">IlvGroup</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003203" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterGroupClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003205" class="Default"><span class="code">IlvPreRegisterGroupClass(c);</span></div><div id="ww1003206" class="Default"><span class="code">IlvPostRegisterGroupClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003208" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppprotos/classIlvGroupNode.html">IlvGroupNode</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003210" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterGroupNodeClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003212" class="Default"><span class="code">IlvPreRegisterGroupNodeClass(c);</span></div><div id="ww1003213" class="Default"><span class="code">IlvPostRegisterGroupNodeClass(c, s);</span></div></td></tr><tr><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003215" class="Default" style="color: #000000; font-family: Courier; font-size: 8.5pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="ClassName"><a href="../RefMan/refcppprotos/classIlvUserAccessor.html">IlvUserAccessor</a></span> </div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003217" class="Default" style="color: #000000; font-family: Courier; font-size: 9.0pt; font-style: normal; font-variant: normal; font-weight: normal; text-transform: none; vertical-align: baseline"><span class="code">IlvRegisterUserAccessorClass(c, s);</span></div></td><td style="border-bottom-color: #000000; border-bottom-style: solid; border-bottom-width: 0.5pt; border-left-color: #000000; border-left-style: solid; border-left-width: 0.5pt; border-right-color: #000000; border-right-style: solid; border-right-width: 0.5pt; border-top-color: #000000; border-top-style: solid; border-top-width: 0.5pt; padding-bottom: 4pt; padding-left: 3pt; padding-right: 3pt; padding-top: 6pt"><div id="ww1003219" class="Default"><span class="code">IlvPreRegisterUserAccessorClass(c);</span></div><div id="ww1003220" class="Default"><span class="code">IlvPostRegisterUserAccessorClass(c, s);</span></div></td></tr></table></div><div id="ww1001398" class="Body">Because we are dealing with a subclass of <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span>, the <span class="code">IlvPreRegisterClass</span> and <span class="code">IlvPostRegisterClass</span> macros are all we need to complete the source code of our module.</div><div id="ww1001795" class="Subhead"><span></span>Adding the Sample Class to a Dynamic Module </div><div id="ww1002749" class="Body">Here is the code that we have to add to the definition of the <span class="code">CrossedRectangle</span> class to make the final source code compilable as a Rogue Wave&nbsp;Views dynamic module:</div><div id="ww1001798" class="NormalCode">#include &lt;ilviews/base/modules.h&gt;</div><div id="ww1001799" class="NormalCode">&nbsp;</div><div id="ww1001800" class="NormalCode">IlvPreRegisterClass(CrossedRectangle);</div><div id="ww1001840" class="NormalCode">&nbsp;</div><div id="ww1001856" class="NormalCode">class MyModule</div><div id="ww1001857" class="NormalCode">: public IlvModule</div><div id="ww1001858" class="NormalCode">{</div><div id="ww1001859" class="NormalCode">public:</div><div id="ww1001860" class="NormalCode">    MyModule(void*)</div><div id="ww1001879" class="NormalCode">    {</div><div id="ww1001880" class="NormalCode">        IlvPostRegisterClass(CrossedRectangle, IlvFilledRectangle);</div><div id="ww1001881" class="NormalCode">    }</div><div id="ww1001864" class="NormalCode">};</div><div id="ww1001865" class="NormalCode">&nbsp;</div><div id="ww1001866" class="LastNormalCode">ILVINITIALIZEMODULE(MyModule);</div><div id="ww1001889" class="Body">Note that you can add this code to a <span class="code">#if defined()/#else/#endif</span> precompiler block, with the regular</div><div id="ww1001975" class="LastNormalCode">IlvRegisterClass(CrossedRectangle, IlvFilledRectangle);</div><div id="ww1001976" class="Body">in the <span class="code">#else</span> part of <span class="code">if</span>. You will then be able to compile your code as a regular static object file or as a dynamic module:</div><div id="ww1001911" class="NormalCode">#if defined(MAKE_A_MODULE)</div><div id="ww1001928" class="NormalCode">#include &lt;ilviews/base/modules.h&gt;</div><div id="ww1001912" class="NormalCode">&nbsp;</div><div id="ww1001913" class="NormalCode">IlvPreRegisterClass(CrossedRectangle);</div><div id="ww1001914" class="NormalCode">&nbsp;</div><div id="ww1001915" class="NormalCode">class MyModule</div><div id="ww1001916" class="NormalCode">: public IlvModule</div><div id="ww1001917" class="NormalCode">{</div><div id="ww1001918" class="NormalCode">public:</div><div id="ww1001919" class="NormalCode">    MyModule(void*)</div><div id="ww1001920" class="NormalCode">    {</div><div id="ww1001921" class="NormalCode">        IlvPostRegisterClass(CrossedRectangle, IlvFilledRectangle);</div><div id="ww1001922" class="NormalCode">    }</div><div id="ww1001923" class="NormalCode">};</div><div id="ww1001924" class="NormalCode">&nbsp;</div><div id="ww1001925" class="NormalCode">ILVINITIALIZEMODULE(MyModule);</div><div id="ww1001931" class="NormalCode">#else  /* DONT_MAKE_A_MODULE */</div><div id="ww1001933" class="NormalCode">IlvRegisterClass(CrossedRectangle, IlvFilledRectangle);</div><div id="ww1001932" class="LastNormalCode">#endif /* DONT_MAKE_A_MODULE */</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>