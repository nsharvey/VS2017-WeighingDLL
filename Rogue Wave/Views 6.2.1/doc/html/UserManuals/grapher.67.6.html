<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Creating a Custom Grapher link</title><link rel="Prev" href="grapher.67.5.html" title="Previous" /><link rel="Next" href="grapher.67.7.html" title="Next" /><link rel="StyleSheet" href="css/grapher.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/grapher_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/grapher.67.6.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pN9xMdBq3TNYto5M0JdPS2eQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/grapher.67.6.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgfrontcover.html#wwconnect_header">2D Graphics</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgpart2.html#ww144909">Grapher</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/grapher.67.1.html#wwconnect_header">Features of the Grapher Package</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/grapher.67.3.html#wwconnect_header">Grapher Links</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Creating a Custom Grapher link</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww124941" class="Heading2"><span></span>Creating a Custom Grapher link</div><div id="ww117287" class="Body">In this section, <span class="ClassName"><a href="../RefMan/refcppgrapher/classIlvLinkImage.html">IlvLinkImage</a></span> is subclassed to create a grapher link that meets the following specifications:</div><div id="ww122274" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The link is always drawn as a straight line between its two nodes.</div><div id="ww122276" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The start point is either defined by a connection pin or located at the center of the start node.</div><div id="ww122275" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The end point is such that the link stays perpendicular to the face of the end node closest to the start point. If this cannot be done, the end point is located on the closest corner of the node bounding box.</div><div id="ww122285" class="Body">The link is drawn the same way as in the base class <span class="ClassName"><a href="../RefMan/refcppgrapher/classIlvLinkImage.html">IlvLinkImage</a></span>. Therefore, the corresponding methods inherited from <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvGraphic.html">IlvGraphic</a></span> are left unchanged. Also, there are only two points defining the shape of the link (the two end points, and no intermediate points). There are two possibilities for defining the link: overloading the <span class="ClassName"><a href="../RefMan/refcppgrapher/classIlvLinkImage.html">IlvLinkImage</a></span><span class="code">::getLinkPoints</span> method or the <span class="ClassName"><a href="../RefMan/refcppgrapher/classIlvLinkImage.html">IlvLinkImage</a></span><span class="code">::computePoints</span> method. The second alternative has been chosen for this example:</div><div id="ww122288" class="NormalCode">void</div><div id="ww122290" class="NormalCode">MyLink::computePoints(IlvPoint&amp; src,</div><div id="ww122291" class="NormalCode">                      IlvPoint&amp; dst,</div><div id="ww122292" class="NormalCode">                      const IlvTransformer* t) const</div><div id="ww122344" class="NormalCode">{</div><div id="ww122349" class="NormalCode">    //== [1] ==</div><div id="ww122345" class="NormalCode">    IlvGrapherPin* pin = IlvGrapherPin::Get(getFrom());</div><div id="ww122346" class="NormalCode">    if (!pin || !pin-&gt;getLinkLocation(getFrom(),this,t,src)) {</div><div id="ww122297" class="NormalCode">        IlvRect bbox;</div><div id="ww122298" class="NormalCode">        getFrom()-&gt;boundingBox(bbox,t);</div><div id="ww122299" class="NormalCode">        src.move(bbox.centerx(),bbox.centery());</div><div id="ww122351" class="NormalCode">    }</div><div id="ww122352" class="NormalCode">&nbsp;</div><div id="ww122356" class="NormalCode">    //== [2] ==</div><div id="ww122353" class="NormalCode">    IlvRect toBBox;</div><div id="ww122303" class="NormalCode">    getTo()-&gt;boundingBox(toBBox,t);</div><div id="ww122304" class="NormalCode">    if (src.x()&lt;toBBox.x()) {</div><div id="ww122305" class="NormalCode">        if (src.y() &lt; toBBox.y()) // Upper left quadrant</div><div id="ww122306" class="NormalCode">            dst.move(toBBox.x(),</div><div id="ww122307" class="NormalCode">                     toBBox.y());</div><div id="ww122308" class="NormalCode">        else if (src.y() &gt;= toBBox.bottom()) // Lower left quadrant</div><div id="ww122309" class="NormalCode">            dst.move(toBBox.x(),</div><div id="ww122310" class="NormalCode">                     toBBox.y()+toBBox.h()-1);</div><div id="ww122311" class="NormalCode">        else // Left quadrant</div><div id="ww122312" class="NormalCode">            dst.move(toBBox.x(),</div><div id="ww122313" class="NormalCode">                     src.y());</div><div id="ww122314" class="NormalCode">    } else if (src.x()&gt;=toBBox.right()) {</div><div id="ww122315" class="NormalCode">        </div><div id="ww122316" class="NormalCode">        if (src.y() &lt; toBBox.y()) // Upper right quadrant</div><div id="ww122317" class="NormalCode">            dst.move(toBBox.x()+toBBox.w()-1,</div><div id="ww122318" class="NormalCode">                     toBBox.y());</div><div id="ww122319" class="NormalCode">        else if (src.y() &gt;= toBBox.bottom()) // Lower right quadrant</div><div id="ww122320" class="NormalCode">            dst.move(toBBox.x()+toBBox.w()-1,</div><div id="ww122321" class="NormalCode">                     toBBox.y()+toBBox.h()-1);</div><div id="ww122322" class="NormalCode">        else // Right quadrant</div><div id="ww122323" class="NormalCode">            dst.move(toBBox.x()+toBBox.w()-1,</div><div id="ww122324" class="NormalCode">                     src.y());</div><div id="ww122325" class="NormalCode">    } else {</div><div id="ww122326" class="NormalCode">        if (src.y() &lt; toBBox.y()) // Upper quadrant</div><div id="ww122327" class="NormalCode">            dst.move(src.x(),</div><div id="ww122328" class="NormalCode">                     toBBox.y());</div><div id="ww122329" class="NormalCode">        else if (src.y() &gt;= toBBox.bottom()) // Lower quadrant</div><div id="ww122330" class="NormalCode">            dst.move(src.x(),</div><div id="ww122331" class="NormalCode">                     toBBox.y()+toBBox.h()-1);</div><div id="ww122332" class="NormalCode">        else // src inside toBBox</div><div id="ww122333" class="NormalCode">            dst.move(toBBox.centerx(),toBBox.centery());</div><div id="ww122334" class="NormalCode">    }</div><div id="ww122335" class="LastNormalCode">}</div><div id="ww122357" class="Body">In the first part (<span class="code">[1]</span>) of the code, a verification is made to see whether the link is attached to a connection pin defined on its start node. If this is not the case, the center of the bounding box of this node is taken.</div><div id="ww122364" class="Body">Once the location of the start point has been computed, the position of the start point with respect to the bounding box of the end node is verified (<span class="code">[2]</span>). There are nine possible cases (the eight quadrants defined by <span class="code">toBBox</span>, plus the case where the start point is inside <span class="code">toBBox</span>), each defining a unique location.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>