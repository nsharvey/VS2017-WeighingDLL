<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>View Hooks</title><link rel="Prev" href="managers-advanced.64.2.html" title="Previous" /><link rel="Next" href="managers-advanced.64.4.html" title="Next" /><link rel="StyleSheet" href="css/managers-advanced.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/managers-advanced_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/managers-advanced.64.3.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pspNV6b6mX14_002bxWN_002fGoTngQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/managers-advanced.64.3.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgfrontcover.html#wwconnect_header">2D Graphics</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgpart1.html#ww144909">Managers</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/managers-advanced.64.1.html#wwconnect_header">Advanced Manager Features</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">View Hooks</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww660251" class="Heading1"><span></span>View Hooks</div><div id="ww659664" class="Body">Manager view hooks are part of a mechanism allowing the application to be notified when certain actions are performed on or by the manager. This can be used for various reasons such as monitoring the contents of a manager, performing additional drawings when the manager redraws its graphic objects, or taking an action when the transformer of a manager view changes.   </div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww667721" class="Note"><span class="flag">Note:&nbsp;</span>Another notification mechanism is described in section <a href="../UserManuals/managers-advanced.64.2.html#ww663260" title="Observers">Observers</a>.</div></td></tr></table></div><div id="ww659668" class="Body">This section is divided as follows:</div><div id="ww659672" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-advanced.64.3.html#ww659683" title="View Hooks">Manager View Hooks</a></div><div id="ww659676" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-advanced.64.3.html#ww659729" title="View Hooks">Example: Monitoring the Number of Objects in a Manager</a></div><div id="ww659680" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../UserManuals/managers-advanced.64.3.html#ww659760" title="View Hooks">Example: Maintaining a Scale Displayed With No Transformation</a></div><div id="ww659683" class="Subhead"><span></span>Manager View Hooks</div><div id="ww659685" class="Body">A manager view hook is an instance of the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html">IlvManagerViewHook</a></span> class. To be active, it must be associated with a manager view. Each manager view handles a list of view hooks. To connect and disconnect view hooks from a manager view, use the following <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span> member functions:</div><div id="ww659688" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::installViewHook</span></div><div id="ww659691" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::removeViewHook</span></div><div id="ww659692" class="Body">The <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html">IlvManagerViewHook</a></span> class has a number of virtual member functions that are automatically called by the manager when certain predefined operations occur. Here is the list of these member functions and the circumstances under which they are called:</div><div id="ww659696" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#ab5c727cf166a874398a54c0a4e3bf8af">beforeDraw</a></span></div><div id="ww659697" class="IndentedL1">Called before the manager draws in the manager view. Applications often overload this member function to perform additional drawings before the manager displays its graphic objects.</div><div id="ww659700" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a451f28e4f4e6e550606954de9cd763eb">afterDraw</a></span></div><div id="ww659701" class="IndentedL1">Called after the manager has drawn in the manager view. Applications often overload this member function to perform additional drawings on top of the graphic objects displayed by the manager.</div><div id="ww659704" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a6afeed7a2709292869757e78b5061b05">afterExpose</a></span></div><div id="ww659705" class="IndentedL1">Called after the manager has received an Expose event in the view.</div><div id="ww659708" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#adc90bd3fb91b41f8af1a9463bcfd3e97">interactorChanged</a></span></div><div id="ww659709" class="IndentedL1">Called when the interactor of the manager view changes.</div><div id="ww659712" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a8da1b7498d5ede7cc42781a0d030ec59">transformerChanged</a></span></div><div id="ww659713" class="IndentedL1">Called when the transformer of the manager view changes.</div><div id="ww659716" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a8fe8cd2d56e5d4266be97367a113c374">viewResized</a></span></div><div id="ww659717" class="IndentedL1">Called when the manager view is resized.</div><div id="ww659720" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#aa5373e2e6ff35210debc42b91173709d">viewRemoved</a></span></div><div id="ww659721" class="IndentedL1">Called when the manager view is detached from the manager.</div><div id="ww659724" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a95f032f96518e715501ba3ddaf427da7">contentsChanged</a></span></div><div id="ww659725" class="IndentedL1">Called when the contents of the manager change, that is, graphic objects have been added, removed, or their geometry has changed.</div><div id="ww659726" class="Body">When an event occurs in view, the manager calls the corresponding member functions of all the hooks attached to this view.</div><div id="ww659729" class="Subhead"><span></span>Example: Monitoring the Number of Objects in a Manager</div><div id="ww659731" class="Body">The following code is a subclass of <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html">IlvManagerViewHook</a></span> that displays in an <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvTextField.html">IlvTextField</a></span> the number of objects contained in the manager:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww670987" class="CodeInTable">class DisplayObjectsHook </div><div id="ww670988" class="CodeInTable">: public IlvManagerViewHook</div><div id="ww670989" class="CodeInTable">{</div><div id="ww670990" class="CodeInTable">public:</div><div id="ww670991" class="CodeInTable">    DisplayObjectsHook(IlvManager* manager,</div><div id="ww670992" class="CodeInTable">                       IlvView* view,</div><div id="ww670993" class="CodeInTable">                       IlvTextField* textfield)</div><div id="ww670994" class="CodeInTable">    : IlvManagerViewHook(manager, view), </div><div id="ww670995" class="CodeInTable">      _textfield(textfield) </div><div id="ww670996" class="CodeInTable">      {}</div><div id="ww670997" class="CodeInTable">    virtual void contentsChanged();</div><div id="ww670998" class="CodeInTable">protected:</div><div id="ww670999" class="CodeInTable">    IlvTextField* _textfield;    </div><div id="ww671000" class="CodeInTable">};</div><div id="ww671001" class="CodeInTable">&nbsp;</div><div id="ww671002" class="CodeInTable">&nbsp;</div><div id="ww671003" class="CodeInTable">void DisplayObjectsHook::contentsChanged()</div><div id="ww671004" class="CodeInTable">{</div><div id="ww671005" class="CodeInTable">    IlvUInt count = getManager()-&gt;getCardinal();</div><div id="ww671006" class="CodeInTable">    _textfield-&gt;setValue((IlvInt)count, IlTrue);</div><div id="ww671007" class="CodeInTable">}</div><div id="ww670908" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww659760" class="Subhead"><span></span>Example: Maintaining a Scale Displayed With No Transformation</div><div id="ww659761" class="Body">This part presents an example of subtyping an <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html">IlvManagerViewHook</a></span>. At first there is a map and a circular scale used as a compass card. Then, because of hooks, the manager translates and zooms the view without affecting the compass card. The <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a451f28e4f4e6e550606954de9cd763eb">afterDraw</a></span> and <span class="MethodName"><a href="../RefMan/refcppmanager/classIlvManagerViewHook.html#a8da1b7498d5ede7cc42781a0d030ec59">transformerChanged</a></span> member functions are redefined to redraw the scale to its original dimensions and location.</div><div id="ww659766" class="NormalCode">static void ILVCALLBACK</div><div id="ww659767" class="NormalCode">Quit(IlvView* view, IlAny)</div><div id="ww659768" class="NormalCode">{</div><div id="ww659769" class="NormalCode">    delete view-&gt;getDisplay();</div><div id="ww659770" class="NormalCode">    IlvExit(0);</div><div id="ww659771" class="NormalCode">}</div><div id="ww659772" class="NormalCode">&nbsp;</div><div id="ww659773" class="NormalCode">char* labels[] = {“N”, “O”, “S”, “E”, ““};</div><div id="ww659774" class="NormalCode">&nbsp;</div><div id="ww659775" class="NormalCode">class ExHook</div><div id="ww659776" class="NormalCode">: public IlvManagerViewHook</div><div id="ww659777" class="NormalCode">{</div><div id="ww659778" class="NormalCode">public :</div><div id="ww659779" class="NormalCode">    ExHook(IlvManager* m, IlvView* v, const IlvRect* psize=0)</div><div id="ww659780" class="NormalCode">    : IlvManagerViewHook(m, v)</div><div id="ww659781" class="NormalCode">    {</div><div id="ww659782" class="NormalCode">        _cirscale = new IlvCircularScale(m-&gt;getDisplay(),</div><div id="ww659783" class="NormalCode">                                         IlvRect(30, 30, 100, 100),</div><div id="ww659784" class="NormalCode">                                         “%.4f”,</div><div id="ww659785" class="NormalCode">                                         0, 100, 90., 360.);</div><div id="ww659786" class="NormalCode">        _cirscale-&gt;setLabels(5, (const char* const*)labels);</div><div id="ww659787" class="NormalCode">    }</div><div id="ww659788" class="NormalCode">    virtual void afterDraw(IlvPort*,</div><div id="ww659789" class="NormalCode">                           const IlvTransformer* = 0,</div><div id="ww659790" class="NormalCode">                           const IlvRegion* = 0,</div><div id="ww659791" class="NormalCode">                           const IlvRegion* = 0);</div><div id="ww659792" class="NormalCode">    virtual void transformerChanged(const IlvTransformer*,</div><div id="ww659793" class="NormalCode">                                    const IlvTransformer*);</div><div id="ww659794" class="NormalCode">protected :</div><div id="ww659795" class="NormalCode">    IlvRect _size;</div><div id="ww659796" class="NormalCode">    IlvCircularScale* _cirscale;</div><div id="ww659797" class="NormalCode">};</div><div id="ww659798" class="NormalCode">void ExHook::afterDraw(IlvPort* dst,</div><div id="ww659799" class="NormalCode">                       const IlvTransformer*,</div><div id="ww659800" class="NormalCode">                       const IlvRegion*,</div><div id="ww659801" class="NormalCode">                       const IlvRegion* clip)</div><div id="ww659802" class="NormalCode">{</div><div id="ww659803" class="NormalCode">    if (getManager()-&gt;isInvalidating())</div><div id="ww659804" class="NormalCode">        getManager()-&gt;reDrawViews();</div><div id="ww659805" class="NormalCode">    _cirscale-&gt;draw(dst, 0, 0 /*clip*/);</div><div id="ww659806" class="NormalCode">    if (dst-&gt;isABitmap())</div><div id="ww659807" class="NormalCode">        _cirscale-&gt;draw(getView(), 0, 0);</div><div id="ww659808" class="NormalCode">}</div><div id="ww659809" class="NormalCode">void ExHook::transformerChanged(const IlvTransformer* current,</div><div id="ww659810" class="NormalCode">                                const IlvTransformer* old)</div><div id="ww659811" class="NormalCode">{   </div><div id="ww659812" class="NormalCode">    IlvRect bbox;</div><div id="ww659813" class="NormalCode">    _cirscale-&gt;boundingBox(bbox);</div><div id="ww659814" class="NormalCode">    if (old) old-&gt;inverse(bbox);</div><div id="ww659815" class="NormalCode">    if (current) current-&gt;apply(bbox);</div><div id="ww659816" class="NormalCode">    if (!getManager()-&gt;isInvalidating())</div><div id="ww659817" class="NormalCode">    {</div><div id="ww659818" class="NormalCode">        getManager()-&gt;initReDraws();</div><div id="ww659819" class="NormalCode">        getManager()-&gt;invalidateRegion(getView(), bbox);</div><div id="ww659820" class="NormalCode">    }</div><div id="ww659821" class="NormalCode">}</div><div id="ww659822" class="NormalCode">&nbsp;</div><div id="ww659823" class="NormalCode">static void</div><div id="ww659824" class="NormalCode">SetDoubleBuffering(IlvManager* m,</div><div id="ww659825" class="NormalCode">                   IlvView* v,</div><div id="ww659826" class="NormalCode">                   IlvEvent&amp;,</div><div id="ww659827" class="NormalCode">                   IlAny)</div><div id="ww659828" class="NormalCode">{</div><div id="ww659829" class="NormalCode">    m-&gt;setDoubleBuffering(v, !m-&gt;isDoubleBuffering(v));</div><div id="ww659830" class="NormalCode">}</div><div id="ww659831" class="NormalCode">&nbsp;</div><div id="ww659832" class="NormalCode">int</div><div id="ww659833" class="NormalCode">main(int argc, char* argv[])</div><div id="ww659834" class="NormalCode">{</div><div id="ww659835" class="NormalCode">    IlvDisplay* display = new IlvDisplay(“Example”, ““, argc, argv);</div><div id="ww659836" class="NormalCode">    if (!display || display-&gt;isBad())</div><div id="ww659837" class="NormalCode">    {</div><div id="ww659838" class="NormalCode">       IlvFatalError(“Can’t open display”);</div><div id="ww659839" class="NormalCode">       IlvExit(-1);</div><div id="ww659840" class="NormalCode">    }					 </div><div id="ww659841" class="NormalCode">&nbsp;</div><div id="ww659842" class="NormalCode">    IlvView* view = new IlvView(display, “ExMan”, “Manager”,</div><div id="ww659843" class="NormalCode">                                IlvRect(0, 0, 400, 400));</div><div id="ww659844" class="NormalCode">    view-&gt;setDestroyCallback(Quit);				</div><div id="ww659845" class="NormalCode">    IlvManager* manager = new IlvManager(display);</div><div id="ww659846" class="NormalCode">    manager-&gt;addView(view);</div><div id="ww659847" class="NormalCode">    manager-&gt;addAccelerator(SetDoubleBuffering, IlvKeyUp, ‘b’);</div><div id="ww659848" class="NormalCode">    </div><div id="ww659849" class="NormalCode">    // Description of a map</div><div id="ww659850" class="NormalCode">    manager-&gt;read(“../hook.ilv”);</div><div id="ww659851" class="NormalCode">&nbsp;</div><div id="ww659852" class="NormalCode">    // Instantiation of the hook class</div><div id="ww659853" class="NormalCode">    ExHook* pHook = new ExHook(manager, view);</div><div id="ww659854" class="NormalCode">&nbsp;</div><div id="ww659855" class="NormalCode">    // Connect the hook to the manager view</div><div id="ww659856" class="NormalCode">    manager-&gt;installViewHook(pHook);</div><div id="ww659857" class="NormalCode">    manager-&gt;setInteractor(new IlvSelectInteractor(manager, view));</div><div id="ww659858" class="NormalCode">&nbsp;</div><div id="ww659859" class="NormalCode">    IlvMainLoop();</div><div id="ww659860" class="LastNormalCode">}</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>