<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Optimizing Drawing Tasks</title><link rel="Prev" href="managers-intro.62.6.html" title="Previous" /><link rel="Next" href="managers-intro.62.8.html" title="Next" /><link rel="StyleSheet" href="css/managers-intro.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/managers-intro_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/managers-intro.62.7.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="ptXJKR5nmOMooWsPQhOMPtA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/managers-intro.62.7.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgfrontcover.html#wwconnect_header">2D Graphics</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/twodgpart1.html#ww144909">Managers</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/managers-intro.62.1.html#wwconnect_header">Basic Manager Features</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Optimizing Drawing Tasks</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww7984" class="Heading1"><span></span>Optimizing Drawing Tasks</div><div id="ww4751" class="Body">A special manager feature lets you perform several geometric operations and redraw only when all the modifications are done. This is implemented by the use of the <span class="Emphasis" style="font-style: italic">update region</span>, which is a region made up of invalidated rectangles.</div><div id="ww4753" class="Body">The update region stores the appropriate regions before any modifications are carried out on objects. It also stores the relevant regions after these modifications have been carried out for each view.</div><div id="ww4754" class="Body">To successfully perform an application task, you must mark the regions where relevant objects are located as invalid, apply the function, and then invalidate the regions where the objects involved are now placed. This mechanism is simplified by means of a set of member functions of the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span> class. Regions to be updated are refreshed only when <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::reDrawViews</span> is called, which means that refreshing the views of a manager is done by marking regions to be redrawn in a cycle of <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::initReDraws</span> and <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::reDrawViews</span>.</div><div id="ww4755" class="Body">These cycles can be nested so that only the last call to the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::reDrawViews</span> member function actually updates the display.</div><div id="ww3567" class="Body">The <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span> member functions that help you optimize drawing tasks are:</div><div id="ww3920" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::initReDraws</span> - Marks the beginning of the drawing optimization operation by emptying the region to update for each managed view. Once this step is completed, direct or indirect calls to a draw directive are deferred. For every <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::initReDraws</span>, there should be one call to <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::reDrawViews</span>, or else a warning is issued. Calls to <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::initReDraws</span> can be embedded so that the actual refresh takes place only when the last call to <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::reDrawViews</span> is reached.</div><div id="ww3573" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::invalidateRegion</span> - Marks a region as invalid. This region will be redrawn later. Each call to <span class="code">IlvManager::invalidateRegion</span> adds the region to the update region in every view.</div><div id="ww4759" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::reDrawViews</span> - Sends the drawing commands for the whole update region. All the objects involved in previous calls to <span class="code">IlvManager::invalidateRegion</span> are then updated.</div><div id="ww4760" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::abortReDraws</span> - Aborts the mechanism of deferred redraws (for example, if you need to refresh the whole screen). This function resets the update region to empty. If needed, you should start again with an <span class="code">IlvManager::initReDraws</span> call.</div><div id="ww4761" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvManager::isInvalidating</span> - Returns <span class="code">IlTrue</span> when the manager is in an <span class="code">IlvManager::initReDraws/IlvManager::reDrawViews</span> state.</div><div id="ww653561" class="Body">The successive use of these member functions is a mechanism used in the <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::applyToObject</span> member function. In fact, the call:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww674138" class="CodeInTable"> manager-&gt;applyToObject(obj, func, userArg, IlTrue);</div><div id="ww673968" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww648462" class="Body">is equivalent to:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; border-bottom-color: none; border-bottom-style: none; border-bottom-width: 0.0pt; border-left-color: none; border-left-style: none; border-left-width: 0.0pt; border-right-color: none; border-right-style: none; border-right-width: 0.0pt; border-top-color: none; border-top-style: none; border-top-width: 0.0pt; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww674130" class="CodeInTable"> manager-&gt;initReDraws();</div><div id="ww674131" class="CodeInTable">    manager-&gt;invalidateRegion(obj);</div><div id="ww674132" class="CodeInTable">    manager-&gt;applyToObject(obj, func, userArg, IlFalse);</div><div id="ww674133" class="CodeInTable">    manager-&gt;invalidateRegion(obj);</div><div id="ww674134" class="CodeInTable">    manager-&gt;reDrawViews();</div><div id="ww673981" class="CodeInTable">&nbsp;</div></td></tr></table></div><div id="ww645211" class="Body">The <span class="ClassName"><a href="../RefMan/refcppmanager/classIlvManager.html">IlvManager</a></span><span class="code">::invalidateRegion</span> member function works with the bounding box of the object given in the parameter. When an operation applied to the object modifies its bounding box, <span class="code">IlvManager::invalidateRegion</span> must be called twice; once before and once after the operation.</div><div id="ww663022" class="Body">For example, when moving an object, you must invalidate the region where the object was initially located and invalidate the final region so that the object can be redrawn. If the object bounding box is not modified, only one call to <span class="code">IlvManager::invalidateRegion</span> is necessary.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>