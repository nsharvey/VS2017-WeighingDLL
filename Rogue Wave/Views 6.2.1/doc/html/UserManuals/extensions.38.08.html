<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>The Class IlvStExtension</title><link rel="Prev" href="extensions.38.07.html" title="Previous" /><link rel="Next" href="extensions.38.09.html" title="Next" /><link rel="StyleSheet" href="css/extensions.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/extensions_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/extensions.38.08.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pexFpepqv8GweguSDRyADjA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/extensions.38.08.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrpart1.html#ww144909">Creating GUI Applications with Rogue Wave&nbsp;Views Studio</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/extensions.38.01.html#wwconnect_header">Extending Rogue Wave&nbsp;Views Studio</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/extensions.38.02.html#wwconnect_header">Extending Rogue Wave&nbsp;Views Studio Components </a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">The Class IlvStExtension</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1024329" class="Heading2"><span></span>The Class IlvStExtension</div><div id="ww1024330" class="Body">To initialize a new extension and add it to Rogue Wave®&nbsp;Views Studio, you have to derive a class from <span class="ClassName"><a href="../RefMan/refcppstudio/classIlvStExtension.html">IlvStExtension</a></span> defining a set of methods that will be invoked in a predefined sequence. The constructor of <span class="ClassName"><a href="../RefMan/refcppstudio/classIlvStExtension.html">IlvStExtension</a></span> takes the following two parameters:</div><div id="ww1024348" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">name</span> is the name of the extension.</div><div id="ww1024349" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">editor</span> is the instance of the editor that is being extended.</div><div id="ww1024350" class="Body">The constructor of the <span class="code">IlvStExtension</span> class adds the new instance to the extension list of the editor. You must create an instance of your extension before initializing the <span class="ClassName"><a href="../RefMan/refcppstudio/classIlvStudio.html">IlvStudio</a></span> instance. When the editor is deleted, this instance is also deleted. An extension must not be explicitly deleted. </div><div id="ww1024351" class="Body">Here is an example:</div><div id="ww1024352" class="NormalCode">#include &lt;ivstudio/studext.h&gt;</div><div id="ww1024353" class="NormalCode">&nbsp;</div><div id="ww1024354" class="NormalCode">class MyStudioExtension </div><div id="ww1024355" class="NormalCode">: public IlvStExtension {</div><div id="ww1024356" class="NormalCode">public:</div><div id="ww1024357" class="NormalCode">    MyStudioExtension(IlvStudio* editor);</div><div id="ww1024358" class="NormalCode">    virtual IlBoolean preInitialize();</div><div id="ww1024359" class="NormalCode">    virtual IlBoolean initializePanels();</div><div id="ww1024360" class="NormalCode">    virtual IlBoolean initializeCommandDescriptors();</div><div id="ww1024361" class="NormalCode">    virtual IlBoolean initializeBuffers();</div><div id="ww1024362" class="NormalCode">    virtual IlBoolean initializeInspectors();</div><div id="ww1024363" class="NormalCode">};</div><div id="ww1024364" class="NormalCode">&nbsp;</div><div id="ww1024365" class="NormalCode">int</div><div id="ww1024366" class="NormalCode">main(int argc, char* argv[])</div><div id="ww1024367" class="NormalCode">{</div><div id="ww1024368" class="NormalCode">    IlvSetLanguage();</div><div id="ww1024369" class="NormalCode">    // --- Display ---</div><div id="ww1024370" class="NormalCode">    IlvDisplay* display = new IlvDisplay("ivstudio", "", argc, argv);</div><div id="ww1024371" class="NormalCode">    if (display-&gt;isBad()) {</div><div id="ww1024372" class="NormalCode">        IlvFatalError("Couldn't open display");</div><div id="ww1024373" class="NormalCode">        delete display;</div><div id="ww1024374" class="NormalCode">        return 1;</div><div id="ww1024375" class="NormalCode">    }</div><div id="ww1024376" class="NormalCode">&nbsp;</div><div id="ww1024377" class="NormalCode">    // ---- Create and initialize the editor ---</div><div id="ww1024378" class="NormalCode">    IlvStudio* editor = new IlvStudio(display, argc, argv);</div><div id="ww1024379" class="NormalCode">    if (editor-&gt;isBad()) {</div><div id="ww1024380" class="NormalCode">        IlvFatalError("Could not initialize the editor");</div><div id="ww1024381" class="NormalCode">        delete display;</div><div id="ww1024382" class="NormalCode">        return 2;</div><div id="ww1024383" class="NormalCode">    }</div><div id="ww1024384" class="NormalCode">    new MyStudioExtension(editor); // added line</div><div id="ww1024385" class="NormalCode">    editor-&gt;initialize();</div><div id="ww1024386" class="NormalCode">    editor-&gt;parseArguments();</div><div id="ww1024387" class="NormalCode">    editor-&gt;mainLoop();</div><div id="ww1024388" class="NormalCode">    return 0;</div><div id="ww1024389" class="LastNormalCode">}</div><div id="ww1024390" class="Heading3"><span></span>First Initialization Step</div><div id="ww1024391" class="Body">The <span class="code">preInitialize</span> method is the first one to be invoked when the editor is initialized. At this stage, configuration files have not yet been read. </div><div id="ww1024392" class="Body">What you should do in this method: </div><div id="ww1024393" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Complete the display path so that it contains the directories where your configuration and data files are located. </div><div id="ww1024394" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Add a configuration file.</div><div id="ww1024395" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>If you define a buffer type and want it to be the default buffer when the editor is initialized, you have to set the default constructor in this method. </div><div id="ww1024396" class="Body">For example:</div><div id="ww1024397" class="NormalCode">// A buffer constructor.</div><div id="ww1024398" class="NormalCode">static IlvStBuffer* ILVCALLBACK</div><div id="ww1024399" class="NormalCode">MakeMyBuffer(IlvStudio*  editor, const char* name, const char*)</div><div id="ww1024400" class="NormalCode">{</div><div id="ww1024401" class="NormalCode">   return new MyGadgetBuffer(editor, name);</div><div id="ww1024402" class="NormalCode">}</div><div id="ww1024403" class="NormalCode">&nbsp;</div><div id="ww1024404" class="NormalCode">static const char* UserData = "../data";</div><div id="ww1024405" class="NormalCode">&nbsp;</div><div id="ww1024406" class="NormalCode">IlBoolean</div><div id="ww1024407" class="NormalCode">MyStudioExtension::preInitialize()</div><div id="ww1024408" class="NormalCode">{</div><div id="ww1024409" class="NormalCode">   IlvStudio* editor = getEditor();</div><div id="ww1024410" class="NormalCode">   // Add the path.</div><div id="ww1024411" class="NormalCode">   editor-&gt;getDisplay()-&gt;prependToPath(UserData);</div><div id="ww1024412" class="NormalCode">   // Add an option file.</div><div id="ww1024413" class="NormalCode">   editor-&gt;addOptionFile("mystudio.opt");</div><div id="ww1024414" class="NormalCode">   // Must be done here so</div><div id="ww1024415" class="NormalCode">   // the first default buffer will be a MyGadgetBuffer.</div><div id="ww1024416" class="NormalCode">   editor-&gt;buffers().setDefaultConstructor(MakeMyBuffer);</div><div id="ww1024417" class="NormalCode">   return IlTrue;</div><div id="ww1024418" class="LastNormalCode">}</div><div id="ww1024420" class="Heading3"><span></span>Initializing Buffers</div><div id="ww1024421" class="Body">The <span class="code">initializeBuffers</span> method is called after the predefined buffers are initialized. You can complete the buffer initialization and the related initializations in this method. </div><div id="ww1024422" class="Body">For example:</div><div id="ww1024423" class="NormalCode">IlBoolean</div><div id="ww1024424" class="NormalCode">MyStudioExtension::initializeBuffers()</div><div id="ww1024425" class="NormalCode">{</div><div id="ww1024426" class="NormalCode">   IlvStudio* editor = getEditor();</div><div id="ww1024427" class="NormalCode">   editor-&gt;buffers().registerType("MyGadgetManagerOutput", MakeMyBuffer);</div><div id="ww1024428" class="NormalCode">   return IlTrue;</div><div id="ww1024429" class="LastNormalCode">}</div><div id="ww1024431" class="Heading3"><span></span>Initializing Command Descriptors</div><div id="ww1024432" class="Body">The <span class="code">initializeCommandDescriptors</span> method is called after the command descriptors are read and after the predefined command constructors are registered. You can register your command constructors in this method.</div><div id="ww1024433" class="Body">For example:</div><div id="ww1024434" class="NormalCode">static IlvStCommand*</div><div id="ww1024435" class="NormalCode">MkMyShowPanel(IlvStudio* editor)</div><div id="ww1024436" class="NormalCode">{</div><div id="ww1024437" class="NormalCode">    return new IlvStShowPanel(editor-&gt;getPanel("MyPanel")); </div><div id="ww1024438" class="NormalCode">}</div><div id="ww1024439" class="NormalCode">&nbsp;</div><div id="ww1024440" class="NormalCode">static IlvStCommand*</div><div id="ww1024441" class="NormalCode">MkMyAddClass(IlvStudio*) </div><div id="ww1024442" class="NormalCode">{ </div><div id="ww1024443" class="NormalCode">    return new MyAddClass; </div><div id="ww1024444" class="NormalCode">}</div><div id="ww1024445" class="NormalCode">&nbsp;</div><div id="ww1024446" class="NormalCode">static IlvStCommand*</div><div id="ww1024447" class="NormalCode">MkMyNewBuffer(IlvStudio*) </div><div id="ww1024448" class="NormalCode">{ </div><div id="ww1024449" class="NormalCode">    return new MyNewBuffer; </div><div id="ww1024450" class="NormalCode">}</div><div id="ww1024451" class="NormalCode">&nbsp;</div><div id="ww1024452" class="NormalCode">IlBoolean</div><div id="ww1024453" class="NormalCode">MyStudioExtension::initializeCommandDescriptors()</div><div id="ww1024454" class="NormalCode">{</div><div id="ww1024455" class="NormalCode">    // Register my commands.</div><div id="ww1024456" class="NormalCode">    IlvStudio* editor = getEditor();</div><div id="ww1024457" class="NormalCode">    editor-&gt;registerCommand("MyShowPanel", MkMyShowPanel);</div><div id="ww1024458" class="NormalCode">    editor-&gt;registerCommand("AddMyClass", MkMyAddClass);</div><div id="ww1024459" class="NormalCode">    editor-&gt;registerCommand("MyNewBuffer", MkMyNewBuffer);</div><div id="ww1024460" class="NormalCode">    return IlTrue;</div><div id="ww1024461" class="LastNormalCode">}</div><div id="ww1024463" class="Heading3"><span></span>Initializing Panels</div><div id="ww1024464" class="Body">When the <span class="code">initializePanels</span> method is called, the panel properties are loaded and the predefined panels are created, but the panel properties are not yet applied to the panels. Create your own panels in this method as follows:</div><div id="ww1024465" class="NormalCode">IlBoolean</div><div id="ww1024466" class="NormalCode">MyStudioExtension::initializePanels()</div><div id="ww1024467" class="NormalCode">{</div><div id="ww1024468" class="NormalCode">    IlvStudio* editor = getEditor();</div><div id="ww1024469" class="NormalCode">    // Create MyGadgetPalette.</div><div id="ww1024470" class="NormalCode">    MyGadgetPalette* pal = new MyGadgetPalette(editor);</div><div id="ww1024471" class="NormalCode">    pal-&gt;connect();</div><div id="ww1024472" class="NormalCode">    // Create MyPanel.</div><div id="ww1024473" class="NormalCode">    MyPanelHandler* pan = new MyPanelHandler(editor, "MyPanel");</div><div id="ww1024474" class="NormalCode">    pan-&gt;connect();</div><div id="ww1024475" class="NormalCode">    return IlTrue;</div><div id="ww1024476" class="LastNormalCode">}</div><div id="ww1024479" class="Heading3"><span></span>Registering Inspectors</div><div id="ww1024480" class="Body">To register an inspector panel, you have to map an object that is able to create the inspector panel to the class name of the inspected object. The inspector panel builder must derive from the class <span class="ClassName"><a href="../RefMan/refcppstudio/classIlvStInspectorPanelBuilder.html">IlvStInspectorPanelBuilder</a></span>. To declare an inspector panel builder class, you must use the macro <span class="code">IlvStDefineInspectorPanelBuilder</span>, as follows:</div><div id="ww1024482" class="NormalCode">IlvStDefineInspectorPanelBuilder(MyClassInspector,\ </div><div id="ww1024483" class="LastNormalCode">                                 MyClassInspectorBuilder)</div><div id="ww1024484" class="Body">The mapping used to register an inspector panel is done inside the <span class="code">initializeInspectors</span> method, which is called after the predefined inspectors are initialized. </div><div id="ww1024485" class="Body">Here is how you add an inspector panel builder:</div><div id="ww1024486" class="NormalCode">IlBoolean</div><div id="ww1024487" class="NormalCode">MyStudioExtension::initializeInspectors()</div><div id="ww1024488" class="NormalCode">{</div><div id="ww1024489" class="NormalCode">    IlvStudio* editor = getEditor();</div><div id="ww1024490" class="NormalCode">    editor-&gt;inspector().registerBuilder("MyClass", </div><div id="ww1024491" class="NormalCode">                                         new MyClassInspectorBuilder);</div><div id="ww1024492" class="NormalCode">    return IlTrue;</div><div id="ww1024493" class="LastNormalCode">}</div><div id="ww1024495" class="Heading3"><span></span>Initializing Editing Modes</div><div id="ww1024496" class="Body">The <span class="code">initializeModes</span> method is called after the predefined editing modes are initialized. If you provide an editing mode, you can initialize it here.</div><div id="ww1024497" class="Heading3"><span></span>Last Initialization Step</div><div id="ww1024498" class="Body">The <span class="code">postInitialize</span> method is the last method to be called. </div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>