<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Defining a New Command to Add an Object</title><link rel="Prev" href="extensions.38.09.html" title="Previous" /><link rel="Next" href="extensions.38.11.html" title="Next" /><link rel="StyleSheet" href="css/extensions.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/extensions_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/extensions.38.10.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pwAINZpcMhpEBs_002b8HKQmgcw" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/extensions.38.10.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrpart1.html#ww144909">Creating GUI Applications with Rogue Wave&nbsp;Views Studio</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/extensions.38.01.html#wwconnect_header">Extending Rogue Wave&nbsp;Views Studio</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/extensions.38.09.html#wwconnect_header">Integrating your Own Graphic Objects</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Defining a New Command to Add an Object</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1024509" class="Heading2"><span></span>Defining a New Command to Add an Object</div><div id="ww1024510" class="Body">To add an instance of a user-defined class to Rogue Wave®&nbsp;Views Studio, you have to write a new command. The class <span class="ClassName"><a href="../RefMan/refcppstudio/classIlvStClickAddObject.html">IlvStClickAddObject</a></span> defines a command that can be used to add an object at the position indicated by a mouse click. To create an instance of a user-defined graphic class, you will have to redefine its virtual member function <span class="code">makeObject</span> in a derived class, as shown in the example below: </div><div id="ww1024512" class="NormalCode">#include &lt;ivstudio/edit.h&gt;</div><div id="ww1024513" class="NormalCode">&nbsp;</div><div id="ww1024514" class="NormalCode">class MyAddClass: public IlvStClickAddObject {</div><div id="ww1024515" class="NormalCode">protected:</div><div id="ww1024516" class="NormalCode">   virtual IlvStError* makeObject(IlvGraphic*&amp; obj, IlvStudio* ed, IlvAny) {</div><div id="ww1024517" class="NormalCode">      MyClass* mc = new MyClass(ed-&gt;getDisplay(), IlvRect(0, 0, 40, 40));</div><div id="ww1024518" class="NormalCode">      obj = mc;</div><div id="ww1024519" class="NormalCode">      return 0;</div><div id="ww1024520" class="NormalCode">   }</div><div id="ww1024521" class="LastNormalCode">};</div><div id="ww1024522" class="Body">The following command constructor creates and returns a new instance of the user-defined class:</div><div id="ww1024523" class="NormalCode">static IlvStCommand*</div><div id="ww1024524" class="NormalCode">MkMyAddClass(IlvStudio*) </div><div id="ww1024525" class="NormalCode">{ </div><div id="ww1024526" class="NormalCode">  return new MyAddClass; </div><div id="ww1024527" class="LastNormalCode">}</div><div id="ww1024528" class="Body">You can then create a subclass of <span class="code">IlvStExtension</span> and define the <span class="code">initializeCommandDescriptors</span> method to register the command constructor, as follows:</div><div id="ww1024529" class="NormalCode">IlBoolean</div><div id="ww1024530" class="NormalCode">MyStudioExtension::initializeCommandDescriptors()</div><div id="ww1024531" class="NormalCode">{</div><div id="ww1024532" class="NormalCode">    getEditor()-&gt;registerCommand("AddMyClass", MkMyAddClass);</div><div id="ww1024533" class="NormalCode">    return IlTrue;</div><div id="ww1024534" class="LastNormalCode">}</div><div id="ww1024535" class="Body">In an option file, you can write your command declaration like this:</div><div id="ww1024536" class="NormalCode">studio {</div><div id="ww1024537" class="NormalCode">  // ...</div><div id="ww1024538" class="NormalCode">  command AddMyClass {</div><div id="ww1024539" class="NormalCode">    label "MyClass";</div><div id="ww1024540" class="NormalCode">    prompt "Add an object of my class";</div><div id="ww1024541" class="NormalCode">    category add;</div><div id="ww1024542" class="NormalCode">  }</div><div id="ww1024543" class="NormalCode">  // ...</div><div id="ww1024544" class="LastNormalCode">}</div><div id="ww1024545" class="Body">The name given to the command is the same as the one registered with the editor. In this example, the command is displayed in the add category of the Commands panel.</div><div id="ww1024546" class="Body">If required, you can declare your option file using the <span class="code">ILVSTOPTIONFILE</span> environment variable.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>