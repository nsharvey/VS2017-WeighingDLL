<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Resource Creation and Destruction: lock and unLock</title><link rel="Prev" href="graphicresources.04.04.html" title="Previous" /><link rel="Next" href="graphicresources.04.06.html" title="Next" /><link rel="StyleSheet" href="css/graphicresources.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/graphicresources_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/graphicresources.04.05.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="peuc45jKJqC22tlbVyWe7aA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/graphicresources.04.05.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/foundusrfrontcover.html#wwconnect_header">Foundation</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/graphicresources.04.01.html#wwconnect_header">Graphic Resources</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/graphicresources.04.02.html#wwconnect_header">IlvResource: The Resource Object Base Class</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Resource Creation and Destruction: lock and unLock</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww819841" class="Heading2"><span></span>Resource Creation and Destruction: lock and unLock</div><div id="ww828386" class="Body">Because the creation of graphic resources is generally memory intensive on most graphic systems, Rogue Wave®&nbsp;Views implements a caching mechanism to minimize graphic resource allocation.</div><div id="ww822073" class="Body">Resource objects are maintained by the <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> instances of your application. They should normally not be created and destroyed using the operators <span class="code">new</span> and <span class="code">delete</span>. Instead, Rogue Wave&nbsp;Views provides the following member functions:</div><div id="ww822079" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> methods <span class="code">getXXX</span>, where <span class="code">XXX</span> stands for a resource class name without the <span class="code">Ilv</span> prefix (for instance, <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#a9e5c0f63cc15ea600e590bd2751facff">getColor</a></span>, <span class="MethodName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html#aa40f5b7cfc184ff405bb99d0f3e343e4">getFont</a></span>, and so on).</div><div id="ww819870" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Methods <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::lock</span> and <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::unLock</span> respectively increment and decrement the internal reference count of the resource. When this count reaches zero, the resource is deleted.</div><div id="ww819848" class="Heading3"><span></span>Locking and Unlocking Procedures</div><div id="ww821123" class="Body">Graphic resources should be used in the following manner:</div><div id="ww413" class="Numbered1"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">1.	</span></span>Request your <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> instance to allocate a resource for you. If this resource already exists in the system (for instance, the color you query for is already in use in a palette somewhere), no further allocation is done, and the existing resource is returned.</div><div id="ww414" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">2.	</span></span>Inform Rogue Wave&nbsp;Views that this resource must be kept safe by calling <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::lock</span>, then use that resource.</div><div id="ww417" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">3.	</span></span>Use <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::unLock</span> to let Rogue Wave&nbsp;Views know that you have finished using the resource.</div><div id="ww819767" class="Body">Resource management is closely concerned with the ways in which you lock and unlock your resources. Whenever you need a specific resource in one of your persistent objects, you should use this mechanism to make sure that it will stay safe within your <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> instance. If your application needs more than one instance of <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span>, you have to create resources within each environment, since resources cannot be shared between the different <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvDisplay.html">IlvDisplay</a></span> contexts.</div><div id="ww819768" class="Body">During the lifetime of a resource, the number of calls to <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::lock</span> must exactly match the number of calls to <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::unLock</span>. If there are more calls to <span class="code">lock</span>, the resource remains allocated even if it is no longer in use, and therefore limits your application’s requirements. If there are more calls to <span class="code">unlock</span>, the application may crash because of a memory error.</div><div id="ww821124" class="Heading3"><span></span>Rules for Locking and Unlocking</div><div id="ww819758" class="Body">You should follow these rules for locking and unlocking graphic resources:</div><div id="ww819759" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Once you get a resource, lock it, use it, and unlock it when you are done.</div><div id="ww829254" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>You should not unlock a resource that you have not locked yourself, unless you are sure that your operation is correct.</div><div id="ww829255" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>You should never use a resource after you have unlocked it, just like you should never use a pointer after you have freed it; <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvResource.html">IlvResource</a></span><span class="code">::unLock</span> potentially means <span class="code">delete</span>.</div><div id="ww819760" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>There are times when you do not need to lock and unlock a resource. For instance, if you get the foreground color of an object and pass it to another object that will lock it. In such cases, locking and unlocking the resource is not necessary, but it does no damage either.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>