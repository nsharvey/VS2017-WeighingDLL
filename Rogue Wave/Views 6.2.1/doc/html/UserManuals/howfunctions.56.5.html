<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Implementation of a Document Class</title><link rel="Prev" href="howfunctions.56.4.html" title="Previous" /><link rel="Next" href="howfunctions.56.6.html" title="Next" /><link rel="StyleSheet" href="css/howfunctions.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/howfunctions_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/UserManuals/howfunctions.56.5.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pN_002beaiGOJpGClLtthoA2_002fmBA" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/UserManuals/howfunctions.56.5.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/ctrusrpart3.html#ww997051">Rogue Wave&nbsp;Views Application Framework</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../UserManuals/howfunctions.56.1.html#wwconnect_header">Implementing an Application</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Implementation of a Document Class</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww106441" class="Heading1"><span></span>Implementation of a Document Class</div><div id="ww106443" class="Body">A document class is derived from the <span class="ClassName"><a href="../RefMan/refcppappframe/classIlvDvDocument.html">IlvDvDocument</a></span> class.</div><div id="ww108011" class="Body">The document is <span class="emphasis">the user data</span>. The document class loads and saves data and also provides accessors that are used by document views to modify data.</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww112011" class="Note"><span class="flag">Note:&nbsp;</span>The user data is similar to the Model View Controller (MVC) approach.</div></td></tr></table></div><div id="ww108012" class="Body">Application Framework provides document classes that manage specific data, such as Rogue Wave&nbsp;Views managers, text buffers, or projects, as shown in the following inheritance tree:</div><div class="ww_skin_page_overflow"><div id="ww106446" class="Startfigure"><img class="Default" src="../UserManuals/images/docview2.gif" width="100%" style="display: block; left: 0.0pt; max-height: 274px; max-width: 391px; top: 0.0pt" alt="" /></div></div><div id="ww106464" class="Subhead"><span></span>New Document</div><div id="ww108554" class="Body">A derived document class must override the <span class="MethodName"><a href="../RefMan/refcppappframe/classIlvDvDocument.html#a0a5f95e788306ef11d02e3438f222787">IlvDvDocument::initializeDocument</a></span> method.</div><div id="ww106467" class="Body">It is called when the File &gt; New command is executed to create a document.</div><div id="ww106468" class="Body">The method must first call <span class="MethodName"><a href="../RefMan/refcppappframe/classIlvDvDocument.html#a0a5f95e788306ef11d02e3438f222787">initializeDocument</a></span>. Then, it must initialize specific data.</div><div id="ww108555" class="Subhead"><span></span>Serialization</div><div id="ww113692" class="Body">The <span class="MethodName"><a href="../RefMan/refcppappframe/classIlvDvDocument.html#a11b547279d4c57954ca687038548020b">serialize</a></span> method:</div><div id="ww106470" class="Body"><span class="code">void IlvDvDocument::serialize(IlvDvStream&amp; stream);</span> </div><div id="ww109662" class="Body">is called when a file is opened to create the document, if a call to <span class="code">stream.isSaving()</span> returns false. Otherwise, the document must be saved.</div><div id="ww106472" class="Body">Typically, the body of the method has the following form:</div><div id="ww110688" class="NormalCode">IlvDvDocument::serialize(stream);</div><div id="ww110690" class="NormalCode">if (stream.isSaving()) {</div><div id="ww110692" class="NormalCode">   // Here, write your persistent data</div><div id="ww110694" class="NormalCode">}</div><div id="ww110696" class="NormalCode">else {</div><div id="ww110698" class="NormalCode">   // Here, read data from stream</div><div id="ww106480" class="LastNormalCode">}</div><div id="ww109663" class="Body">There are two ways of loading and saving data when using the parameter called stream.</div><div id="ww109669" class="Body">One way is to use <span class="code">istream</span> or <span class="code">ostream</span> objects. These objects are given<span style="font-family: &quot;Times New Roman&quot;; font-size: 12.0pt"> </span>by a call to the<span class="code"> istream* getInStream() const</span> and <span class="code">ostream* getOutStream() const</span> methods directly.</div><div id="ww106486" class="Body">The other way, which is usually easier, is to use specific serialization methods, provided by the <span class="ClassName"><a href="../RefMan/refcppappframe/classIlvDvStream.html">IlvDvStream</a></span> class. Here are these methods:</div><div id="ww112919" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Operators</div><div id="ww106488" class="NormalCodeL1">// Storing operators</div><div id="ww106489" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlInt i);</div><div id="ww106490" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlUShort w);</div><div id="ww106491" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlShort ch);</div><div id="ww106492" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlUInt u);</div><div id="ww106493" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlBoolean b);</div><div id="ww106494" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlFloat f);</div><div id="ww106495" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(IlDouble d);</div><div id="ww106496" class="NormalCodeL1">IlvDvStream&amp; operator&lt;&lt;(const IlString&amp; s); //’s’ must not contain blanks</div><div id="ww106497" class="NormalCodeL1">&nbsp;</div><div id="ww106498" class="NormalCodeL1">// Reading operators</div><div id="ww106499" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlInt&amp; i);</div><div id="ww106500" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlUShort&amp; w);</div><div id="ww106501" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlShort&amp; ch);</div><div id="ww106502" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlUInt&amp; u);</div><div id="ww106503" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlBoolean&amp; b);</div><div id="ww106504" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlFloat&amp; f);</div><div id="ww106505" class="NormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlDouble&amp; d);</div><div id="ww106506" class="LastNormalCodeL1">IlvDvStream&amp; operator&gt;&gt;(IlString&amp; s);</div><div id="ww106508" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void serialize(IlvString&amp;, IlBoolean betweenQuotes = IlTrue);</span></div><div id="ww109675" class="IndentedL1">This method is a safe way of loading and saving strings. If the <span class="code">betweenQuotes</span> parameter is set to true, the string is saved between quotation marks. This way it can contain blank spaces.</div><div id="ww106511" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void serializeBitmap(IlvBitmap*&amp;, IlBoolean lock = IlTrue);</span></div><div id="ww109676" class="IndentedL1">Serializes a bitmap path.</div><div id="ww112920" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Serialization of objects</div><div id="ww106514" class="IndentedL1">When implementing user classes, it is recommended to derive from the <span class="ClassName"><a href="../RefMan/refcppappframe/classIlvDvSerializable.html">IlvDvSerializable</a></span> class. This class is an abstract interface that provides both a mechanism for safe downcasting and a serialization method:</div><div id="ww106515" class="IndentedL1" style="color: #000000; font-style: normal; font-variant: normal; font-weight: normal; margin-bottom: 3.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="code">virtual void serialize(IlvDvStream&amp; stream);</span></div><div id="ww106517" class="Bulleted" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 3.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 11.338582677165192pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void serializeObjects(IlvArray&amp;);</span></div><div id="ww106518" class="IndentedL2">Load and save an array of <span class="code">IlvDvSerializable</span> objects:</div><div id="ww106520" class="Bulleted" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 3.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 11.338582677165192pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">void writeObject(const IlvDvSerializable*);</span></div><div id="ww106521" class="Bulleted" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 3.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 11.338582677165192pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">IlvDvSerializable* readObject();</span></div><div id="ww106523" class="Itemize" style="color: #000000; font-variant: normal; font-weight: normal; margin-bottom: 5.0pt; margin-top: 5.0pt; text-transform: none; vertical-align: baseline"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><span class="code">virtual void clean();</span></div><div id="ww111061" class="IndentedL1">This method is called to clean up the document data. It is only used for documents whose corresponding document type does not allow opening more than one document (SDI document types, typically project documents). When a user tries to create a new document while a document of the same type is already open, Application Framework does not delete the currently opened document to create another one. Instead, it cleans the open document (by calling this method) and reinitializes the document.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>