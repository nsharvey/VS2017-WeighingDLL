<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Implementing the BitmapView</title><link rel="Prev" href="bitmapeditor.08.09.html" title="Previous" /><link rel="Next" href="bitmapeditor.08.11.html" title="Next" /><link rel="StyleSheet" href="css/bitmapeditor.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/bitmapeditor_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Tutorials/bitmapeditor.08.10.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pwG748dwoTU6COCILPip_002fCg" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Tutorials/bitmapeditor.08.10.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/aftutfrontcover.html#wwconnect_header">Application Framework</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/bitmapeditor.08.01.html#wwconnect_header">The Bitmap Editor Application</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/bitmapeditor.08.06.html#wwconnect_header">Step 2: Implementing the Document and the View</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Implementing the BitmapView</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1010468" class="Heading2"><span></span>Implementing the BitmapView</div><div id="ww1010469" class="Body">In Step 1, the C++ code of a view called <span class="code">BitmapView</span> that inherits from <span class="ClassName"><a href="../RefMan/refcppappframe/classIlvDvFormView.html">IlvDvFormView</a></span> was generated. The code for this view will now be written. The <span class="code">BitmapView</span> class implements a view in a <span class="code">BitmapDocument</span> object. Its purpose is to display the bitmap and to provide editing capabilities, such as changing the color of a pixel.</div><div id="ww1010470" class="Body">The requirements of the view to be implemented are:</div><div id="ww1015206" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Display an <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvBitmap.html">IlvBitmap</a></span> object</div><div id="ww1015207" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Allow scrolling</div><div id="ww1015204" class="Body">There are several ways of displaying <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvBitmap.html">IlvBitmap</a></span> objects in Rogue Wave&nbsp;Views. The <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvZoomableIcon.html">IlvZoomableIcon</a></span> class is used to do so in this tutorial.</div><div id="ww1015212" class="Body">All graphic objects must be placed in a container in order to be displayed. Since scrolling capabilities are also needed, <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSCGadgetContainerRectangle.html">IlvSCGadgetContainerRectangle</a></span> will be used (this class owns a container and provides scrolling capabilities).</div><div id="ww1015217" class="Body">Now that the decision of how to display the bitmap has been taken, the object must be inserted in the <span class="code">BitmapView</span> class. As a subclass of <span class="code">IlvDvFormView</span>, <span class="code">BitmapView</span> can read a Rogue Wave&nbsp;Views (<span class="code">.ilv</span>) file, using the <span class="code">IlvDvFormView::setFileName</span> method. This file describes the graphic objects that will display the elements of the document.</div><div id="ww1010473" class="Body">The <span class="code">.ilv</span> file is now created using Rogue Wave&nbsp;Views Studio. This <span class="code">.ilv</span> file will contain an <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSCGadgetContainerRectangle.html">IlvSCGadgetContainerRectangle</a></span> (a view that scrolls) into which an <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvZoomableIcon.html">IlvZoomableIcon</a></span>, which handles the bitmap, will be placed.</div><div id="ww1010474" class="Numbered1"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">1.	</span></span>Launch <span class="code">ivfstudio.</span></div><div id="ww1010475" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">2.	</span></span>Select File &gt; New &gt; Gadgets.</div><div id="ww1010476" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">3.	</span></span>Select View Rectangles in the Gadgets palette.</div><div id="ww1010477" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">4.	</span></span>Drag an <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSCGadgetContainerRectangle.html">IlvSCGadgetContainerRectangle</a></span> and drop it in the gadgets buffer.</div><div id="ww1010478" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">5.	</span></span>Click the Attachments mode icon.</div><div id="ww1010479" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">6.	</span></span>Select the <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSCGadgetContainerRectangle.html">IlvSCGadgetContainerRectangle</a></span> object.</div><div id="ww1015378" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">7.	</span></span>Set the vertical and horizontal guides.</div><div id="ww1015379" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">8.	</span></span>Double-click guides.</div><div id="ww1015380" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">9.	</span></span>Set to zero all the distances and then click Apply.</div><div id="ww1010483" class="Numbered"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span class="number">10.	</span></span>Select File &gt; Save As and specify <span class="code">&lt;WORKDIR&gt;/data/bitmapview.ilv.</span></div><div id="ww1010484" class="Body">The <span class="code">bitmapview.ilv</span> file will now be integrated into the <span class="code">BitmapView</span> class. The initialization of a view is performed upon the <span class="code">BitmapDocument</span> object instantiation through the <span class="code">BitmapView::initializeView</span> method. The code for this method reads the <span class="code">.ilv</span> file and connects the graphics objects to the document. The code for the <span class="code">BitmapView</span> class is defined in the <span class="code">BitmapView.cpp</span> file.</div><div id="ww1010485" class="NormalCode">void</div><div id="ww1010486" class="NormalCode">BitmapView::initializeView()</div><div id="ww1010487" class="NormalCode">{</div><div id="ww1010488" class="NormalCode">   IlvDvFormView::initializeView();</div><div id="ww1010489" class="NormalCode">   BitmapDocument* document = getBitmapDocument();</div><div id="ww1010490" class="NormalCode">   if (document-&gt;getBitmap()) {</div><div id="ww1010491" class="NormalCode">      // Load the file</div><div id="ww1010492" class="NormalCode">      setFilename("bitmapview.ilv");</div><div id="ww1010493" class="NormalCode">      // Retrieve the IlvSCGadgetContainerRectangle</div><div id="ww1010494" class="NormalCode">      IlvSCGadgetContainerRectangle* rectangle = </div><div id="ww1010495" class="NormalCode">                          (IlvSCGadgetContainerRectangle*)getContainer()-&gt;</div><div id="ww1010496" class="NormalCode">                           getObject((IlvUInt)0);</div><div id="ww1010497" class="NormalCode">      // Change the color of the clip view to 'black'</div><div id="ww1010498" class="NormalCode">      IlvColor* color = getDisplay()-&gt;getColor("black");</div><div id="ww1010499" class="NormalCode">      rectangle-&gt;getScrolledView()-&gt;getClipView()-&gt;setBackground(color);</div><div id="ww1010500" class="NormalCode">      // Add the zoomable icon</div><div id="ww1010501" class="NormalCode">      IlvContainer* container = rectangle-&gt;getContainer();</div><div id="ww1010502" class="NormalCode">      _icon = new IlvZoomableIcon(getDisplay(),</div><div id="ww1010503" class="NormalCode">                                  IlvPoint(0, 0),</div><div id="ww1010504" class="NormalCode">                                  document-&gt;getBitmap(),</div><div id="ww1010505" class="NormalCode">                                  document-&gt;getPalette());</div><div id="ww1010506" class="NormalCode">      container-&gt;addObject("Icon", _icon);</div><div id="ww1010507" class="NormalCode">      container-&gt;fitToContents();</div><div id="ww1010508" class="NormalCode">   }</div><div id="ww1010509" class="LastNormalCode">}</div><div id="ww1010510" class="Body">Now that <span class="code">BitmapDocument</span> and <span class="code">BitmapView</span> are implemented, you can compile and launch the Bitmap Editor application. You will be able to:</div><div id="ww1010511" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Open one or several PNG, BMP, or JPG files.</div><div id="ww1010512" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Have simultaneous views on a bitmap.</div><div id="ww1006526" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>Create a new bitmap (although the bitmap is empty for the moment).</div><div id="ww1013760" class="Body">The Bitmap Editor application at the end of Step 2 is shown in <a href="../Tutorials/bitmapeditor.08.10.html#ww1013766" title="Implementing the BitmapView">The Bitmap Editor Application After Step 2</a>:</div><div class="ww_skin_page_overflow"><div id="ww1013765" class="Startfigure">   <img class="Default" src="../Tutorials/images/step2-preview.png" width="100%" style="display: block; left: 0.0pt; max-height: 545px; max-width: 672px; top: 0.0pt" alt="" />    </div></div><div id="ww1013766" class="Caption">The Bitmap Editor Application After Step 2</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>