<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Step 1: Building the Browser Window</title><link rel="Prev" href="viewfile.05.1.html" title="Previous" /><link rel="Next" href="viewfile.05.3.html" title="Next" /><link rel="StyleSheet" href="css/viewfile.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/viewfile_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Tutorials/viewfile.05.2.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="piiL4_002bGfNV1cC1ZiwHAuUkQ" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Tutorials/viewfile.05.2.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/gadgtutfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/viewfile.05.1.html#wwconnect_header">The ViewFile Application: Building a Simple File Browser</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Step 1: Building the Browser Window</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww999938" class="Heading1"><span></span>Step 1: Building the Browser Window</div><div id="ww999968" class="Body">This first step explains how to create the window that will display the file hierarchy. </div><div id="ww1003462" class="Body">It shows you how to perform the following tasks:</div><div id="ww1001506" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.2.html#ww1000084" title="Step 1: Building the Browser Window">Choosing the Right Gadgets for your Application</a></div><div id="ww1003475" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.2.html#ww999978" title="Step 1: Building the Browser Window">Choosing the Container</a></div><div id="ww1003494" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.2.html#ww999992" title="Step 1: Building the Browser Window">Creating the Application</a></div><div id="ww1003499" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.2.html#ww1000032" title="Step 1: Building the Browser Window">Previewing the Application</a></div><div id="ww1000084" class="Subhead"><span></span>Choosing the Right Gadgets for your Application</div><div id="ww1000081" class="Body">The application window is composed of two parts:</div><div id="ww1000070" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The left-hand side of the window displays the folders on the hard disk as a tree structure.</div><div id="ww1000073" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span>The right-hand side of the window displays the files contained in the folder open on the left side.</div><div id="ww1000097" class="Body">In Rogue Wave®&nbsp;Views, hierarchical lists of items are represented by the class <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvTreeGadget.html">IlvTreeGadget</a></span>. This class will be used to build the left-hand side of the window. To represent the right-hand side of the window, the <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSheet.html">IlvSheet</a></span> will be used. Instances of this class can display different types of information, thus allowing you to modify the representation of data without changing the type of the object that displays it.</div><div id="ww999971" class="Body">Because the set of gadgets provided by Rogue Wave&nbsp;Views is large, you might have difficulty finding the right gadgets for your application. To get an overview of the main properties of Rogue Wave&nbsp;Views Gadgets, see the chapter Introducing Rogue Wave&nbsp;Views Gadgets. Each gadget is described in detail in its related section in the Rogue Wave&nbsp;Views<span class="emphasis"> Gadgets User’s Manual</span>.</div><div id="ww999972" class="Body">If you do not find a gadget that suits your needs, you can subclass an existing gadget to modify its look or its behavior, or both.</div><div id="ww999978" class="Subhead"><span></span>Choosing the Container</div><div id="ww1000114" class="Body">The <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvTreeGadget.html">IlvTreeGadget</a></span> and the <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvSheet.html">IlvSheet</a></span> objects must be added to a container that will display them. Although there are several types of containers you can choose from, only two are appropriate for the ViewFile application—<span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGadgetContainer.html">IlvGadgetContainer</a></span> and <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span>.</div><div id="ww1000119" class="Body"><span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGadgetContainer.html">IlvGadgetContainer</a></span> is a subclass of <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvContainer.html">IlvContainer</a></span> that accommodates gadgets. It handles the keyboard focus and attachments. For information on these two features, see Gadgets Main Properties.</div><div id="ww1005666" class="Body"><span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span> is a subclass of <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGadgetContainer.html">IlvGadgetContainer</a></span>. Unlike gadget containers, paned containers do not handle graphic objects. Instead, they handle special objects of the class <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPane.html">IlvPane</a></span>. Depending on the orientation of the paned container, which can be horizontal or vertical, panes can be arranged from left to right or from top to bottom. <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPane.html">IlvPane</a></span> has two predefined subclasses, one of which is the <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGraphicPane.html">IlvGraphicPane</a></span> class that accommodates graphic objects. Panes are described in length in Panes.</div><div id="ww1005669" class="Body"><span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span> is more appropriate for this application because it allows you to create a window composed of two adjacent panes having the same height—one for holding the tree gadget and one for the sheet. Also, the complex attachment model provided by <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvGadgetContainer.html">IlvGadgetContainer</a></span> is not needed. However, both types of containers can be combined in the same application.</div><div id="ww1004913" class="Body">For example, you can use gadget containers for building dialog boxes and complex graphic panels and therefore benefit from the elaborate attachment model they feature. Then you can encapsulate them into panes at the global application level.</div><div id="ww999983" class="Subhead"><span></span>Implementing the Main Window</div><div id="ww999984" class="Body">The main window is implemented with the <span class="code">FileViewerWindow</span> class, a subclass of <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span>. This class is declared in the file <span class="code">viewerw.h</span> and defined in the file <span class="code">viewerw.cpp</span>.</div><div id="ww1003577" class="Heading3"><span></span>Creating Panes</div><div id="ww999986" class="Body">The class <span class="code">FileViewerWindow</span> automatically creates two graphic panes: one for encapsulating the tree and the other one for encapsulating the sheet. Both panes are created in the <span class="code">FileViewerWindow::initLayout</span> member function, shown here. (This member function is called from the <span class="code">FileViewerWindow</span> constructor):</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007374" class="CodeInTable">void</div><div id="ww1007375" class="CodeInTable">FileViewerWindow::initLayout(const IlvRect&amp; size)</div><div id="ww1007376" class="CodeInTable">{</div><div id="ww1007377" class="CodeInTable">    // Create the tree gadget in which the folder hierarchy will </div><div id="ww1007378" class="CodeInTable">    // be displayed.</div><div id="ww1007379" class="CodeInTable">    IlvTreeGadget* tree =</div><div id="ww1007380" class="CodeInTable">        new IlvTreeGadget(getDisplay(),</div><div id="ww1007381" class="CodeInTable">                          IlvRect(0,</div><div id="ww1007382" class="CodeInTable">                          0,</div><div id="ww1007383" class="CodeInTable">                          IlvMax((IlvDim)100,</div><div id="ww1007384" class="CodeInTable">                                 (IlvDim)(size.w()/3)),</div><div id="ww1007385" class="CodeInTable">                          size.h()));</div><div id="ww1007386" class="CodeInTable">    // Encapsulate the tree gadget into a graphic pane and name it</div><div id="ww1007387" class="CodeInTable">    // DirectoryHierarchy.</div><div id="ww1007388" class="CodeInTable">    IlvGraphicPane* treePane = new IlvGraphicPane("DirectoryHierarchy", tree);</div><div id="ww1007389" class="CodeInTable">    // The pane is set to resizable. It is possible to</div><div id="ww1007390" class="CodeInTable">    // resize it using a splitter interactively.</div><div id="ww1007391" class="CodeInTable">    treePane-&gt;setResizeMode(IlvPane::Resizable);</div><div id="ww1007392" class="CodeInTable">    // Set also a minimum size on the horizontal direction.</div><div id="ww1007393" class="CodeInTable">    treePane-&gt;setMinimumSize(IlvHorizontal, 100);</div><div id="ww1007394" class="CodeInTable">    // Add the pane to the container.</div><div id="ww1007395" class="CodeInTable">    addPane(treePane);</div><div id="ww1007396" class="CodeInTable">&nbsp;</div><div id="ww1007397" class="CodeInTable">    // Create the sheet.</div><div id="ww1007398" class="CodeInTable">    IlvSheet* sheet =</div><div id="ww1007399" class="CodeInTable">        new IlvSheet(getDisplay(),</div><div id="ww1007400" class="CodeInTable">                     IlvRect(0, 0, size.w(), size.h()),</div><div id="ww1007401" class="CodeInTable">                     1,</div><div id="ww1007402" class="CodeInTable">                     1,</div><div id="ww1007403" class="CodeInTable">                     size.w()/4,</div><div id="ww1007404" class="CodeInTable">                     25,</div><div id="ww1007405" class="CodeInTable">                     2,</div><div id="ww1007406" class="CodeInTable">                     IlvFalse,</div><div id="ww1007407" class="CodeInTable">                     IlvFalse);</div><div id="ww1007408" class="CodeInTable">    // Encapsulate it into a graphic pane giving FileList as name.</div><div id="ww1007409" class="CodeInTable">    IlvGraphicPane* listPane = new IlvGraphicPane("FileList", sheet);</div><div id="ww1007410" class="CodeInTable">    // The sheet is elastic: when the container will be resized, only the </div><div id="ww1007411" class="CodeInTable">    // sheet will be resized (because the tree is only resizable, not elastic).</div><div id="ww1007412" class="CodeInTable">    listPane-&gt;setResizeMode(IlvPane::Elastic);</div><div id="ww1007413" class="CodeInTable">    // Add the pane to the container.</div><div id="ww1007414" class="CodeInTable">    addPane(listPane);</div><div id="ww1007415" class="CodeInTable">    // Update the container.</div><div id="ww1007416" class="CodeInTable">    updatePanes();</div><div id="ww1007417" class="CodeInTable">}<span style="font-family: &quot;Times New Roman&quot;"> </span></div></td></tr></table></div><div id="ww999988" class="Body">The <span class="code">initLayout</span> member function first creates the tree gadget. Then, it encapsulates it into a graphic pane and adds it to the paned container. Similarly, it creates the sheet, encapsulates it into a graphic pane, and adds it to the paned container.</div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1000282" class="Note"><span class="flag">Note:&nbsp;</span>The sheet has only one row and one column, because at this stage you do not know what the sheet will look like when the browsed files are displayed. Note also that the width of the sheet specified by the parameter (<span class="code">size.w(),4</span>) is meaningless because the sheet is elastic and occupies the space left by the tree.</div></td></tr></table></div><div id="ww999990" class="Body">The member function <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span><span class="code">::updatePanes</span> is called to make the addition of the two graphic panes effective. For further information, see the section “Modifying the Layout of a Paned Container” in Panes. </div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1000329" class="Note"><span class="flag">Note:&nbsp;</span>Calling the member function <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvPanedContainer.html">IlvPanedContainer</a></span><span class="code">::updatePanes</span> inserts a slider pane in between the tree and the sheet panes automatically because both are resizable.</div></td></tr></table></div><div id="ww999992" class="Subhead"><span></span>Creating the Application</div><div id="ww1001541" class="Body">The class for displaying the files hierarchy is now complete and can be instantiated. To instantiate it, <span class="code">FileViewerApplication</span>, a subclass of <span class="code">IlvApplication</span>, is used. <span class="code">IlvApplication</span> represents a basic application made up of a set of panels. It is used by Rogue Wave®&nbsp;Views&nbsp;Studio for generating the code of an application.</div><div id="ww999994" class="Body">The <span class="code">FileViewerApplication</span> class is declared in the file <span class="code">viewfile.h</span> and defined in the file <span class="code">viewfile.cpp</span>.</div><div id="ww1003554" class="Heading3"><span></span>Creating the Main Window</div><div id="ww999996" class="Body">The <span class="code">IlvApplication</span> class contains the <span class="code">makePanels</span> virtual member function, which is invoked at the beginning of the program to create the application panels. </div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007432" class="CodeInTable">void </div><div id="ww1007433" class="CodeInTable">FileViewerApplication::makePanels() </div><div id="ww1007434" class="CodeInTable">{  </div><div id="ww1007435" class="CodeInTable">    // Initialize the main window.</div><div id="ww1007436" class="CodeInTable">    initMainWindow(); </div><div id="ww1007437" class="CodeInTable">    // Show it.</div><div id="ww1007438" class="CodeInTable">    getMainWindow()-&gt;show(); </div><div id="ww1007439" class="CodeInTable">} </div></td></tr></table></div><div id="ww1000005" class="Body">The member function <span class="code">FileViewerApplication::initMainWindow</span> creates an instance of <span class="code">FileViewerWindow</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007454" class="CodeInTable">void </div><div id="ww1007455" class="CodeInTable">FileViewerApplication::initMainWindow() </div><div id="ww1007456" class="CodeInTable">{ </div><div id="ww1007457" class="CodeInTable">    // Create the main window.</div><div id="ww1007458" class="CodeInTable">    IlvRect rect(0, 0, 500, 300); </div><div id="ww1007459" class="CodeInTable">    IlvContainer* mainWindow = createMainWindow(rect); </div><div id="ww1007460" class="CodeInTable">    // Name it to be able to retrieve it.</div><div id="ww1007461" class="CodeInTable">    mainWindow-&gt;setName(getName()); </div><div id="ww1007462" class="CodeInTable">    // Quit the application when the user asks for termination.</div><div id="ww1007463" class="CodeInTable">    mainWindow-&gt;setDestroyCallback(IlvAppExit); </div><div id="ww1007464" class="CodeInTable">    // Add the panel to the application. </div><div id="ww1007465" class="CodeInTable">    addPanel(mainWindow); </div><div id="ww1007466" class="CodeInTable">} </div></td></tr></table></div><div id="ww1003074" class="Body">The member function <span class="code">createMainWindow</span> returns an instance of the class <span class="code">FileViewerWindow</span>.</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007477" class="CodeInTable">IlvContainer*</div><div id="ww1007478" class="CodeInTable">FileViewerApplication::createMainWindow(const IlvRect&amp; rect) const</div><div id="ww1007479" class="CodeInTable">{</div><div id="ww1007480" class="CodeInTable">    return new</div><div id="ww1007481" class="CodeInTable">    FileViewerWindow(getDisplay(),getName(),getName(),rect,IlvFalse);</div><div id="ww1007473" class="CodeInTable">}</div></td></tr></table></div><div id="ww1000019" class="Heading3"><span></span>Instantiating the Application</div><div id="ww1000020" class="Body">The <span class="code">FileViewerApplication</span> class is instantiated in the main entry point:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007497" class="CodeInTable">int main(int argc, char* argv[])<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007498" class="CodeInTable">{<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007499" class="CodeInTable">    IlvSetLocale();<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007500" class="CodeInTable">    FileViewerApplication* appli =<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007501" class="CodeInTable">        new FileViewerApplication("VIEWFILE Sample", 0, argc, argv);<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007502" class="CodeInTable">    if (!appli-&gt;getDisplay())<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007503" class="CodeInTable">        return -1;<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007504" class="CodeInTable">    appli-&gt;run();<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007505" class="CodeInTable">    return 0;<span style="font-family: &quot;Times New Roman&quot;"> </span></div><div id="ww1007493" class="CodeInTable">}</div></td></tr></table></div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1001570" class="Note"><span class="flag">Note:&nbsp;</span>The call to <span class="code">IlvSetLocale</span> simply tells Rogue Wave&nbsp;Views to use the current locale. You must call this function if you want your application to be localized. For information, see “Creating a Program to Run in a Localized Environment” in Internationalization in Rogue Wave&nbsp;Views.</div></td></tr></table></div><div id="ww1000032" class="Subhead"><span></span>Previewing the Application</div><div id="ww1000033" class="Body">This is the end of Step 1. Your application window should look like this:</div><div class="ww_skin_page_overflow"><div id="ww1003504" class="Startfigure"><img class="Default" src="../Tutorials/images/viewfile1.gif" width="100%" style="display: block; left: 0.0pt; max-height: 327px; max-width: 506px; top: 0.0pt" alt="" /></div></div><div id="ww1004106" class="Caption">The ViewFile Application After Step 1</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>