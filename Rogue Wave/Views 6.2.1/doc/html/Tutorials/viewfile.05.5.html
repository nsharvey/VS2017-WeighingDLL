<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Step 4: Adding View Frames</title><link rel="Prev" href="viewfile.05.4.html" title="Previous" /><link rel="Next" href="customgadget.06.1.html" title="Next" /><link rel="StyleSheet" href="css/viewfile.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/viewfile_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Tutorials/viewfile.05.5.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pr3d1eNi5sxJm7iAJIvgBgw" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Tutorials/viewfile.05.5.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/gadgtutfrontcover.html#wwconnect_header">Gadgets</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/viewfile.05.1.html#wwconnect_header">The ViewFile Application: Building a Simple File Browser</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Step 4: Adding View Frames</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1002410" class="Heading1"><span></span>Step 4: Adding View Frames</div><div id="ww1002411" class="Body">This last step explains how to add view frame support to the ViewFile application. Including view frames into the application allows you to display and browse through several hierarchical lists of files at the same time. For more information, see View Frames. </div><div id="ww1002412" class="Body">All changes made in this step are reflected in the file <span class="code">viewfile.cpp</span>.</div><div id="ww1004049" class="Body">This step shows you how to perform the following tasks:</div><div id="ww1004054" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.5.html#ww1002415" title="Step 4: Adding View Frames">Choosing the Desktop View</a></div><div id="ww1004059" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.5.html#ww1002433" title="Step 4: Adding View Frames">Creating View Frames</a></div><div id="ww1004064" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.5.html#ww1002438" title="Step 4: Adding View Frames">Adding New Menus and Items to View Frames</a></div><div id="ww1004069" class="Itemize"><span class="WebWorks_Number" style="width: 14.173228346456696pt"><span><img src="bullet.gif" alt="*" border="0" width="8" height="8" /></span></span><a href="../Tutorials/viewfile.05.5.html#ww1002460" title="Step 4: Adding View Frames">Previewing the Application</a></div><div id="ww1002415" class="Subhead"><span></span>Choosing the Desktop View</div><div id="ww1002416" class="Body">View frames are displayed inside a desktop view. The first operation consists of choosing the desktop view where view frames will be displayed. The best place to put the desktop view is the main workspace view pane, where the unique file viewer was displayed in <a href="../Tutorials/viewfile.05.4.html#ww999256" title="Step 3: Adding Docking Bars">Step 3: Adding Docking Bars</a>. The desktop manager that will manage all the view frames can be created from this view.</div><div id="ww1002417" class="Heading3"><span></span>Creating the Desktop Manager</div><div id="ww1002418" class="Body">The <span class="code">FileViewerApplication::makePanels</span> member function must be modified to include a call to <span class="code">initDesktopManager</span>, which creates the desktop manager using the main workspace view pane.</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1007981" class="CodeInTable">void</div><div id="ww1007982" class="CodeInTable">FileViewerApplication::makePanels()</div><div id="ww1007983" class="CodeInTable">{</div><div id="ww1007984" class="CodeInTable">    // Initialize the main window.</div><div id="ww1007985" class="CodeInTable">    initMainWindow();</div><div id="ww1007986" class="CodeInTable">&nbsp;</div><div id="ww1007987" class="CodeInTable">    // Initialize the desktop manager.</div><div id="ww1007988" class="CodeInTable">    initDesktopManager();</div><div id="ww1007989" class="CodeInTable">&nbsp;</div><div id="ww1007990" class="CodeInTable">    // Initialize the panes.</div><div id="ww1007991" class="CodeInTable">    initPanes();</div><div id="ww1007992" class="CodeInTable">&nbsp;</div><div id="ww1007993" class="CodeInTable">    // Initialize the application.</div><div id="ww1007994" class="CodeInTable">    configureApplication();</div><div id="ww1007995" class="CodeInTable">&nbsp;</div><div id="ww1007996" class="CodeInTable">    // Update the main window layout.</div><div id="ww1007997" class="CodeInTable">    getMainWindow()-&gt;updatePanes(IlvTrue);</div><div id="ww1007998" class="CodeInTable">&nbsp;</div><div id="ww1007999" class="CodeInTable">    // Show it.</div><div id="ww1008000" class="CodeInTable">    getMainWindow()-&gt;show();</div><div id="ww1008001" class="CodeInTable">} </div></td></tr></table></div><div id="ww1002420" class="Body">Here is the detail of <span class="code">initDesktopManager</span>:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008016" class="CodeInTable">void</div><div id="ww1008017" class="CodeInTable">FileViewerApplication::initDesktopManager()</div><div id="ww1008018" class="CodeInTable">{</div><div id="ww1008019" class="CodeInTable">    createDesktopManager(getMainWindow()-&gt;</div><div id="ww1008020" class="CodeInTable">    getMainWorkspaceViewPane()-&gt;getView());</div><div id="ww1008021" class="CodeInTable">}<span style="font-family: &quot;Times New Roman&quot;"> </span></div></td></tr></table></div><div id="ww1002422" class="Body">The factory member function <span class="code">FileViewerApplication::createDesktopManager</span> returns an instance of the <span class="ClassName"><a href="../RefMan/refcppgadgets/classIlvDesktopManager.html">IlvDesktopManager</a></span> class:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008036" class="CodeInTable">IlvDesktopManager*</div><div id="ww1008037" class="CodeInTable">FileViewerApplication::createDesktopManager(IlvView* view) const</div><div id="ww1008038" class="CodeInTable">{</div><div id="ww1008039" class="CodeInTable">    return new IlvDesktopManager(view);</div><div id="ww1008040" class="CodeInTable">} </div></td></tr></table></div><div id="ww1002424" class="Heading3"><span></span>Initializing the Desktop Manager</div><div id="ww1002425" class="Body">You must also modify <span class="code">FileViewerApplication::configureApplication</span> to initialize the desktop manager:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008051" class="CodeInTable">void</div><div id="ww1008052" class="CodeInTable">FileViewerApplication::configureApplication()</div><div id="ww1008053" class="CodeInTable">{</div><div id="ww1008054" class="CodeInTable">    // The desktop manager is maximized by default.</div><div id="ww1008055" class="CodeInTable">    getDesktopManager()-&gt;</div><div id="ww1008056" class="CodeInTable">       makeMaximizedStateButtons((IlvToolBar*)</div><div id="ww1008057" class="CodeInTable">                                ((IlvGraphicPane*)getMainWindow()-&gt;</div><div id="ww1008058" class="CodeInTable">                                  getPane("Menu Bar", IlvTrue))-&gt;getObject());</div><div id="ww1008059" class="CodeInTable">    getDesktopManager()-&gt;maximize(0);</div><div id="ww1008060" class="CodeInTable">&nbsp;</div><div id="ww1008061" class="CodeInTable">    // Create a frame initialized at "/".</div><div id="ww1008062" class="CodeInTable">    getDesktopManager()-&gt;setCurrentFrame(createNewFrame(IlvRect(0,</div><div id="ww1008063" class="CodeInTable">                                         0,</div><div id="ww1008064" class="CodeInTable">                                         400,</div><div id="ww1008065" class="CodeInTable">                                         200), "/"));</div><div id="ww1008066" class="CodeInTable">} </div></td></tr></table></div><div id="ww1002427" class="Body"><span class="MethodName"><a href="../RefMan/refcppgadgets/classIlvDesktopManager.html#a9ea0f8a3668267c378fe0ba410d86324">makeMaximizedStateButtons</a></span> specifies where the buttons of the view frame should appear when it is maximized. </div><div id="ww1004988" class="Body">See “Maximized View Frames” in View Frames. </div><div id="ww1002947" class="Body">The buttons are displayed inside the menu bar, as shown here:</div><div class="ww_skin_page_overflow"><div id="ww1004074" class="Startplain"><img class="Default" src="../Tutorials/images/maxbut.gif" width="100%" style="display: block; left: 0.0pt; max-height: 21px; max-width: 266px; top: 0.0pt" alt="" /></div></div><div id="ww1002432" class="Body">Then, the desktop manager is maximized, and a default frame is created by  <span class="code">FileViewerApplication::createNewFrame</span>. </div><div id="ww1002433" class="Subhead"><span></span>Creating View Frames</div><div id="ww1002435" class="Body">The member function <span class="code">FileViewerApplication::createNewFrame</span> creates a new frame that encapsulates the file viewer and its associated window:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008081" class="CodeInTable">IlvViewFrame*</div><div id="ww1008082" class="CodeInTable">FileViewerApplication::createNewFrame(const IlvRect&amp; rect,</div><div id="ww1008083" class="CodeInTable">const char* path) const</div><div id="ww1008084" class="CodeInTable">{</div><div id="ww1008085" class="CodeInTable">    // Create a view frame in the desktop manager view.</div><div id="ww1008086" class="CodeInTable">    IlvViewFrame* vframe = new IlvViewFrame(getDesktopManager()-&gt;getView(),</div><div id="ww1008087" class="CodeInTable">                                                                 path,</div><div id="ww1008088" class="CodeInTable">                                                                 rect,</div><div id="ww1008089" class="CodeInTable">                                                                 IlvFalse);</div><div id="ww1008090" class="CodeInTable">     vframe-&gt;setDestroyCallback(DestroyFrame);</div><div id="ww1008091" class="CodeInTable">     // Create a file viewer window inside the view frame.</div><div id="ww1008092" class="CodeInTable">     FileViewerWindow* viewerWindow = createFileViewerWindow(vframe, rect);</div><div id="ww1008093" class="CodeInTable">     // Create the file viewer in the file viewer window.</div><div id="ww1008094" class="CodeInTable">     FileViewer* viewer = createFileViewer(viewerWindow);</div><div id="ww1008095" class="CodeInTable">     // Associate the viewer window with the viewer.</div><div id="ww1008096" class="CodeInTable">     SetFileViewer(viewerWindow, viewer);</div><div id="ww1008097" class="CodeInTable">     // Initialize the file viewer.</div><div id="ww1008098" class="CodeInTable">     viewer-&gt;init(IlvPathName(path));</div><div id="ww1008099" class="CodeInTable">     return vframe;</div><div id="ww1008100" class="CodeInTable">}<span style="font-family: &quot;Times New Roman&quot;"> </span></div></td></tr></table></div><div id="ww1002437" class="Body">The member function <span class="ClassName"><a href="../RefMan/refcppfoundation/classIlvView.html">IlvView</a></span><span class="code">::setDestroyCallback</span> sets a destroy callback that handles the deletion of the created frame. See “Closing View Frames” in View Frames. </div><div id="ww1004991" class="Body">Then, the file viewer window is created as a subview of the view frame. See “Creating a Client View” in View Frames. Finally, a file viewer is connected to the view frame and initialized.</div><div id="ww1002438" class="Subhead"><span></span>Adding New Menus and Items to View Frames</div><div id="ww1002439" class="Body">To add new menu items to the menu bar, you must modify the member function <span class="code">FileViewerApplication::initMenuBar</span> as follows:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008115" class="CodeInTable">void</div><div id="ww1008116" class="CodeInTable">FileViewerApplication::initMenuBar()</div><div id="ww1008117" class="CodeInTable">{</div><div id="ww1008118" class="CodeInTable">    // The menu bar is in fact an IlvToolBar.</div><div id="ww1008119" class="CodeInTable">    IlvToolBar* menubar = new IlvToolBar(getDisplay(), IlvPoint(0, 0));</div><div id="ww1008120" class="CodeInTable">    // Add three items.</div><div id="ww1008121" class="CodeInTable">    menubar-&gt;addLabel("File");</div><div id="ww1008122" class="CodeInTable">    menubar-&gt;addLabel("Windows");</div><div id="ww1008123" class="CodeInTable">    menubar-&gt;addLabel("Help");</div><div id="ww1008124" class="CodeInTable">    // Create the pane that will encapsulate the menu bar.</div><div id="ww1008125" class="CodeInTable">    IlvGraphicPane* menubarPane = new ApplicationMenuBarPane("Menu Bar",</div><div id="ww1008126" class="CodeInTable">                                                             menubar);</div><div id="ww1008127" class="CodeInTable">    // Change the mode of the menu bar to make it show items on several</div><div id="ww1008128" class="CodeInTable">    // rows, if needed.</div><div id="ww1008129" class="CodeInTable">    menubar-&gt;setConstraintMode(IlvTrue);</div><div id="ww1008130" class="CodeInTable">    // Add the pane to the application on top of the main workspace.</div><div id="ww1008131" class="CodeInTable">    getMainWindow()-&gt;addRelativeDockingPane(menubarPane,</div><div id="ww1008132" class="CodeInTable">                                            IlvDockableMainWindow::</div><div id="ww1008133" class="CodeInTable">                                            GetMainWorkspaceName(),</div><div id="ww1008134" class="CodeInTable">                                            IlvTop);</div><div id="ww1008135" class="CodeInTable">    // Now fill the menus with popup menus.</div><div id="ww1008136" class="CodeInTable">    IlvPopupMenu* menu;</div><div id="ww1008137" class="CodeInTable">    // Menu File: New / Separator / Exit.</div><div id="ww1008138" class="CodeInTable">    menu = new IlvPopupMenu(getDisplay());</div><div id="ww1008139" class="CodeInTable">    menu-&gt;addLabel("New (Ctrl+N)");</div><div id="ww1008140" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setBitmap(getBitmap("newBm"));</div><div id="ww1008141" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setCallback(AddNewFrame);</div><div id="ww1008142" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setClientData(this);</div><div id="ww1008143" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setAcceleratorText("Ctrl+N");</div><div id="ww1008144" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setAcceleratorKey(IlvCtrlChar('N'));</div><div id="ww1008145" class="CodeInTable">    menu-&gt;addItem(IlvMenuItem());</div><div id="ww1008146" class="CodeInTable">    menu-&gt;addLabel("Exit");</div><div id="ww1008147" class="CodeInTable">    menu-&gt;getItem(2)-&gt;setCallback(ExitApplication);</div><div id="ww1008148" class="CodeInTable">    menu-&gt;getItem(2)-&gt;setClientData(this);</div><div id="ww1008149" class="CodeInTable">    menubar-&gt;getItem(0)-&gt;setMenu(menu, IlvFalse);</div><div id="ww1008150" class="CodeInTable">    // Menu Windows: Cascade / Tile Horizontally / Tile Vertically.</div><div id="ww1008151" class="CodeInTable">    menu = new IlvPopupMenu(getDisplay());</div><div id="ww1008152" class="CodeInTable">    menu-&gt;addLabel("Cascade");</div><div id="ww1008153" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setCallback(CascadeFrames);</div><div id="ww1008154" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setClientData(this);</div><div id="ww1008155" class="CodeInTable">    menu-&gt;addLabel("Tile Horizontally");</div><div id="ww1008156" class="CodeInTable">    menu-&gt;getItem(1)-&gt;setCallback(TileHorizontallyFrames);</div><div id="ww1008157" class="CodeInTable">    menu-&gt;getItem(1)-&gt;setClientData(this);</div><div id="ww1008158" class="CodeInTable">    menu-&gt;addLabel("Tile Vertically");</div><div id="ww1008159" class="CodeInTable">    menu-&gt;getItem(2)-&gt;setCallback(TileVerticallyFrames);</div><div id="ww1008160" class="CodeInTable">    menu-&gt;getItem(2)-&gt;setClientData(this);</div><div id="ww1008161" class="CodeInTable">    menubar-&gt;getItem(1)-&gt;setMenu(menu, IlvFalse);</div><div id="ww1008162" class="CodeInTable">    // Menu Help: About.</div><div id="ww1008163" class="CodeInTable">    menu = new IlvPopupMenu(getDisplay());</div><div id="ww1008164" class="CodeInTable">    menu-&gt;addLabel("About");</div><div id="ww1008165" class="CodeInTable">    menubar-&gt;getItem(2)-&gt;setMenu(menu, IlvFalse);</div><div id="ww1008166" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setCallback(ShowAboutPanel);</div><div id="ww1008167" class="CodeInTable">    menu-&gt;getItem(0)-&gt;setClientData(this);</div><div id="ww1008111" class="CodeInTable">}</div></td></tr></table></div><div id="ww1003381" class="Body">The menu bar has a Windows menu that contains the sub-items shown in the following figure:</div><div class="ww_skin_page_overflow"><div id="ww1004088" class="Startplain"><img class="Default" src="../Tutorials/images/windows.gif" width="100%" style="display: block; left: 0.0pt; max-height: 99px; max-width: 210px; top: 0.0pt" alt="" /></div></div><div id="ww1002452" class="Body">The callbacks used by the Windows menu invoke the corresponding member functions on the desktop manager:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008191" class="CodeInTable">static void</div><div id="ww1008192" class="CodeInTable">CascadeFrames(IlvGraphic* g, IlvAny arg)</div><div id="ww1008193" class="CodeInTable">{</div><div id="ww1008194" class="CodeInTable">    FileViewerApplication* application = (FileViewerApplication*)arg;</div><div id="ww1008195" class="CodeInTable">    application-&gt;getDesktopManager()-&gt;cascadeFrames();</div><div id="ww1008196" class="CodeInTable">}</div><div id="ww1008197" class="CodeInTable">&nbsp;</div><div id="ww1008198" class="CodeInTable">static void </div><div id="ww1008199" class="CodeInTable">TileHorizontallyFrames(IlvGraphic* g, IlvAny arg)</div><div id="ww1008200" class="CodeInTable">{</div><div id="ww1008201" class="CodeInTable">    FileViewerApplication* application = (FileViewerApplication*)arg;</div><div id="ww1008202" class="CodeInTable">    application-&gt;getDesktopManager()-&gt;tileFrames(IlvHorizontal);</div><div id="ww1008203" class="CodeInTable">}</div><div id="ww1008204" class="CodeInTable">&nbsp;</div><div id="ww1008205" class="CodeInTable">static void </div><div id="ww1008206" class="CodeInTable">TileVerticallyFrames(IlvGraphic* g, IlvAny arg)</div><div id="ww1008207" class="CodeInTable">{</div><div id="ww1008208" class="CodeInTable">    FileViewerApplication* application = (FileViewerApplication*)arg;</div><div id="ww1008209" class="CodeInTable">    application-&gt;getDesktopManager()-&gt;tileFrames(IlvVertical);</div><div id="ww1008187" class="CodeInTable">}</div></td></tr></table></div><div id="ww1008222" class="Body">The member function <span class="code">FileViewerApplication::initToolBar</span> has also been modified to include a New item that creates a new frame when selected:</div><div class="ww_skin_page_overflow"><div id="ww1008226" class="Startplain"> <img class="Default" src="../Tutorials/images/new.gif" width="100%" style="display: block; left: 0.0pt; max-height: 94px; max-width: 196px; top: 0.0pt" alt="" /></div></div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008236" class="CodeInTable">void</div><div id="ww1008237" class="CodeInTable">FileViewerApplication::initToolBar()</div><div id="ww1008238" class="CodeInTable">{</div><div id="ww1008239" class="CodeInTable">    IlvToolBar* toolbar = new IlvToolBar(getDisplay(), IlvPoint(0, 0));</div><div id="ww1008240" class="CodeInTable">    // Item New.</div><div id="ww1008241" class="CodeInTable">    toolbar-&gt;insertBitmap(getBitmap("newBm"));</div><div id="ww1008242" class="CodeInTable">    toolbar-&gt;getItem(0)-&gt;setCallback(AddNewFrame);</div><div id="ww1008243" class="CodeInTable">    toolbar-&gt;getItem(0)-&gt;setClientData(this);</div><div id="ww1008244" class="CodeInTable">    toolbar-&gt;getItem(0)-&gt;setToolTip("New");</div><div id="ww1008245" class="CodeInTable">    // Separator.</div><div id="ww1008246" class="CodeInTable">    toolbar-&gt;addItem(IlvMenuItem());</div><div id="ww1008247" class="CodeInTable">    // Item Up One Level.</div><div id="ww1008248" class="CodeInTable">    toolbar-&gt;insertBitmap(getBitmap("upBm"));</div><div id="ww1008249" class="CodeInTable">    toolbar-&gt;getItem(2)-&gt;setCallback(UpOneLevel);</div><div id="ww1008250" class="CodeInTable">    toolbar-&gt;getItem(2)-&gt;setClientData(this);</div><div id="ww1008251" class="CodeInTable">    toolbar-&gt;getItem(2)-&gt;setToolTip("Up One Level");</div><div id="ww1008252" class="CodeInTable">    // Encapsulate the toolbar into a graphic pane.</div><div id="ww1008253" class="CodeInTable">    IlvGraphicPane* toolbarPane = new IlvAbstractBarPane("Toolbar", toolbar);</div><div id="ww1008254" class="CodeInTable">    // Add the pane to the application on top of the main workspace.</div><div id="ww1008255" class="CodeInTable">    getMainWindow()-&gt;addRelativeDockingPane(toolbarPane,</div><div id="ww1008256" class="CodeInTable">                                            IlvDockableMainWindow::</div><div id="ww1008257" class="CodeInTable">                                            GetMainWorkspaceName(),</div><div id="ww1008258" class="CodeInTable">                                            IlvTop);</div><div id="ww1008259" class="CodeInTable">} </div></td></tr></table></div><div id="ww1002457" class="Body">The callback triggered by the new item invokes the member function <span class="code">FileViewerApplication::createNewFrame</span> and activates the new frame:</div><div class="ww_skin_page_overflow"><table class="CodeTable" cellspacing="0" summary=""><tr><td style="background-color: #E0E0E0; padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top; width: 371.338299212598pt"><div id="ww1008270" class="CodeInTable">static void </div><div id="ww1008271" class="CodeInTable">AddNewFrame(IlvGraphic* g, IlvAny arg)</div><div id="ww1008272" class="CodeInTable">{</div><div id="ww1008273" class="CodeInTable">    FileViewerApplication* application = (FileViewerApplication*)arg;</div><div id="ww1008274" class="CodeInTable">    IlvViewFrame* vframe =</div><div id="ww1008275" class="CodeInTable">       application-&gt;createNewFrame(IlvRect(0, 0, 400, 200), "/");</div><div id="ww1008276" class="CodeInTable">    application-&gt;getDesktopManager()-&gt;setCurrentFrame(vframe);</div><div id="ww1008277" class="CodeInTable">}<span style="font-family: &quot;Times New Roman&quot;"> </span></div></td></tr></table></div><div class="ww_skin_page_overflow"><table class="NoteTable" cellspacing="0" summary=""><tr><td style="padding-bottom: 2pt; padding-left: 0pt; padding-right: 0pt; padding-top: 2pt; vertical-align: top"><div id="ww1005997" class="Note"><span class="flag">Note:&nbsp;</span>The New item is associated with an accelerator key allowing the user to create a new frame by pressing the Ctrl+N key combination. See “Associating Accelerators on Menu Items” in Menus, Menu Bars, and Toolbars.</div></td></tr></table></div><div id="ww1002460" class="Subhead"><span></span>Previewing the Application</div><div id="ww998931" class="Body">You have completed this tutorial. The application window should look like this:</div><div class="ww_skin_page_overflow"><div id="ww1004095" class="Startfigure"><img class="Default" src="../Tutorials/images/viewfile4.gif" width="100%" style="display: block; left: 0.0pt; max-height: 463px; max-width: 548px; top: 0.0pt" alt="" /></div></div><div id="ww1004129" class="Caption">The Final ViewFile Application</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>