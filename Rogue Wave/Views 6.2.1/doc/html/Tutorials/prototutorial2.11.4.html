<!DOCTYPE html ><html xml:lang="en" lang="en" data-highlight-require-whitespace="false" xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><!-- RW Customization - favicon file --><link rel="shortcut icon" href="connect/favicon.ico" /><title>Step 2: Retrieving and Modifying the Prototype Instances</title><link rel="Prev" href="prototutorial2.11.3.html" title="Previous" /><link rel="Next" href="prototutorial2.11.5.html" title="Next" /><link rel="StyleSheet" href="css/prototutorial2.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/skin.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/social.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/webworks.css" type="text/css" media="all" /><!--[if IE 7]><link rel="StyleSheet" href="css/prototutorial2_IE7.css" type="text/css" media="all" /><![endif]--><link rel="StyleSheet" href="css/custom.css" type="text/css" media="all" /><link rel="StyleSheet" href="css/print.css" type="text/css" media="print" /><script type="text/javascript">
    'use strict';

    var redirect_url, page_hash;

    if ((window === window.top) && (window.navigator.userAgent.indexOf('bot/') === -1)) {
        // Redirect
        //
        redirect_url = "../views.html#page/Tutorials/prototutorial2.11.4.html";
        if (window.document.location.hash.length > 1) {
            // Sanitize and append it
            //
            page_hash = window.document.location.hash.substring(1);
            page_hash = page_hash.replace(/[\\><:;"]|%5C|%3C|%3E|%3A|%3B|%22/gi, '');
            redirect_url += '#' + page_hash;
        }
        window.document.location.replace(redirect_url);
    }
</script><script type="text/javascript" src="scripts/common.js"></script><script type="text/javascript" src="scripts/page.js"></script><script type="text/javascript" src="scripts/search-client.js"></script><script type="text/javascript" src="scripts/unidata.js"></script><script type="text/javascript" src="scripts/unibreak.js"></script><script type="text/javascript">var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-111257570-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></head><body id="pN_002fmaNpjm4tke3_002bBwoNvUiow" class="ww_skin_page_body" onload="Page.OnLoad('../views.html#page/Tutorials/prototutorial2.11.4.html');"><header id="wwconnect_header"><div class="ww_skin_breadcrumbs"><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/protostutfrontcover.html#wwconnect_header">2D Graphics</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_parent"><a href="../Tutorials/prototutorial2.11.1.html#wwconnect_header">Linking Your Prototype to Application Objects</a></span><span class="ww_skin_breadcrumbs_divider"> &gt; </span><span class="ww_skin_breadcrumbs_current">Step 2: Retrieving and Modifying the Prototype Instances</span></div><div class="ww_skin_page_toolbar"><a class="ww_behavior_print ww_skin ww_skin_print" title="Print" href="#">&nbsp;</a></div></header><div id="ww1038109" class="Heading1"><span></span>Step 2: Retrieving and Modifying the Prototype Instances</div><div id="ww1038110" class="Body">All operations done on prototype instances within a panel, be it a container or a manager, (and on <span class="code">IlvGroup</span>s, which are the superclass of prototype instances) are done using an <span class="ClassName"><a href="../RefMan/refcppprotos/classIlvGroupHolder.html">IlvGroupHolder</a></span>. This class allows you to add, remove, and retrieve objects of class <span class="ClassName"><a href="../RefMan/refcppprotos/classIlvGroup.html">IlvGroup</a></span> from a panel.</div><div id="ww1038111" class="Body">After having read the file, retrieve the group holder associated with the manager. From the group holder, retrieve the prototype instance <span class="code">myThermometer</span>, and initialize its temperature attribute to <span class="code">0.0</span>:</div><div id="ww1038112" class="NormalCode">// Insert the following code after the line:  </div><div id="ww1038113" class="NormalCode">// "the prototype instances are automatically read."</div><div id="ww1038114" class="NormalCode">  IlvGroupHolder* holder=IlvGroupHolder::Get(manager);</div><div id="ww1038115" class="NormalCode">  IlvGroup* myThermometer = holder-&gt;getGroup("myThermometer");  </div><div id="ww1038116" class="NormalCode">  if (!myThermometer) {</div><div id="ww1038117" class="NormalCode">    IlvFatalError("This program expects to find an IlvGroup "</div><div id="ww1038118" class="NormalCode">             "of name 'myThermometer' in the file 'myPanel.ilv'");</div><div id="ww1038119" class="NormalCode">    return -1;</div><div id="ww1038120" class="NormalCode">  }</div><div id="ww1038121" class="LastNormalCode">  myThermometer-&gt;changeValue(IlvValue("temperature", 0.0));</div><div id="ww1038122" class="Body">Next, you need to periodically update the temperature value from values provided by the application. For this, create a timer routine by inserting the following lines before the main function in the program (after the include directives):</div><div id="ww1038123" class="NormalCode">// Insert the following code before the main() body.</div><div id="ww1038124" class="NormalCode">const IlUInt angleincrement = 4;</div><div id="ww1038125" class="NormalCode">static void</div><div id="ww1038126" class="NormalCode">TimerProc(IlvTimer*, IlvAny arg)</div><div id="ww1038127" class="NormalCode">{</div><div id="ww1038128" class="NormalCode">static IlUInt angle=0;</div><div id="ww1038129" class="NormalCode">    IlvGroup* thermometer=(IlvGroup*) arg;</div><div id="ww1038130" class="NormalCode">    IlDouble temperature=50.0+40.0*sin(degreesToRadians(angle));</div><div id="ww1038131" class="NormalCode">    // Feed in temperature values.</div><div id="ww1038132" class="NormalCode">    thermometer-&gt;changeValue(IlvValue("temperature", temperature));</div><div id="ww1038133" class="NormalCode">    angle = (angle + angleincrement) % 360;</div><div id="ww1038134" class="LastNormalCode">}</div><div id="ww1038135" class="Body">This function makes the temperature rise and fall according to a sinusoidal function, between the values of 10 and 90. Next, initialize this timer to wake up every 200 ms and update the prototype instance “<span class="code">myThermometer</span>”, which you retrieved from the panel. After the line:</div><div id="ww1038136" class="LastNormalCode">   myThermometer-&gt;changeValue(IlvValue("temperature", 0.0));</div><div id="ww1038137" class="Body">insert the following code:</div><div id="ww1038138" class="NormalCode">  // start changing the values of the target group </div><div id="ww1038139" class="NormalCode">  IlvTimer* timer = new IlvTimer(display, 0, 200, TimerProc,</div><div id="ww1038140" class="NormalCode">                                 (IlvAny)myThermometer);</div><div id="ww1038141" class="LastNormalCode">  timer-&gt;run();</div><div id="ww1038142" class="Body">This will periodically update the thermometer values. You can now compile and run your program. You will see that the temperature rises and falls regularly, the thermometer becoming red when the temperature is above the threshold previously set in Rogue Wave&nbsp;Views Studio.</div><div class="ww_skin_page_overflow"><div id="ww1038154" class="Startplain"><img class="Default" src="../Tutorials/images/prototutorial2.11.4.1.png" width="100%" style="display: block; left: 0.0pt; max-height: 225px; max-width: 492px; top: 0.0pt" alt="" />   </div></div><div id="ww1038155" class="Body">You can change the threshold value with a call to:</div><div id="ww1038156" class="LastNormalCode">myThermometer-&gt;changeValue(IlvValue("threshold", 50.0));</div><div id="ww1038157" class="Body">You can retrieve the threshold value with the following call: </div><div id="ww1038158" class="NormalCode">IlvValue tval("threshold", (IlDouble)0.0);</div><div id="ww1038159" class="LastNormalCode">IlDouble threshold = (IlDouble) myThermometer-&gt;queryValue(tval);</div><div id="ww1038160" class="Body">The complete source code is provided in the file <span class="code">step2/program.cpp</span>, which serves as a starting point for the next step of the tutorial.</div><footer><!-- Related Topics --><!--                --><!-- Disqus --><!--        --><!-- Google Translation --><!--                    --><div class="ww_skin_page_globalization"><div id="google_translate_element">&nbsp;</div><script><!--
            function googleTranslateElementInit() {
              new google.translate.TranslateElement({
                  pageLanguage: '',
                  autoDisplay: true
                }, 'google_translate_element');
            }
// --></script></div><br /></footer><HR /><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Version 6.2.1</div><div style="font-size: 8pt; font-family: verdana; font-weight: normal; text-align: center;">Copyright © 2018, Rogue Wave Software, Inc. All Rights Reserved.</div></body></html>